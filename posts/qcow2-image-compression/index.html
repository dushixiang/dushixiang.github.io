<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="压缩qcow2
首先，需要对虚拟机剩余空间进行写零操作：
dd if=/dev/zero of=/zero.dat
删除 zero.dat：
rm /zero.dat
关闭虚拟机，执行qemu-img的convert命令进行转换：
qemu-img convert -c -O qcow2 /path/old.img.qcow2 /path/new.img.qcow2
"><title>压缩qcow2 镜像文件</title><link rel="shortcut icon" type=image/x-icon href=/><link rel=stylesheet href=/css/main.51652302d3a998bf7887aed5c2cf89141bbebdf45a2c8f87b0717a3cf4f51c4e53c694c328fb1de78c3a625a1c01f80745bf1f2f42c040647a245cbbb6c2d1d7.css integrity="sha512-UWUjAtOpmL94h67Vws+JFBu+vfRaLI+HsHF6PPT1HE5TxpTDKPsd54w6YlocAfgHRb8fL0LAQGR6JFy7tsLR1w=="></head><body a=auto><main class=page-content aria-label=Content><div class=w><div class=post-meta><a href=/>..</a><p><time datetime="2020-12-31 00:00:00 +0000 UTC">2020-12-31</time></p></div><article><h1>压缩qcow2 镜像文件</h1><h1 id=压缩qcow2>压缩qcow2</h1><p>首先，需要对虚拟机剩余空间进行写零操作：</p><pre tabindex=0><code>dd if=/dev/zero of=/zero.dat
</code></pre><p>删除 zero.dat：</p><pre tabindex=0><code>rm /zero.dat
</code></pre><p>关闭虚拟机，执行<code>qemu-img</code>的<code>convert</code>命令进行转换：</p><pre tabindex=0><code>qemu-img convert -c -O qcow2 /path/old.img.qcow2 /path/new.img.qcow2
</code></pre></article></div></main></body></html>